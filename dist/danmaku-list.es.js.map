{"version":3,"file":"danmaku-list.es.js","sources":["../src/js/utils/index.ts","../src/js/const.ts","../node_modules/lit-html/lit-html.js","../plugins/danmaku-list/VirtualList.ts","../plugins/danmaku-list/DanmakuList.ts","../plugins/danmaku-list/index.ts"],"sourcesContent":["const isMobile = /mobile/i.test(window.navigator.userAgent)\n\n/** 创建特定长度的填充数组 */\nexport const createArray = <T>(count: number, val: T) => Array.from({ length: count }, () => val)\n\n/** 获取全屏元素 */\nexport const getFullscreenElement = (): HTMLElement | null =>\n  document.fullscreenElement ||\n  (document as any).mozFullScreenElement ||\n  (document as any).webkitFullscreenElement ||\n  (document as any).msFullscreenElement ||\n  null\n\n/** 是否支持全屏 */\nexport const fullScreenEnabled: boolean =\n  document.fullscreenEnabled ||\n  (document as any).webkitFullscreenEnabled ||\n  (document as any).mozFullScreenEnabled ||\n  (document as any).msFullscreenEnabled ||\n  false\n\n/** 是否支持画中画 */\nexport const pictureInPictureEnabled = document.pictureInPictureEnabled\n\n/**\n * 将时间文本转换为秒数\n *\n * @param {String} str 冒号分隔的时间文本，支持全角冒号\n * @return {Number} second\n */\nexport const timeToSecond = (str: string): number => {\n  const arr = str.split(/[:：]/).slice(-3)\n  const sec = parseInt(arr[arr.length - 1]) || 0\n  const min = parseInt(arr[arr.length - 2]) || 0\n  const hour = parseInt(arr[arr.length - 3]) || 0\n  return sec + min * 60 + hour * 3600\n}\n\n/**\n * 防抖\n * @param {Function} fn 需要防抖处理的函数\n * @param {number} delay 防抖延迟执行时间\n * @param {boolean} immediate 是否立即执行一次\n */\nexport const debounce = (fn: (...args: unknown[]) => void, delay: number, immediate = false) => {\n  let timer: ReturnType<typeof setTimeout> | null = null\n  let isInvoke = false\n  return function (this: unknown, ...args: unknown[]) {\n    if (timer) clearTimeout(timer)\n    if (immediate && !isInvoke) {\n      fn.apply(this, args)\n      isInvoke = true\n    } else {\n      timer = setTimeout(() => {\n        fn.apply(this, args)\n        clearTimeout(timer!)\n        timer = null\n        isInvoke = false\n      }, delay)\n    }\n  }\n}\n\n/**\n * 节流\n * @param {Function} fn 需要节流处理的函数\n * @param {number} wait 执行一次后需要等待的时间\n */\nexport const throttle = (fn: (...args: unknown[]) => void, wait: number) => {\n  let timer: ReturnType<typeof setTimeout> | null = null\n  return function (this: unknown, ...args: unknown[]) {\n    if (!timer) {\n      timer = setTimeout(() => {\n        fn.apply(this, args)\n        clearTimeout(timer!)\n        timer = null\n      }, wait)\n    }\n  }\n}\n\n// === 未完全重构 ==========\n\n/**\n * 将秒数转换为时间文本\n *\n * @param {Number} second\n * @param {Boolean} showHour\n * @return {String} 00:00 or 00:00:00\n */\nexport const secondToTime = (second: number, showHour = true) => {\n  second = second || 0\n  if (second === 0 || second === Infinity || second.toString() === \"NaN\") {\n    return \"00:00\"\n  }\n  const add0 = (num: number) => (num < 10 ? `0${num}` : `${num}`)\n  const hour = Math.floor(second / 3600)\n  const min = Math.floor((second - hour * 3600) / 60)\n  const sec = Math.floor(second - hour * 3600 - min * 60)\n  if (showHour) {\n    return (hour > 0 ? [hour, min, sec] : [min, sec]).map(add0).join(\":\")\n  }\n  return [hour * 60 + min, sec].map(add0).join(\":\")\n}\n\nexport const storage = {\n  set: (key: string, value: any) => {\n    localStorage.setItem(key, value)\n  },\n\n  get: (key: string) => localStorage.getItem(key),\n}\n\nexport const nameMap = {\n  dragStart: isMobile ? \"touchstart\" : \"mousedown\",\n  dragMove: isMobile ? \"touchmove\" : \"mousemove\",\n  dragEnd: isMobile ? \"touchend\" : \"mouseup\",\n}\nexport const colorLuminance = (hex: string, lum: number) => {\n  // validate hex string\n  hex = String(hex).replace(/[^0-9a-f]/gi, \"\")\n  if (hex.length < 6) {\n    hex = hex[0] + hex[0] + hex[1] + hex[1] + hex[2] + hex[2]\n  }\n  lum = lum || 0\n\n  // convert to decimal and change luminosity\n  let rgb = \"#\"\n  let c\n  let i\n  for (i = 0; i < 3; i++) {\n    c = parseInt(hex.substr(i * 2, 2), 16)\n    c = Math.round(Math.min(Math.max(0, c + c * lum), 255)).toString(16)\n    rgb += `00${c}`.substr(c.length)\n  }\n\n  return rgb\n}\n\nexport const hex2Rgb = (str: string, opacity: number) => {\n  // 16进制转rgb\n  const reg = /^#([0-9A-Fa-f]{3}|[0-9A-Fa-f]{6})$/\n  if (!reg.test(str)) {\n    return\n  }\n  let newStr = str.toLowerCase().replace(/#/g, \"\")\n  const len = newStr.length\n  if (len == 3) {\n    let t = \"\"\n    for (let i = 0; i < len; i++) {\n      t += newStr.slice(i, i + 1).concat(newStr.slice(i, i + 1))\n    }\n    newStr = t\n  }\n  const arr = [] // 将字符串分隔，两个两个的分隔\n  for (let i = 0; i < 6; i += 2) {\n    const s = newStr.slice(i, i + 2)\n    arr.push(parseInt(`0x${s}`))\n  }\n  if (opacity) return `rgba(${arr.join(\",\")},${opacity})`\n  return `rgb(${arr.join(\",\")})`\n}\nexport const rgb2Hex = (str: string) => {\n  // rgb转16进制\n  const reg = /^(rgb|RGB)/\n  if (!reg.test(str)) {\n    return\n  }\n  const arr = str.slice(4, str.length - 1).split(\",\")\n  let color = \"#\"\n  for (let i = 0; i < arr.length; i++) {\n    let t = Number(arr[i]).toString(16)\n    if (t == \"0\") {\n      // 如果为“0”的话，需要补0操作,否则只有5位数\n      t += \"0\"\n    }\n    color += t\n  }\n  return color\n}\nexport const color2Number = (color: string) => {\n  if (color[0] === \"#\") {\n    color = color.substr(1)\n  }\n  if (color.length === 3) {\n    color = `${color[0]}${color[0]}${color[1]}${color[1]}${color[2]}${color[2]}`\n  }\n  return (parseInt(color, 16) + 0x000000) & 0xffffff\n}\n\nexport const number2Color = (number: number) => `#${`00000${number.toString(16)}`.slice(-6)}`\nexport const initHash = () => {\n  let count = 100\n\n  return function (hashLength: number) {\n    if (!hashLength || typeof Number(hashLength) !== \"number\") {\n      return\n    }\n    const ar = [\n      \"1\",\n      \"2\",\n      \"3\",\n      \"4\",\n      \"5\",\n      \"6\",\n      \"7\",\n      \"8\",\n      \"9\",\n      \"0\",\n      \"a\",\n      \"b\",\n      \"c\",\n      \"d\",\n      \"e\",\n      \"f\",\n      \"g\",\n      \"h\",\n      \"i\",\n      \"j\",\n      \"k\",\n      \"l\",\n      \"m\",\n      \"n\",\n      \"o\",\n      \"p\",\n      \"q\",\n      \"r\",\n      \"s\",\n      \"t\",\n      \"u\",\n      \"v\",\n      \"w\",\n      \"x\",\n      \"y\",\n      \"z\",\n    ]\n    const hs = []\n    const hl = Number(hashLength)\n    const al = ar.length\n    for (let i = 0; i < hl; i++) {\n      hs.push(ar[Math.floor(Math.random() * al)])\n    }\n    count++\n    return `${hs.join(\"\")}${count}`\n  }\n}\nexport const randomFontsize = (range: number) => {\n  const allSize = [16, 18, 25, 36, 45, 64]\n  const random = Math.floor(Math.random() * range)\n  return allSize[random]\n}\n\nconst dateFormatMap = {\n  yyyy: (d: Date) => d.getFullYear().toString(),\n  yy: (d: Date) => d.getFullYear().toString().slice(-2),\n  MM: (d: Date) => (d.getMonth() + 1).toString().padStart(2, \"0\"),\n  dd: (d: Date) => d.getDate().toString().padStart(2, \"0\"),\n  HH: (d: Date) => d.getHours().toString().padStart(2, \"0\"),\n  mm: (d: Date) => d.getMinutes().toString().padStart(2, \"0\"),\n  ss: (d: Date) => d.getSeconds().toString().padStart(2, \"0\"),\n}\n\n// date: 时间对象, pattern: 日期格式\nexport const dateFormat = (date: Date, format: string) => {\n  return format.replace(/yy|yyyy|MM|dd|HH|mm|ss/g, (match) =>\n    dateFormatMap[match as keyof typeof dateFormatMap]?.(date)\n  )\n}\n","export const classPrefix = \"mfuns-player\"\n\n/** 项目链接 */\nexport const repositoryLink = \"https://github.com/Mfuns-cn/mfunsPlayer/tree/v3-beta\"\n\n/** 开发者列表 */\nexport const developers = [\n  { name: \"Minteea\", id: \"Minteea\", link: \"https://github.com/Minteea\" },\n  { name: \"鲁迪钨丝\", id: \"Rudiusu\", link: \"https://github.com/Rudiusu\" },\n]\n","/**\n * @license\n * Copyright 2017 Google LLC\n * SPDX-License-Identifier: BSD-3-Clause\n */\nvar t;const i=window,s=i.trustedTypes,e=s?s.createPolicy(\"lit-html\",{createHTML:t=>t}):void 0,o=\"$lit$\",n=`lit$${(Math.random()+\"\").slice(9)}$`,l=\"?\"+n,h=`<${l}>`,r=document,u=()=>r.createComment(\"\"),d=t=>null===t||\"object\"!=typeof t&&\"function\"!=typeof t,c=Array.isArray,v=t=>c(t)||\"function\"==typeof(null==t?void 0:t[Symbol.iterator]),a=\"[ \\t\\n\\f\\r]\",f=/<(?:(!--|\\/[^a-zA-Z])|(\\/?[a-zA-Z][^>\\s]*)|(\\/?$))/g,_=/-->/g,m=/>/g,p=RegExp(`>|${a}(?:([^\\\\s\"'>=/]+)(${a}*=${a}*(?:[^ \\t\\n\\f\\r\"'\\`<>=]|(\"|')|))|$)`,\"g\"),g=/'/g,$=/\"/g,y=/^(?:script|style|textarea|title)$/i,w=t=>(i,...s)=>({_$litType$:t,strings:i,values:s}),x=w(1),b=w(2),T=Symbol.for(\"lit-noChange\"),A=Symbol.for(\"lit-nothing\"),E=new WeakMap,C=r.createTreeWalker(r,129,null,!1);function P(t,i){if(!Array.isArray(t)||!t.hasOwnProperty(\"raw\"))throw Error(\"invalid template strings array\");return void 0!==e?e.createHTML(i):i}const V=(t,i)=>{const s=t.length-1,e=[];let l,r=2===i?\"<svg>\":\"\",u=f;for(let i=0;i<s;i++){const s=t[i];let d,c,v=-1,a=0;for(;a<s.length&&(u.lastIndex=a,c=u.exec(s),null!==c);)a=u.lastIndex,u===f?\"!--\"===c[1]?u=_:void 0!==c[1]?u=m:void 0!==c[2]?(y.test(c[2])&&(l=RegExp(\"</\"+c[2],\"g\")),u=p):void 0!==c[3]&&(u=p):u===p?\">\"===c[0]?(u=null!=l?l:f,v=-1):void 0===c[1]?v=-2:(v=u.lastIndex-c[2].length,d=c[1],u=void 0===c[3]?p:'\"'===c[3]?$:g):u===$||u===g?u=p:u===_||u===m?u=f:(u=p,l=void 0);const w=u===p&&t[i+1].startsWith(\"/>\")?\" \":\"\";r+=u===f?s+h:v>=0?(e.push(d),s.slice(0,v)+o+s.slice(v)+n+w):s+n+(-2===v?(e.push(void 0),i):w)}return[P(t,r+(t[s]||\"<?>\")+(2===i?\"</svg>\":\"\")),e]};class N{constructor({strings:t,_$litType$:i},e){let h;this.parts=[];let r=0,d=0;const c=t.length-1,v=this.parts,[a,f]=V(t,i);if(this.el=N.createElement(a,e),C.currentNode=this.el.content,2===i){const t=this.el.content,i=t.firstChild;i.remove(),t.append(...i.childNodes)}for(;null!==(h=C.nextNode())&&v.length<c;){if(1===h.nodeType){if(h.hasAttributes()){const t=[];for(const i of h.getAttributeNames())if(i.endsWith(o)||i.startsWith(n)){const s=f[d++];if(t.push(i),void 0!==s){const t=h.getAttribute(s.toLowerCase()+o).split(n),i=/([.?@])?(.*)/.exec(s);v.push({type:1,index:r,name:i[2],strings:t,ctor:\".\"===i[1]?H:\"?\"===i[1]?L:\"@\"===i[1]?z:k})}else v.push({type:6,index:r})}for(const i of t)h.removeAttribute(i)}if(y.test(h.tagName)){const t=h.textContent.split(n),i=t.length-1;if(i>0){h.textContent=s?s.emptyScript:\"\";for(let s=0;s<i;s++)h.append(t[s],u()),C.nextNode(),v.push({type:2,index:++r});h.append(t[i],u())}}}else if(8===h.nodeType)if(h.data===l)v.push({type:2,index:r});else{let t=-1;for(;-1!==(t=h.data.indexOf(n,t+1));)v.push({type:7,index:r}),t+=n.length-1}r++}}static createElement(t,i){const s=r.createElement(\"template\");return s.innerHTML=t,s}}function S(t,i,s=t,e){var o,n,l,h;if(i===T)return i;let r=void 0!==e?null===(o=s._$Co)||void 0===o?void 0:o[e]:s._$Cl;const u=d(i)?void 0:i._$litDirective$;return(null==r?void 0:r.constructor)!==u&&(null===(n=null==r?void 0:r._$AO)||void 0===n||n.call(r,!1),void 0===u?r=void 0:(r=new u(t),r._$AT(t,s,e)),void 0!==e?(null!==(l=(h=s)._$Co)&&void 0!==l?l:h._$Co=[])[e]=r:s._$Cl=r),void 0!==r&&(i=S(t,r._$AS(t,i.values),r,e)),i}class M{constructor(t,i){this._$AV=[],this._$AN=void 0,this._$AD=t,this._$AM=i}get parentNode(){return this._$AM.parentNode}get _$AU(){return this._$AM._$AU}u(t){var i;const{el:{content:s},parts:e}=this._$AD,o=(null!==(i=null==t?void 0:t.creationScope)&&void 0!==i?i:r).importNode(s,!0);C.currentNode=o;let n=C.nextNode(),l=0,h=0,u=e[0];for(;void 0!==u;){if(l===u.index){let i;2===u.type?i=new R(n,n.nextSibling,this,t):1===u.type?i=new u.ctor(n,u.name,u.strings,this,t):6===u.type&&(i=new Z(n,this,t)),this._$AV.push(i),u=e[++h]}l!==(null==u?void 0:u.index)&&(n=C.nextNode(),l++)}return C.currentNode=r,o}v(t){let i=0;for(const s of this._$AV)void 0!==s&&(void 0!==s.strings?(s._$AI(t,s,i),i+=s.strings.length-2):s._$AI(t[i])),i++}}class R{constructor(t,i,s,e){var o;this.type=2,this._$AH=A,this._$AN=void 0,this._$AA=t,this._$AB=i,this._$AM=s,this.options=e,this._$Cp=null===(o=null==e?void 0:e.isConnected)||void 0===o||o}get _$AU(){var t,i;return null!==(i=null===(t=this._$AM)||void 0===t?void 0:t._$AU)&&void 0!==i?i:this._$Cp}get parentNode(){let t=this._$AA.parentNode;const i=this._$AM;return void 0!==i&&11===(null==t?void 0:t.nodeType)&&(t=i.parentNode),t}get startNode(){return this._$AA}get endNode(){return this._$AB}_$AI(t,i=this){t=S(this,t,i),d(t)?t===A||null==t||\"\"===t?(this._$AH!==A&&this._$AR(),this._$AH=A):t!==this._$AH&&t!==T&&this._(t):void 0!==t._$litType$?this.g(t):void 0!==t.nodeType?this.$(t):v(t)?this.T(t):this._(t)}k(t){return this._$AA.parentNode.insertBefore(t,this._$AB)}$(t){this._$AH!==t&&(this._$AR(),this._$AH=this.k(t))}_(t){this._$AH!==A&&d(this._$AH)?this._$AA.nextSibling.data=t:this.$(r.createTextNode(t)),this._$AH=t}g(t){var i;const{values:s,_$litType$:e}=t,o=\"number\"==typeof e?this._$AC(t):(void 0===e.el&&(e.el=N.createElement(P(e.h,e.h[0]),this.options)),e);if((null===(i=this._$AH)||void 0===i?void 0:i._$AD)===o)this._$AH.v(s);else{const t=new M(o,this),i=t.u(this.options);t.v(s),this.$(i),this._$AH=t}}_$AC(t){let i=E.get(t.strings);return void 0===i&&E.set(t.strings,i=new N(t)),i}T(t){c(this._$AH)||(this._$AH=[],this._$AR());const i=this._$AH;let s,e=0;for(const o of t)e===i.length?i.push(s=new R(this.k(u()),this.k(u()),this,this.options)):s=i[e],s._$AI(o),e++;e<i.length&&(this._$AR(s&&s._$AB.nextSibling,e),i.length=e)}_$AR(t=this._$AA.nextSibling,i){var s;for(null===(s=this._$AP)||void 0===s||s.call(this,!1,!0,i);t&&t!==this._$AB;){const i=t.nextSibling;t.remove(),t=i}}setConnected(t){var i;void 0===this._$AM&&(this._$Cp=t,null===(i=this._$AP)||void 0===i||i.call(this,t))}}class k{constructor(t,i,s,e,o){this.type=1,this._$AH=A,this._$AN=void 0,this.element=t,this.name=i,this._$AM=e,this.options=o,s.length>2||\"\"!==s[0]||\"\"!==s[1]?(this._$AH=Array(s.length-1).fill(new String),this.strings=s):this._$AH=A}get tagName(){return this.element.tagName}get _$AU(){return this._$AM._$AU}_$AI(t,i=this,s,e){const o=this.strings;let n=!1;if(void 0===o)t=S(this,t,i,0),n=!d(t)||t!==this._$AH&&t!==T,n&&(this._$AH=t);else{const e=t;let l,h;for(t=o[0],l=0;l<o.length-1;l++)h=S(this,e[s+l],i,l),h===T&&(h=this._$AH[l]),n||(n=!d(h)||h!==this._$AH[l]),h===A?t=A:t!==A&&(t+=(null!=h?h:\"\")+o[l+1]),this._$AH[l]=h}n&&!e&&this.j(t)}j(t){t===A?this.element.removeAttribute(this.name):this.element.setAttribute(this.name,null!=t?t:\"\")}}class H extends k{constructor(){super(...arguments),this.type=3}j(t){this.element[this.name]=t===A?void 0:t}}const I=s?s.emptyScript:\"\";class L extends k{constructor(){super(...arguments),this.type=4}j(t){t&&t!==A?this.element.setAttribute(this.name,I):this.element.removeAttribute(this.name)}}class z extends k{constructor(t,i,s,e,o){super(t,i,s,e,o),this.type=5}_$AI(t,i=this){var s;if((t=null!==(s=S(this,t,i,0))&&void 0!==s?s:A)===T)return;const e=this._$AH,o=t===A&&e!==A||t.capture!==e.capture||t.once!==e.once||t.passive!==e.passive,n=t!==A&&(e===A||o);o&&this.element.removeEventListener(this.name,this,e),n&&this.element.addEventListener(this.name,this,t),this._$AH=t}handleEvent(t){var i,s;\"function\"==typeof this._$AH?this._$AH.call(null!==(s=null===(i=this.options)||void 0===i?void 0:i.host)&&void 0!==s?s:this.element,t):this._$AH.handleEvent(t)}}class Z{constructor(t,i,s){this.element=t,this.type=6,this._$AN=void 0,this._$AM=i,this.options=s}get _$AU(){return this._$AM._$AU}_$AI(t){S(this,t)}}const j={O:o,P:n,A:l,C:1,M:V,L:M,R:v,D:S,I:R,V:k,H:L,N:z,U:H,F:Z},B=i.litHtmlPolyfillSupport;null==B||B(N,R),(null!==(t=i.litHtmlVersions)&&void 0!==t?t:i.litHtmlVersions=[]).push(\"2.8.0\");const D=(t,i,s)=>{var e,o;const n=null!==(e=null==s?void 0:s.renderBefore)&&void 0!==e?e:i;let l=n._$litPart$;if(void 0===l){const t=null!==(o=null==s?void 0:s.renderBefore)&&void 0!==o?o:null;n._$litPart$=l=new R(i.insertBefore(u(),t),t,void 0,null!=s?s:{})}return l._$AI(t),l};export{j as _$LH,x as html,T as noChange,A as nothing,D as render,b as svg};\n//# sourceMappingURL=lit-html.js.map\n","/** 虚拟列表 */\n\nexport class VirtualList<T> {\n  /** 需要绑定的DOM对象 */\n  el: HTMLElement\n  $content: HTMLElement\n  /** 列表数据 */\n  data: T[] = []\n  /** 拉取列表数据 () => Object */\n  getData: () => T[]\n  /** 列表项高度 */\n  itemHeight: number\n  /** 列表项DOM生成函数 */\n  createItem: (item: T, i: number, array: T[]) => HTMLElement\n  /** 溢出范围 */\n  overflow: number\n\n  /** 列表渲染起点 */\n  renderStart = -1\n  /** 列表渲染终点 */\n  renderEnd = -1\n  /** 可视范围起点 */\n  viewStart = 0\n  /** 可视范围终点 */\n  viewEnd = 0\n  /** 节流开关 */\n  throttle = false\n  /** 已清空状态 */\n  cleared = false\n  constructor({\n    el,\n    getData,\n    itemHeight,\n    createItem,\n    overflow = 0,\n  }: {\n    el: HTMLElement\n    getData: () => T[]\n    itemHeight: number\n    createItem: (item: T, i: number, array: T[]) => HTMLElement\n    overflow?: number\n  }) {\n    this.el = el\n    this.getData = getData\n    this.itemHeight = itemHeight\n    this.createItem = createItem\n    this.overflow = overflow\n\n    this.renderStart = -1\n    this.renderEnd = -1\n    this.viewStart = 0\n    this.viewEnd = 0\n    this.throttle = false\n    this.cleared = false\n\n    this.el.classList.add(\"vlist-container\")\n    this.$content = document.createElement(\"div\")\n    this.$content.classList.add(\"vlist-content\")\n    this.el.appendChild(this.$content)\n\n    this.el.addEventListener(\"scroll\", () => {\n      this.cleared || this.handleScroll()\n    })\n\n    this.reload()\n  }\n  /** 重载列表 */\n  reload() {\n    this.clear()\n    this.data = this.getData()\n    console.log(this.data)\n    this.renderStart = -1\n    this.renderEnd = -1\n    this.viewStart = 0\n    this.viewEnd = 0\n    this.throttle = false\n    this.handleScroll()\n    this.cleared = false\n  }\n  /** 更新列表 */\n  update() {\n    this.data = this.getData()\n    this.handleScroll()\n  }\n  handleScroll() {\n    if (!this.throttle) {\n      const clientH = this.el.clientHeight\n      const scrollTop = this.el.scrollTop\n      this.viewStart = this.getViewStart(scrollTop)\n      this.viewEnd = this.getViewEnd(scrollTop, clientH)\n      if (this.viewStart <= this.renderStart || this.viewEnd >= this.renderEnd) {\n        this.render(clientH, scrollTop)\n        // console.log(`${this.renderStart} - ${this.renderEnd}`)\n      }\n      // console.log(`${scrollTop} + ${clientH} @ ${this.viewStart} - ${this.viewEnd} # ${this.renderStart} - ${this.renderEnd}`)\n    } else {\n      // console.log(\"none\")\n    }\n  }\n  render(clientH: number, scrollTop: number) {\n    // 保存原渲染范围\n    const oldRenderStart = this.renderStart\n    const oldRenderEnd = this.renderEnd\n    // 获取新渲染范围\n    this.renderStart = this.getViewStart(scrollTop) - this.overflow\n    this.renderEnd = this.getViewEnd(scrollTop, clientH) + this.overflow\n    // console.log(`old ${oldRenderStart}-${oldRenderEnd} new ${this.renderStart}-${this.renderEnd}`)\n    // 与列表前段比较\n    if (this.renderStart < oldRenderStart) {\n      // 列表前段范围扩张, 添加新列表项\n      const beforeItems = document.createDocumentFragment()\n      const addFrom = Math.max(this.renderStart, 0)\n      const addTo = Math.min(oldRenderStart - 1, this.renderEnd, this.data.length - 1)\n      // console.log(`add ${addFrom}-${addTo}`)\n      for (let i = addFrom; i <= addTo; i++) {\n        beforeItems.appendChild(this.createItem(this.data[i], i, this.data))\n        // console.log(\"add: \" + i)\n      }\n      this.$content.insertBefore(beforeItems, this.$content.firstElementChild)\n    } else {\n      // 若不扩张, 则删除多余的列表项\n      const removeFrom = Math.max(oldRenderStart, 0)\n      const removeTo = Math.min(this.renderStart - 1, oldRenderEnd)\n      // console.log(`remove ${removeFrom}-${removeTo}`)\n      for (let i = removeFrom; i <= removeTo; i++) {\n        const child = this.$content.firstElementChild\n        child && this.$content.removeChild(child)\n      }\n    }\n\n    // 与列表后段比较\n    if (this.renderEnd > oldRenderEnd) {\n      // 列表后段范围扩张, 添加新列表项\n      const afterItems = document.createDocumentFragment()\n      const addFrom = Math.max(oldRenderEnd + 1, this.renderStart)\n      const addTo = Math.min(this.renderEnd, this.data.length - 1)\n      // console.log(`add ${addFrom}-${addTo}`)\n      for (let i = addFrom; i <= addTo; i++) {\n        afterItems.appendChild(this.createItem(this.data[i], i, this.data))\n        // console.log(\"add: \" + i)\n      }\n      this.$content.appendChild(afterItems)\n    } else {\n      // 若不扩张, 则删除多余的列表项\n      const removeFrom = Math.min(oldRenderEnd, this.data.length - 1)\n      const removeTo = Math.max(this.renderEnd + 1, oldRenderStart)\n      // console.log(`remove ${removeFrom}-${removeTo}`)\n      for (let i = removeFrom; i >= removeTo; i--) {\n        const child = this.$content.lastElementChild\n        child && this.$content.removeChild(child)\n        // console.log(\"remove: \" + i)\n      }\n    }\n\n    // 设定占位边距\n    this.$content.style.paddingTop = `${\n      this.renderStart > 0 ? this.renderStart * this.itemHeight : 0\n    }px`\n    this.$content.style.paddingBottom = `${\n      this.renderEnd < this.data.length - 1\n        ? (this.data.length - this.renderEnd - 1) * this.itemHeight\n        : 0\n    }px`\n  }\n  getViewStart(scrollTop: number) {\n    return Math.floor(scrollTop / this.itemHeight)\n  }\n  getViewEnd(scrollTop: number, clientH: number) {\n    return Math.ceil((scrollTop + clientH) / this.itemHeight) - 1\n  }\n  // 清空列表\n  clear() {\n    this.data = []\n    this.$content.innerHTML = \"\"\n    this.$content.style.paddingTop = \"0px\"\n    this.$content.style.paddingBottom = \"0px\"\n    this.cleared = true\n  }\n  locateStart(n: number) {\n    // 定位到某项开头\n    this.el.scrollTo({\n      top: n * this.itemHeight,\n      behavior: \"auto\",\n    })\n  }\n  locateEnd(n: number) {\n    // 定位到某项末尾\n    this.el.scrollTo({\n      top: n * this.itemHeight - this.el.clientHeight,\n      behavior: \"auto\",\n    })\n  }\n}\n","import { secondToTime } from \"@/utils\"\nimport { dateFormat } from \"@/utils/index\"\nimport { DanmakuItem } from \"@/types\"\nimport MfunsPlayer from \"@/player\"\nimport { classPrefix } from \"@/const\"\nimport { html, render } from \"lit-html\"\nimport { VirtualList } from \"./VirtualList\"\n\nconst template = (sort: { time: () => void; content: () => void; date: () => void }) => html`\n  <div class=\"${classPrefix}-side-panel ${classPrefix}-danmaku-list\">\n    <div class=\"${classPrefix}-danmaku-list-main\">\n      <div class=\"${classPrefix}-danmaku-list-head\">\n        <div class=\"list-column col-time\" @click=${sort.time}>时间</div>\n        <div class=\"list-column col-content\" @click=${sort.content}>弹幕内容</div>\n        <div class=\"list-column col-date\" @click=${sort.date}>发送时间</div>\n      </div>\n      <div class=\"${classPrefix}-danmaku-list-container\">\n        <div class=\"${classPrefix}-danmaku-list-list\"></div>\n      </div>\n      <div class=\"${classPrefix}-danmaku-list-status\">\n        <div class=\"status-loading-text\">弹幕列表装填中……</div>\n        <div class=\"status-failed-text\">弹幕加载失败 X_X</div>\n        <div class=\"status-empty-text\">还没有弹幕哦，快来发弹幕^_^</div>\n      </div>\n    </div>\n    <div class=\"${classPrefix}-danmaku-auxiliary-foot\"></div>\n  </div>\n`\n\nconst getDanmakuListItem = (\n  danmaku: DanmakuItem,\n  index: number,\n  operation: (dm: DanmakuItem) => [string, (dm: DanmakuItem) => void, unknown][]\n) => {\n  const t = html`\n    <div class=\"list-row\" data-index=\"${index}\" data-mode=\"${danmaku.mode}\">\n      <div class=\"list-cell col-time\">${secondToTime(danmaku.time)}</div>\n      <div class=\"list-cell col-content\">${danmaku.content}</div>\n      <div class=\"list-cell col-date\">\n        ${danmaku.date ? dateFormat(new Date(danmaku.date * 1000), \"yy-MM-dd HH:mm\") : \"-\"}\n      </div>\n      ${operation.length\n        ? html` <div class=\"list-operate\">\n            ${operation(danmaku).map(\n              ([label, onClick]) => html`<div\n                class=\"list-operate-btn\"\n                @click=${() => {\n                  onClick(danmaku)\n                }}\n              >\n                ${label}\n              </div>`\n            )}\n          </div>`\n        : \"\"}\n    </div>\n  `\n  const fragment = new DocumentFragment()\n  render(t, fragment)\n  return fragment.firstElementChild! as HTMLElement\n}\n\nexport default class DanmakuList {\n  player: MfunsPlayer\n  el: HTMLElement\n  data: DanmakuItem[] = []\n  sortedBy: keyof DanmakuItem = \"time\"\n  sortOrder = 1 | -1\n\n  list!: VirtualList<DanmakuItem>\n  /** 是否随播放自动滚动 */\n  autoScroll = true\n  /** 是否挂载到播放器外部 */\n  mounted = false\n\n  $container: HTMLElement\n  $status: HTMLElement\n  $colTime: HTMLElement\n  $colDate: HTMLElement\n  $colContent: HTMLElement\n\n  constructor(player: MfunsPlayer) {\n    this.player = player\n    const fragment = new DocumentFragment()\n    render(template({ time: () => {}, content: () => {}, date: () => {} }), fragment)\n    this.el = fragment.querySelector(`.${classPrefix}-danmaku-list`)!\n    this.$container = fragment.querySelector(`.${classPrefix}-danmaku-list-container`)!\n    this.$status = fragment.querySelector(`.${classPrefix}-danmaku-list-status`)!\n    this.$colTime = fragment.querySelector(\".col-time\")!\n    this.$colDate = fragment.querySelector(\".col-date\")!\n    this.$colContent = fragment.querySelector(\".col-content\")!\n\n    this.$colTime.onclick = () => {\n      this.setAutoScroll(false)\n      if (this.sortedBy == \"time\") {\n        this.sort(\"time\", -this.sortOrder)\n      } else {\n        this.sort(\"time\", 1)\n      }\n    }\n    this.$colDate.onclick = () => {\n      this.setAutoScroll(false)\n      if (this.sortedBy == \"date\") {\n        this.sort(\"date\", -this.sortOrder)\n      } else {\n        this.sort(\"date\", 1)\n      }\n    }\n  }\n  init() {\n    const api = this.player.danmaku.api\n    const operate = this.player.danmaku.operate\n    this.list = new VirtualList({\n      el: this.$container,\n      getData: () => {\n        return this.data\n      },\n      itemHeight: 24,\n      createItem: (danmaku, i) =>\n        getDanmakuListItem(danmaku, i, (dm) => {\n          const myDanmaku = dm.user == this.player.userId\n          return [\n            [\n              \"举报\",\n              (dm: DanmakuItem) => {\n                operate.report(dm)\n              },\n              !myDanmaku && api?.report,\n            ],\n            [\n              \"屏蔽\",\n              (dm: DanmakuItem) => {\n                operate.blockUser(dm.user, true)\n              },\n              !myDanmaku && api?.blockUser,\n            ],\n            [\n              \"撤回\",\n              (dm: DanmakuItem) => {\n                operate.recall(dm)\n              },\n              myDanmaku && api?.recall,\n            ],\n          ].filter((v) => v[2]) as [string, (dm: DanmakuItem) => void, unknown][]\n        }),\n      overflow: 5,\n    })\n\n    this.list.el.addEventListener(\"wheel\", () => {\n      this.setAutoScroll(false)\n    })\n    this.list.el.addEventListener(\"mousedown\", () => {\n      this.setAutoScroll(false)\n    })\n    this.setAutoScroll(this.autoScroll)\n\n    // 切换到新分P时，清空上一P弹幕\n    this.player.on(\"part\", () => {\n      this.clear()\n    })\n    this.player.on(\"danmaku:load_end\", (dan) => {\n      this.fill(dan)\n    })\n    this.player.on(\"danmaku:load_addition_end\", (url, dan) => {\n      this.fill(dan)\n    })\n    this.player.on(\"timeupdate\", (time) => {\n      if (this.autoScroll) {\n        this.locateByTime(time)\n      }\n    })\n  }\n  /** 弹幕列表排序 */\n  sort(sortedBy: keyof DanmakuItem, sortOrder = 1) {\n    this.sortedBy = sortedBy\n    this.sortOrder = sortOrder\n    this.data.sort((a: any, b: any) => {\n      const at = a[this.sortedBy]\n      const bt = b[this.sortedBy]\n      // 排序\n      return at > bt ? sortOrder : at == bt ? 0 : -sortOrder\n    })\n    this.list.reload()\n  }\n  /** 装填弹幕(重载列表) */\n  fill(dan: DanmakuItem[]) {\n    this.data = this.data.concat(dan)\n    // 弹幕列表装填\n    if (!this.data.length) {\n      this.setStatus(\"empty\")\n    } else {\n      this.reload()\n      this.setStatus()\n    }\n  }\n  /** 添加弹幕(不重载列表) */\n  add(dan: DanmakuItem[]) {\n    this.data = this.data.concat(dan)\n    // 弹幕列表装填\n    if (!this.data.length) {\n      this.setStatus(\"empty\")\n    } else {\n      this.list.update()\n      this.setStatus()\n    }\n  }\n  /** 重载弹幕列表 */\n  reload() {\n    this.sort(this.sortedBy, this.sortOrder)\n    if (this.autoScroll) {\n      this.locateByTime(this.player.time)\n    }\n  }\n  clear() {\n    // 清空弹幕列表\n    this.list.clear()\n    this.data = []\n    this.setStatus(\"loading\")\n  }\n  setStatus(status = \"\") {\n    this.$status.dataset.status = status\n    console.log(\"弹幕加载状态\" + status)\n  }\n  /** 根据播放时间定位 */\n  locateByTime(time: number) {\n    let viewEnd = this.list.viewEnd\n    if (this.data[viewEnd]?.time > time) {\n      // 如果列表可视区域最后一项的时间超过当前时间, 则重头开始遍历, 否则从列表可视区域最后一项遍历\n      viewEnd = 0\n    }\n    while (this.data[viewEnd + 1]?.time <= time) {\n      // 遍历并检测下一项弹幕时间是否超过当前时间, 若超过, 则以当前弹幕为定位点\n      viewEnd++\n    }\n    this.list.locateEnd(viewEnd)\n  }\n  setAutoScroll(flag: boolean) {\n    // 设置自动滚动\n    this.autoScroll = flag\n    if (flag) {\n      this.sort(\"time\")\n      this.locateByTime(this.player.time)\n    }\n  }\n}\n","/* eslint-disable @typescript-eslint/no-unused-vars */\nimport { EmptyObject, PlayerPlugin } from \"@/types\"\nimport DanmakuList from \"./DanmakuList\"\n\nconst id = \"danmakuList\"\n\nconst plugin = (): PlayerPlugin<typeof id, EmptyObject, { el: HTMLElement }> => {\n  let danmakuList: DanmakuList\n  return {\n    id,\n    create: (player, options) => {\n      danmakuList = new DanmakuList(player)\n      return {\n        el: danmakuList.el,\n      }\n    },\n    init: (player, options) => {\n      danmakuList.init()\n    },\n    destroy: (player) => {},\n  }\n}\n\nexport default plugin\n"],"names":["secondToTime","second","showHour","add0","num","hour","min","sec","dateFormatMap","d","dateFormat","date","format","match","_a","classPrefix","t","i","s","e","o","n","l","h","r","u","c","v","a","f","_","m","p","g","$","y","w","x","T","A","E","C","P","V","N","H","L","z","k","S","M","R","Z","I","B","D","VirtualList","el","getData","itemHeight","createItem","overflow","clientH","scrollTop","oldRenderStart","oldRenderEnd","beforeItems","addFrom","addTo","removeFrom","removeTo","child","afterItems","template","sort","html","getDanmakuListItem","danmaku","index","operation","label","onClick","fragment","render","DanmakuList","player","api","operate","dm","myDanmaku","dan","url","time","sortedBy","sortOrder","b","at","bt","status","_b","viewEnd","flag","id","plugin","danmakuList","options"],"mappings":"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","x_google_ignoreList":[2]}