{"version":3,"file":"video-page-player.umd.js","sources":["../src/core/utils/index.ts","../src/core/config.ts","../src/core/module/videoController.ts","../src/core/module/pluginManager.ts","../src/core/module/hookManager.ts","../src/core/module/loaderManager.ts","../src/core/module/eventEmitter.ts","../src/core/player.ts","../src/core/plugin.ts","../node_modules/lit-html/lit-html.js","../src/core/components/Slider.ts","../src/core/components/SliderVertical.ts","../src/core/components/Picker.ts","../src/core/components/MultiPicker.ts","../src/core/components/Switch.ts","../src/core/components/Checkbox.ts","../player/core-player.ts","../mfuns-plugin/danmakuList/VirtualList.ts","../mfuns-plugin/danmakuList/index.ts","../src/plugins/enhance/video/blackBorder.ts","../src/plugins/screen/widescreen.ts","../src/plugins/controls/button/ButtonPlay.ts","../src/plugins/controls/button/ButtonPrev.ts","../src/plugins/controls/button/ButtonNext.ts","../src/plugins/controls/videoTime.ts","../src/plugins/controls/button/ButtonLoop.ts","../src/plugins/controls/button/ButtonPart.ts","../src/plugins/controls/button/ButtonVolume.ts","../src/plugins/controls/button/ButtonSettings.ts","../src/plugins/controls/button/ButtonPip.ts","../src/plugins/controls/button/ButtonWidescreen.ts","../src/plugins/controls/button/ButtonWebscreen.ts","../src/plugins/controls/button/ButtonFullscreen.ts","../src/plugins/panels/about/index.ts","../src/plugins/panels/hotkeyInfo/index.ts","../src/plugins/ui/contextMenu.ts","../src/plugins/ui/controller.ts","../src/core/utils/KeyCode.enum.ts","../src/plugins/hotkey.ts","../src/plugins/ui/modal.ts","../src/plugins/controls/progress.ts","../src/plugins/settings.ts","../src/plugins/ui/side.ts","../src/plugins/screen/pip.ts","../src/plugins/screen/fullscreen.ts","../src/plugins/videoOptions/user.ts","../src/plugins/state/stateActive.ts","../src/plugins/state/stateFocus.ts","../node_modules/@juggle/resize-observer/lib/utils/resizeObservers.js","../node_modules/@juggle/resize-observer/lib/algorithms/hasActiveObservations.js","../node_modules/@juggle/resize-observer/lib/algorithms/hasSkippedObservations.js","../node_modules/@juggle/resize-observer/lib/algorithms/deliverResizeLoopError.js","../node_modules/@juggle/resize-observer/lib/ResizeObserverBoxOptions.js","../node_modules/@juggle/resize-observer/lib/utils/freeze.js","../node_modules/@juggle/resize-observer/lib/ResizeObserverSize.js","../node_modules/@juggle/resize-observer/lib/DOMRectReadOnly.js","../node_modules/@juggle/resize-observer/lib/utils/element.js","../node_modules/@juggle/resize-observer/lib/utils/global.js","../node_modules/@juggle/resize-observer/lib/algorithms/calculateBoxSize.js","../node_modules/@juggle/resize-observer/lib/ResizeObserverEntry.js","../node_modules/@juggle/resize-observer/lib/algorithms/calculateDepthForNode.js","../node_modules/@juggle/resize-observer/lib/algorithms/broadcastActiveObservations.js","../node_modules/@juggle/resize-observer/lib/algorithms/gatherActiveObservationsAtDepth.js","../node_modules/@juggle/resize-observer/lib/utils/process.js","../node_modules/@juggle/resize-observer/lib/utils/queueMicroTask.js","../node_modules/@juggle/resize-observer/lib/utils/queueResizeObserver.js","../node_modules/@juggle/resize-observer/lib/utils/scheduler.js","../node_modules/@juggle/resize-observer/lib/ResizeObservation.js","../node_modules/@juggle/resize-observer/lib/ResizeObserverDetail.js","../node_modules/@juggle/resize-observer/lib/ResizeObserverController.js","../node_modules/@juggle/resize-observer/lib/ResizeObserver.js","../src/plugins/state/stateResize.ts","../src/plugins/state/stateIntersecting.ts","../src/plugins/ui/toast.ts","../src/plugins/presets/basic.ts","../src/plugins/enhance/playback/autoPart.ts","../src/plugins/enhance/playback/autoPlay.ts","../src/plugins/enhance/playback/autoSeek.ts","../src/plugins/theme.ts","../src/plugins/videoOptions/part.ts","../src/plugins/patch/seamless.ts","../src/plugins/panels/partList/index.ts","../src/plugins/controls/button/ButtonDanmakulist.ts","../src/plugins/quality.ts","../src/plugins/controls/button/ButtonQuality.ts","../src/plugins/enhance/ui/videoStatus.ts","../src/plugins/enhance/ui/loadingMask.ts","../src/plugins/controls/videoTitle.ts","../src/plugins/ui/header.ts","../src/plugins/enhance/ui/mini.ts","../src/plugins/enhance/ui/lightOff.ts","../src/plugins/screen/webscreen.ts","../src/plugins/danmaku/danmaku.ts","../src/plugins/danmaku/types.ts","../src/plugins/danmaku/danmakuEngine/MeonDanmakuEngine.ts","../src/plugins/danmaku/danmakuEngine/index.ts","../src/core/utils/randomId.ts","../src/plugins/danmaku/danmakuLoader.ts","../src/plugins/danmaku/danmakuOperate.ts","../src/plugins/danmaku/controls/ButtonDanmakuToggle.ts","../src/plugins/danmaku/danmakuBar.ts","../src/plugins/danmaku/controls/ButtonDanmakuSettings.ts","../src/plugins/danmaku/danmakuMenu.ts","../src/plugins/danmaku/controls/ButtonDanmakuStyle.ts","../src/plugins/presets/danmaku.ts","../src/plugins/videoOptions/qualities.ts","../src/plugins/videoLoader/hlsLoader.ts","../src/plugins/videoLoader/dashLoader.ts","../src/plugins/videoLoader/flvLoader.ts","../src/plugins/enhance/video/aspectRatio.ts","../src/plugins/ui/footbar.ts","../player/video-page-player.ts"],"sourcesContent":["export const isMobile = /mobile/i.test(window.navigator.userAgent);\n\n/** 是否支持全屏 */\nexport const fullScreenEnabled =\n  document.fullscreenEnabled ||\n  (document as any).webkitFullscreenEnabled ||\n  (document as any).mozFullScreenEnabled ||\n  (document as any).msFullscreenEnabled ||\n  false;\n\n/** 是否支持画中画 */\nexport const pictureInPictureEnabled = document.pictureInPictureEnabled || false;\n\n/**\n * 创建元素\n * @param tagName 元素标签名\n * @param attributes 元素属性\n * @param children 子元素/HTML字符串\n */\nexport function createElement<T extends keyof HTMLElementTagNameMap>(\n  tagName: T,\n  attributes?: Record<string, string>,\n  children?: Node | string\n) {\n  const el = document.createElement(tagName);\n  if (attributes) {\n    for (const name in attributes) {\n      el.setAttribute(name, attributes[name]);\n    }\n  }\n  if (typeof children == \"string\") {\n    el.innerHTML = children;\n  } else if (children instanceof Node) {\n    el.appendChild(children);\n  }\n  return el;\n}\n\n/**\n * 替换子元素\n * @param element 父元素\n * @param children 要替换的子节点或HTML字符串\n */\nexport function replaceChildren(element: HTMLElement, children: Node | string) {\n  if (typeof children == \"string\") {\n    element.innerHTML = children;\n  } else {\n    element.innerHTML = \"\";\n    element.appendChild(children);\n  }\n}\n/**\n * 防抖\n * @param fn 需要防抖处理的函数\n * @param delay 防抖延迟执行时间\n * @param immediate 是否立即执行一次\n */\nexport const debounce = (\n  fn: (...args: unknown[]) => void,\n  delay: number,\n  immediate: boolean = false\n) => {\n  let timer: ReturnType<typeof setTimeout> | null = null;\n  let isInvoke = false;\n  const f = function (this: unknown, ...args: unknown[]) {\n    if (timer) clearTimeout(timer);\n    if (immediate && !isInvoke) {\n      fn.apply(this, args);\n      isInvoke = true;\n    } else {\n      timer = setTimeout(() => {\n        fn.apply(this, args);\n        clearTimeout(timer!);\n        timer = null;\n        isInvoke = false;\n      }, delay);\n    }\n  };\n  /*   f.clear = () => {\n    if (timer) clearTimeout(timer);\n  }; */\n  return f;\n};\n\n/**\n * 节流\n * @param fn 需要节流处理的函数\n * @param wait 执行一次后需要等待的时间\n */\nexport const throttle = (fn: (...args: unknown[]) => void, wait: number) => {\n  let timer: ReturnType<typeof setTimeout> | null = null;\n  return function (this: unknown, ...args: unknown[]) {\n    if (!timer) {\n      timer = setTimeout(() => {\n        fn.apply(this, args);\n        clearTimeout(timer!);\n        timer = null;\n      }, wait);\n    }\n  };\n};\n\n/** 生成一个范围内的随机数\n * @param lower 最小值\n * @param upper 最大值\n * @returns 生成的随机数\n */\nexport function random(lower: number, upper: number): number {\n  return lower + Math.random() * (upper - lower);\n}\n\n/** 钳制数值\n * @param number 传入数值\n * @param lower 最小值\n * @param upper 最大值\n * @returns 钳制后的数值\n */\nexport function clamp(number: number, lower: number, upper: number): number {\n  return number > lower ? (number < upper ? number : upper) : lower;\n}\n\n/**\n * 将时间文本转换为秒数\n *\n * @param time 冒号分隔的时间文本\n * @return 秒数\n */\nexport function timeToSecond(time: string): number {\n  const arr = time.split(\":\").slice(-3);\n  const sec = parseInt(arr[arr.length - 1]) || 0;\n  const min = parseInt(arr[arr.length - 2]) || 0;\n  const hour = parseInt(arr[arr.length - 3]) || 0;\n  const day = parseInt(arr[arr.length - 4]) || 0;\n  return sec + min * 60 + hour * 3600 + day * 86400;\n}\n\n/**\n * 将秒数转换为时间文本\n *\n * @param second 秒数\n * @param level 转换等级(二进制位属性，表示可转换的时间格式，4-天时分秒，3-时分秒，2-分秒, 1-秒)\n * @return 时间文本\n */\nexport function secondToTime(second: number, level: number = 0b0110): string {\n  second = Number.isFinite(second) ? Math.floor(second) : 0;\n  if (!(level & 0b1111)) return second.toString();\n  const join = (...args: number[]) =>\n    args.map((num) => (num < 10 ? `0${num}` : `${num}`)).join(\":\");\n  let minute: number, hour: number, day: number;\n  if (level & 0b0001 && second < 60) {\n    return second.toString();\n  }\n  minute = Math.floor(second / 60);\n  second = second % 60;\n  if (level & 0b0010 && minute < 60) {\n    return join(minute, second);\n  }\n  hour = Math.floor(minute / 60);\n  minute = minute % 60;\n  if (level & 0b0100 && hour < 24) {\n    return join(hour, minute, second);\n  }\n  day = Math.floor(hour / 60);\n  hour = hour % 24;\n  return join(day, hour, minute, second);\n}\n\n/** 十六进制颜色转数字\n * @param color 颜色字符串，可以省略#符号\n * @return 数值\n */\nexport function HexColorToNumber(color: string): number {\n  if (color[0] === \"#\") {\n    color = color.substring(1);\n  }\n  if (color.length === 3) {\n    color = `${color[0]}${color[0]}${color[1]}${color[1]}${color[2]}${color[2]}`;\n  }\n  return (parseInt(color, 16) + 0x000000) & 0xffffff;\n}\n\n/**\n * 数字转十六进制颜色\n * @param number 传入的数字\n * @return 十六进制颜色\n */\nexport function numberToHexColor(number: number): string {\n  return `#${`00000${number.toString(16)}`.slice(-6)}`;\n}\n\nconst dateFormatMap = {\n  yyyy: (d: Date) => d.getFullYear().toString(),\n  yy: (d: Date) => d.getFullYear().toString().slice(-2),\n  MM: (d: Date) => (d.getMonth() + 1).toString().padStart(2, \"0\"),\n  dd: (d: Date) => d.getDate().toString().padStart(2, \"0\"),\n  HH: (d: Date) => d.getHours().toString().padStart(2, \"0\"),\n  mm: (d: Date) => d.getMinutes().toString().padStart(2, \"0\"),\n  ss: (d: Date) => d.getSeconds().toString().padStart(2, \"0\"),\n};\n\n/**\n * 格式化时间\n * @param date 时间对象\n * @param format 日期格式\n * @return 格式化后的字符串\n */\nexport function dateFormat(date: Date, format: string): string {\n  return format.replace(/yyyy|yy|MM|dd|HH|mm|ss/g, (match) =>\n    dateFormatMap[match as keyof typeof dateFormatMap]?.(date)\n  );\n}\n","export const classPrefix = \"mfuns-player\";\r\n\r\nexport const version = __MFUNSPLAYER_VERSION__;\r\nexport const gitHash = __MFUNSPLAYER_GIT_HASH__;\r\n\r\n/** 项目链接 */\r\nexport const repositoryLink = \"https://github.com/Mfuns-cn/mfunsPlayer/tree/v3-beta\";\r\n\r\n/** 开发者列表 */\r\nexport const developers = [\r\n  { name: \"Minteea\", id: \"Minteea\", link: \"https://github.com/Minteea\" },\r\n  { name: \"鲁迪钨丝\", id: \"Rudiusu\", link: \"https://github.com/Rudiusu\" },\r\n];\r\n","import { LoadInfo, MediaController, PlayerOptions, VideoInfo } from \"@/types\";\r\nimport { Player } from \"@/player\";\r\nimport { PlayerEventMap } from \"@/types/PlayerEventMap\";\r\nimport { createElement } from \"@/utils\";\r\nimport { classPrefix } from \"@/config\";\r\n\r\nconst videoEventMap: {\r\n  [k in keyof PlayerEventMap & keyof HTMLVideoElementEventMap]?: (\r\n    v: HTMLVideoElement\r\n  ) => Parameters<PlayerEventMap[k]>;\r\n} = {\r\n  play: () => [],\r\n  pause: () => [],\r\n  ended: () => [],\r\n\r\n  loadeddata: () => [],\r\n  loadedmetadata: () => [],\r\n  waiting: () => [],\r\n  playing: () => [],\r\n  canplay: () => [],\r\n  canplaythrough: () => [],\r\n\r\n  timeupdate: (v) => [v.currentTime],\r\n  durationchange: (v) => [v.duration],\r\n  progress: (v) => [v.buffered],\r\n  seeking: (v) => [v.currentTime],\r\n  seeked: (v) => [v.currentTime],\r\n  volumechange: (v) => [v.volume, v.muted],\r\n  ratechange: (v) => [v.playbackRate],\r\n\r\n  enterpictureinpicture: () => [],\r\n  leavepictureinpicture: () => [],\r\n};\r\n\r\nexport default class VideoController {\r\n  /** 播放器主体 */\r\n  player: Player;\r\n  /** video对象 */\r\n  $el: HTMLVideoElement;\r\n\r\n  ratio: [number, number] | null = null;\r\n\r\n  /** 视频信息 */\r\n  info: VideoInfo = {};\r\n\r\n  mediaController: MediaController | null = null;\r\n\r\n  private detachEventController?: AbortController;\r\n\r\n  constructor(player: Player, options: PlayerOptions) {\r\n    this.player = player;\r\n\r\n    this.$el = this.player.$content.appendChild(\r\n      createElement(\"video\", { class: `${classPrefix}-video` })\r\n    );\r\n\r\n    this._attachEvent(this.$el);\r\n\r\n    this.player.on(\"ended\", () => {\r\n      this.player.hook.call(\"end\").then((res) => {\r\n        if (res) this.player.emit(\"end\");\r\n      });\r\n    });\r\n  }\r\n\r\n  /** 设置视频 */\r\n  public set(info: VideoInfo, play?: boolean, time?: number) {\r\n    this.player.hook.call(\"video.set\", info).then(async (res) => {\r\n      if (res) {\r\n        // 销毁并丢弃原视频控制实例\r\n        this.mediaController?.destroy?.();\r\n        this.mediaController = null;\r\n        // 设置新视频信息\r\n        this.info = info;\r\n        this.player.emit(\"videoChange\", { ...info });\r\n        // 加载视频\r\n        let { url, type, live } = info;\r\n        const loadInfo = { url, type, play, time, live };\r\n        this.player.hook.call(\"video.beforeLoad\", loadInfo).then(() => {\r\n          if (loadInfo.url) {\r\n            this.load(loadInfo as LoadInfo);\r\n          } else {\r\n            this.player.throw(new Error(\"缺少视频播放信息\"));\r\n          }\r\n        });\r\n      }\r\n    });\r\n  }\r\n\r\n  /** 加载视频 */\r\n  public load(info: LoadInfo) {\r\n    this.player.hook.call(\"video.load\", info).then((res) => {\r\n      if (res) {\r\n        this.mediaController = this.player.loader.create(info, this.$el);\r\n        this.player.emit(\"videoLoad\", info);\r\n      } else {\r\n        this.player.throw(new Error(\"视频加载失败\"));\r\n      }\r\n    });\r\n  }\r\n\r\n  /** 添加视频事件 */\r\n  private _attachEvent(video: HTMLVideoElement) {\r\n    this.detachEventController = new AbortController();\r\n    for (const eventName in videoEventMap) {\r\n      const values =\r\n        videoEventMap[eventName as keyof HTMLVideoElementEventMap & keyof PlayerEventMap]!;\r\n      video.addEventListener(\r\n        eventName,\r\n        () => {\r\n          this.player.emit(\r\n            eventName as keyof HTMLVideoElementEventMap & keyof PlayerEventMap,\r\n            ...values(video)\r\n          );\r\n        },\r\n        { signal: this.detachEventController.signal }\r\n      );\r\n    }\r\n  }\r\n\r\n  public bind(el: HTMLVideoElement) {\r\n    this.$el = el;\r\n    this.detachEventController?.abort();\r\n    this._attachEvent(el);\r\n  }\r\n\r\n  /** 获取播放信息 */\r\n  getVideoInfo() {\r\n    return {\r\n      ...this.info,\r\n    };\r\n  }\r\n  /** 获取媒体信息 */\r\n  getMediaInfo() {\r\n    return {\r\n      url: this.mediaController?.url,\r\n      type: this.mediaController?.type || \"\",\r\n      live: this.mediaController?.live || false,\r\n    };\r\n  }\r\n}\r\n","import { Player } from \"@/player\";\r\nimport { PluginFrom } from \"@/plugin\";\r\nimport { PlayerOptions, PluginItem, PluginConstructor } from \"@/types\";\r\n\r\nexport default class PluginManager {\r\n  player: Player;\r\n  get list() {\r\n    return this.player.plugins as unknown as Record<string, PluginItem>;\r\n  }\r\n  private isInit = false;\r\n  private isReady = false;\r\n  private isMounted = false;\r\n  constructor(player: Player) {\r\n    this.player = player;\r\n  }\r\n\r\n  /** 插件模块初始化 @internal */\r\n  init(options: PlayerOptions) {\r\n    if (this.isInit) return;\r\n    this.isInit = true;\r\n    options.plugins?.forEach((pluginItem) => {\r\n      this.register(pluginItem, options);\r\n    });\r\n    this.pluginsReady();\r\n    this.player.emit(\"ready\");\r\n    this.player.once(\"mounted\", () => {\r\n      this.playerMounted();\r\n    });\r\n  }\r\n\r\n  /** 注册插件 */\r\n  register(pluginItem: PluginConstructor | PluginItem, options: PlayerOptions) {\r\n    const plugin: PluginItem =\r\n      typeof pluginItem == \"function\" ? new pluginItem(this.player) : pluginItem;\r\n    if (pluginItem.pluginName) this.list[pluginItem.pluginName] = plugin;\r\n    if (plugin.initialized) return;\r\n    plugin.init?.(this.player);\r\n    plugin.apply?.(this.player, options);\r\n    this.isReady && plugin.ready?.(this.player);\r\n    this.isMounted && plugin.mounted?.(this.player);\r\n    plugin.initialized = true;\r\n  }\r\n\r\n  /** 访问已安装插件实例 */\r\n  get(name: string): PluginItem | undefined {\r\n    return this.list[name];\r\n  }\r\n\r\n  /** 获取插件实例 */\r\n  from<T extends PluginItem>(item: PluginFrom<T>): T | undefined {\r\n    switch (typeof item) {\r\n      case \"object\":\r\n        return item;\r\n      case \"function\":\r\n        return this.build(item);\r\n      default:\r\n        return this.list[item] as T;\r\n    }\r\n  }\r\n\r\n  /** 初始化插件实例 */\r\n  build<T extends PluginItem>(\r\n    pluginItem: (new (player: Player) => T) | T,\r\n    options: PlayerOptions = {}\r\n  ): T {\r\n    const plugin: T = typeof pluginItem == \"function\" ? new pluginItem(this.player) : pluginItem;\r\n    if (plugin.initialized) return plugin;\r\n    plugin.init?.(this.player);\r\n    plugin.apply?.(this.player, options);\r\n    this.isReady\r\n      ? plugin.ready?.(this.player)\r\n      : this.player.once(\"ready\", () => plugin.mounted?.(this.player));\r\n    this.isMounted\r\n      ? plugin.mounted?.(this.player)\r\n      : this.player.once(\"mounted\", () => plugin.mounted?.(this.player));\r\n    plugin.initialized = true;\r\n    return plugin;\r\n  }\r\n\r\n  /** 所有插件注册完毕后执行 @internal */\r\n  protected pluginsReady() {\r\n    if (this.isReady) return;\r\n    for (const name in this.list) {\r\n      const plugin = this.list[name];\r\n      plugin.ready?.(this.player);\r\n    }\r\n    this.isReady = true;\r\n  }\r\n\r\n  /** 播放器挂载后执行 @internal */\r\n  protected playerMounted() {\r\n    if (this.isMounted) return;\r\n    for (const name in this.list) {\r\n      const plugin = this.list[name];\r\n      plugin.mounted?.(this.player);\r\n    }\r\n  }\r\n\r\n  /** 销毁所有插件 @internal */\r\n  destroy() {\r\n    for (const name in this.list) {\r\n      const plugin = this.list[name];\r\n      plugin.destroy?.();\r\n    }\r\n  }\r\n}\r\n","import { PlayerHookMap } from \"@/types\";\r\n\r\ntype MaybePromise<T> = T | Promise<T>;\r\n\r\nexport type HookFunction<T> = (ctx: T) => MaybePromise<void | boolean>;\r\n\r\nexport default class HookManager {\r\n  protected hooks: Record<string, HookFunction<any>[]> = {};\r\n\r\n  /** 注册钩子 */\r\n  register<T extends keyof PlayerHookMap>(\r\n    name: T,\r\n    func: HookFunction<PlayerHookMap[T]>,\r\n    before = false\r\n  ) {\r\n    let hook = this.hooks[name];\r\n    if (!hook) {\r\n      hook = [];\r\n      this.hooks[name] = hook;\r\n    }\r\n    before ? hook.unshift(func) : hook.push(func);\r\n  }\r\n\r\n  /** 移除钩子 */\r\n  unregister<T extends keyof PlayerHookMap>(name: T, func: HookFunction<PlayerHookMap[T]>) {\r\n    let hook = this.hooks[name];\r\n    if (!hook) {\r\n      hook = [];\r\n      this.hooks[name] = hook;\r\n    }\r\n    const index = hook.indexOf(func);\r\n    if (index > -1) hook.splice(index, 1);\r\n  }\r\n\r\n  call<T extends keyof PlayerHookMap>(\r\n    name: PlayerHookMap[T] extends void ? T : never,\r\n    ctx: void,\r\n    defaultFunc?: HookFunction<PlayerHookMap[T]>\r\n  ): Promise<boolean>;\r\n  call<T extends keyof PlayerHookMap>(\r\n    name: T,\r\n    ctx: PlayerHookMap[T],\r\n    defaultFunc?: HookFunction<PlayerHookMap[T]>\r\n  ): Promise<boolean>;\r\n  /** 调用钩子函数\r\n   * @param name 钩子名称\r\n   * @param ctx 钩子上下文\r\n   * @param defaultFunc 钩子在正常遍历完毕后最终执行的钩子函数\r\n   */\r\n  async call<T extends keyof PlayerHookMap>(\r\n    name: T,\r\n    ctx: PlayerHookMap[T],\r\n    defaultFunc?: HookFunction<PlayerHookMap[T]>\r\n  ) {\r\n    const hook = this.hooks[name];\r\n    if (hook?.length) {\r\n      for (const f of hook) {\r\n        const res = await f(ctx);\r\n        if (res == true) {\r\n          console.log(`钩子提前结束调用: ${name}`);\r\n          console.log(f);\r\n          return true;\r\n        } else if (res == false) {\r\n          console.log(`钩子被拦截: ${name}`);\r\n          console.log(f);\r\n          return false;\r\n        }\r\n      }\r\n    }\r\n    console.log(`钩子调用完毕: ${name}`);\r\n    console.log(ctx);\r\n    return defaultFunc?.(ctx as any) ?? true;\r\n  }\r\n}\r\n","import { Player } from \"@/player\";\r\nimport { LoadInfo, MediaController, MediaLoader, PlayerHookMap } from \"@/types\";\r\n\r\nexport default class LoaderManager {\r\n  protected list = new Map<string, MediaLoader>();\r\n  protected player: Player;\r\n\r\n  constructor(player: Player) {\r\n    this.player = player;\r\n  }\r\n\r\n  /** 注册加载器 */\r\n  register(name: string, loader: MediaLoader) {\r\n    this.list.set(name, loader);\r\n  }\r\n\r\n  /** 移除加载器 */\r\n  unregister<T extends keyof PlayerHookMap>(name: T) {\r\n    this.list.delete(name);\r\n  }\r\n\r\n  /** 创建媒体控制实例 */\r\n  create(info: LoadInfo, video: HTMLVideoElement) {\r\n    for (const [name, loader] of this.list) {\r\n      if (loader.check(info)) return loader.create(info, video);\r\n    }\r\n    return this.createDefault(info, video);\r\n  }\r\n\r\n  /** 常规方式创建实例 */\r\n  createDefault(info: LoadInfo, video: HTMLVideoElement): MediaController {\r\n    const { type, url, live, play, time } = info;\r\n    const controller: MediaController = {\r\n      type: type || \"\",\r\n      url: url,\r\n      live: live || false,\r\n      mediaElement: video,\r\n      destroy() {\r\n        this.mediaElement.src = \"\";\r\n      },\r\n    };\r\n    const t = time === true ? this.player.currentTime : time;\r\n    video.src = url;\r\n    video.addEventListener(\r\n      \"loadeddata\",\r\n      () => {\r\n        if (t) {\r\n          this.player.seek(t);\r\n        }\r\n        if (play) {\r\n          this.player.play();\r\n        }\r\n      },\r\n      { once: true }\r\n    );\r\n    return controller;\r\n  }\r\n}\r\n","import { PlayerEventMap } from \"@/types\";\r\n\r\nexport default class EventEmitter {\r\n  protected listeners: Record<string, ((...args: any[]) => void)[]> = {};\r\n  protected onceListeners: Record<string, ((...args: any[]) => void)[]> = {};\r\n\r\n  readonly customEventList: string[] = [];\r\n\r\n  /** 添加监听 */\r\n  on<T extends keyof PlayerEventMap>(name: T, listener: PlayerEventMap[T]) {\r\n    if (!this.listeners[name]) {\r\n      this.listeners[name] = [];\r\n    }\r\n    this.listeners[name].push(listener);\r\n  }\r\n\r\n  /** 添加一次性监听 */\r\n  once<T extends keyof PlayerEventMap>(name: T, listener: PlayerEventMap[T]) {\r\n    if (!this.onceListeners[name]) {\r\n      this.onceListeners[name] = [];\r\n    }\r\n    this.onceListeners[name].push(listener);\r\n  }\r\n\r\n  /** 移除监听 */\r\n  off<T extends keyof PlayerEventMap>(name: T, listener: PlayerEventMap[T]) {\r\n    if (!this.listeners[name]) {\r\n      this.listeners[name] = [];\r\n    }\r\n    const index = this.listeners[name].indexOf(listener);\r\n    if (index > -1) this.listeners[name].splice(index, 1);\r\n  }\r\n\r\n  /** 触发事件 */\r\n  emit<T extends keyof PlayerEventMap>(name: T, ...args: Parameters<PlayerEventMap[T]>) {\r\n    if (this.listeners[name]?.length) {\r\n      for (let i = 0; i < this.listeners[name].length; i++) {\r\n        this.listeners[name][i](...args);\r\n      }\r\n    }\r\n    if (this.onceListeners[name]?.length) {\r\n      for (let i = 0; i < this.onceListeners[name].length; i++) {\r\n        this.onceListeners[name][i](...args);\r\n      }\r\n      this.onceListeners[name] = [];\r\n    }\r\n  }\r\n}\r\n","import {\r\n  LoadInfo,\r\n  MediaController,\r\n  PlayerPlugins,\r\n  PlayerPropertyDescriptor,\r\n  VideoInfo,\r\n} from \"./types\";\r\nimport { PlayerOptions } from \"@/types\";\r\nimport { PlayerEventMap } from \"./types/PlayerEventMap\";\r\nimport { clamp, createElement } from \"./utils\";\r\nimport { classPrefix, gitHash, version } from \"./config\";\r\nimport VideoController from \"./module/videoController\";\r\nimport PluginManager from \"./module/pluginManager\";\r\nimport HookManager from \"./module/hookManager\";\r\nimport LoaderManager from \"./module/loaderManager\";\r\nimport EventEmitter from \"./module/eventEmitter\";\r\n\r\n/**\r\n * @event\r\n */\r\nexport class Player {\r\n  static readonly version = version;\r\n  static readonly gitHash = gitHash;\r\n  /** 容器 */\r\n  readonly container?: HTMLElement;\r\n  /** 播放器元素 */\r\n  readonly $el: HTMLDivElement;\r\n  /** 播放器主要区域 */\r\n  readonly $main: HTMLDivElement;\r\n  /** 播放器视频区域 */\r\n  readonly $area: HTMLDivElement;\r\n  /** 播放器视频容器 */\r\n  readonly $content: HTMLDivElement;\r\n  /** hook */\r\n  readonly hook = new HookManager();\r\n  /** 媒体加载器 */\r\n  readonly loader: LoaderManager;\r\n  /** 插件 */\r\n  readonly plugins: PlayerPlugins = {};\r\n  /** 插件管理 */\r\n  readonly plugin: PluginManager;\r\n  /** 视频控制 */\r\n  protected _videoController: VideoController;\r\n  /** 事件机制 */\r\n  protected _eventEmitter = new EventEmitter();\r\n  /** Player类 */\r\n  readonly Player = Player;\r\n\r\n  constructor(options: PlayerOptions) {\r\n    this.container = options.container;\r\n\r\n    this.$el = createElement(\"div\", { class: `${classPrefix} mpui` });\r\n    this.$main = this.$el.appendChild(createElement(\"div\", { class: `${classPrefix}-main` }));\r\n    this.$area = this.$main.appendChild(createElement(\"div\", { class: `${classPrefix}-area` }));\r\n    this.$content = this.$area.appendChild(\r\n      createElement(\"div\", { class: `${classPrefix}-content` })\r\n    );\r\n\r\n    this.plugin = new PluginManager(this);\r\n    this._videoController = new VideoController(this, options);\r\n    this.loader = new LoaderManager(this);\r\n\r\n    this.init(options);\r\n  }\r\n\r\n  /** 初始化播放器 */\r\n  private async init(options: PlayerOptions) {\r\n    // 状态事件\r\n    this.on(\"videoChange\", () => {\r\n      this.$el.classList.add(\"is-start\");\r\n    });\r\n    this.$el.classList.add(\"is-paused\");\r\n    this.on(\"play\", () => {\r\n      this.$el.classList.remove(\"is-start\");\r\n      this.$el.classList.remove(\"is-paused\");\r\n    });\r\n    this.on(\"pause\", () => {\r\n      this.$el.classList.add(\"is-paused\");\r\n    });\r\n    this.on(\"waiting\", () => {\r\n      this.$el.classList.add(\"is-loading\");\r\n    });\r\n    this.on(\"playing\", () => {\r\n      this.$el.classList.remove(\"is-loading\");\r\n    });\r\n\r\n    // 注册列表中的插件\r\n    this.plugin.init(options);\r\n\r\n    // 播放器挂载\r\n    this.container?.appendChild(this.$el);\r\n\r\n    this.emit(\"mounted\");\r\n\r\n    // 装载视频\r\n    this._videoController.set(options.video || {}, options.autoPlay, options.time);\r\n  }\r\n\r\n  /** 播放器视频元素 */\r\n  get $video(): HTMLVideoElement {\r\n    return this._videoController.$el;\r\n  }\r\n\r\n  /** 获取视频信息 */\r\n  getVideoInfo() {\r\n    return this._videoController.getVideoInfo();\r\n  }\r\n\r\n  /** 获取媒体信息 */\r\n  getMediaInfo() {\r\n    return this._videoController.getMediaInfo();\r\n  }\r\n\r\n  /** 获取播放器的媒体元素 */\r\n  getMediaElement(): HTMLVideoElement {\r\n    return this._videoController.$el;\r\n  }\r\n\r\n  /** 绑定媒体元素 */\r\n  attachMediaElement(el: HTMLVideoElement) {\r\n    this._videoController.bind(el);\r\n  }\r\n\r\n  /** 获取媒体控制实例 */\r\n  getMediaController(): MediaController | null {\r\n    return this._videoController.mediaController;\r\n  }\r\n\r\n  /** 绑定媒体控制实例 */\r\n  attachMediaController(controller: MediaController) {\r\n    this._videoController.mediaController = controller;\r\n    this._videoController.bind(controller.mediaElement);\r\n  }\r\n\r\n  /** 设置视频内容 */\r\n  setVideo(info: VideoInfo, play?: boolean, time?: number) {\r\n    return this._videoController.set(info, play, time);\r\n  }\r\n\r\n  /** 加载视频源 */\r\n  loadVideo(info: LoadInfo) {\r\n    return this._videoController.load(info);\r\n  }\r\n\r\n  // --- 播放切换控制 --- //\r\n\r\n  /** 切换上一个 */\r\n  public prev() {\r\n    this.hook.call(\"prev\");\r\n  }\r\n\r\n  /** 切换下一个 */\r\n  public next() {\r\n    this.hook.call(\"next\");\r\n  }\r\n\r\n  // --- 视频播放控制 --- //\r\n\r\n  /** 当前播放器暂停状态 */\r\n  get paused() {\r\n    return this.$video.paused;\r\n  }\r\n\r\n  /** 当前播放时间 */\r\n  public get currentTime() {\r\n    return this.$video.currentTime;\r\n  }\r\n\r\n  /** 当前播放总时间 */\r\n  public get duration() {\r\n    return this.$video.duration;\r\n  }\r\n\r\n  /** 当前播放音量 */\r\n  public get volume() {\r\n    return this.$video.volume;\r\n  }\r\n\r\n  /** 当前静音状态 */\r\n  public get muted() {\r\n    return this.$video.muted;\r\n  }\r\n\r\n  /** 当前播放速度 */\r\n  public get playbackRate() {\r\n    return this.$video.playbackRate;\r\n  }\r\n\r\n  /** 当前视频循环 */\r\n  public get loop() {\r\n    return this.$video.loop;\r\n  }\r\n\r\n  /** 开始播放 */\r\n  public play() {\r\n    this.hook.call(\"play\").then((res) => {\r\n      if (res) this.$video.play();\r\n    });\r\n  }\r\n\r\n  /** 暂停播放 */\r\n  public pause() {\r\n    this.hook.call(\"pause\").then((res) => {\r\n      if (res) this.$video.pause();\r\n    });\r\n  }\r\n\r\n  /** 跳转\r\n   * @param time 跳转时间点（秒）\r\n   */\r\n  public seek(time: number) {\r\n    this.hook.call(\"seek\").then((res) => {\r\n      if (res) {\r\n        this.$video.currentTime = clamp(time, 0, this.$video.duration);\r\n      }\r\n    });\r\n  }\r\n\r\n  /** 设置音量\r\n   * @param volume 音量（0-1）\r\n   */\r\n  public setVolume(volume: number) {\r\n    this.$video.volume = clamp(volume, 0, 1);\r\n  }\r\n\r\n  /** 静音 */\r\n  public setMuted(flag: boolean) {\r\n    this.$video.muted = flag;\r\n  }\r\n\r\n  /** 设置倍速 */\r\n  public setPlaybackRate(value: number) {\r\n    this.$video.playbackRate = value;\r\n  }\r\n\r\n  /** 设置视频循环 */\r\n  public setLoop(flag: boolean) {\r\n    this.$video.loop = flag;\r\n    this.emit(\"loopChange\", flag);\r\n  }\r\n\r\n  // --- 事件 --- //\r\n\r\n  /** 监听事件 */\r\n  public on<T extends keyof PlayerEventMap>(name: T, listener: PlayerEventMap[T]) {\r\n    this._eventEmitter.on(name, listener);\r\n  }\r\n\r\n  /** 取消监听事件 */\r\n  public off<T extends keyof PlayerEventMap>(name: T, listener: PlayerEventMap[T]) {\r\n    this._eventEmitter.off(name, listener);\r\n  }\r\n\r\n  /** 一次性监听事件 */\r\n  public once<T extends keyof PlayerEventMap>(name: T, listener: PlayerEventMap[T]) {\r\n    this._eventEmitter.once(name, listener);\r\n  }\r\n\r\n  /** 发送事件 */\r\n  public emit<T extends keyof PlayerEventMap>(name: T, ...args: Parameters<PlayerEventMap[T]>) {\r\n    this._eventEmitter.emit(name, ...args);\r\n  }\r\n\r\n  /** 定义属性或方法 */\r\n  public define<T extends keyof Player>(\r\n    name: Player[T] extends Function | undefined ? T : never,\r\n    item: Function\r\n  ): void;\r\n  public define<T extends keyof Player>(name: T, item: PlayerPropertyDescriptor<Player[T]>): void;\r\n  public define(name: string, item: Function | PropertyDescriptor) {\r\n    Object.defineProperty(this, name, typeof item == \"function\" ? { value: item } : item);\r\n  }\r\n\r\n  /** 抛出错误 */\r\n  public throw(err: Error) {\r\n    console.error(err);\r\n    this.emit(\"error\", err);\r\n  }\r\n\r\n  /** 播放器销毁 */\r\n  public destroy() {\r\n    // 所有插件执行destroy函数\r\n    this.plugin.destroy();\r\n  }\r\n}\r\n\r\nexport default Player;\r\n","import { PlayerOptions, PluginItem } from \"@/types\";\r\nimport { Player } from \"@/player\";\r\n\r\n/** 基础插件 */\r\nexport abstract class BasePlugin implements PluginItem {\r\n  static pluginName: string;\r\n  protected readonly player: Player;\r\n  protected readonly plugins: Player[\"plugins\"];\r\n  /** 抛出错误 */\r\n  protected readonly throw: Player[\"throw\"];\r\n  constructor(player: Player) {\r\n    this.player = player;\r\n    this.plugins = player.plugins;\r\n    this.throw = player.throw;\r\n  }\r\n  /** 插件创建后 */\r\n  init?(player: Player): void;\r\n  /** 作为插件注册 */\r\n  apply?(player: Player, options: PlayerOptions): void;\r\n  /** 所有插件加载后 */\r\n  ready?(player: Player): void;\r\n  /** 播放器挂载后 */\r\n  mounted?(player: Player): void;\r\n  /** 执行销毁 */\r\n  destroy?(): void;\r\n}\r\n\r\n/** UI组件 */\r\nexport interface UIItem extends PluginItem {\r\n  /** 组件元素 */\r\n  $el: HTMLElement;\r\n  /** 组件标题 */\r\n  title?: string;\r\n  /** 忽略该组件，用于不支持的情况 */\r\n  ignored?: boolean;\r\n}\r\n\r\n/** 可挂载组件 */\r\nexport interface MountableItem extends UIItem {\r\n  /** 将组件挂载到父元素 */\r\n  mount(\r\n    /** 挂载的容器元素 */\r\n    el: HTMLElement,\r\n    opt?: {\r\n      /** 挂载组件时执行的逻辑 */\r\n      onToggle?: (flag: boolean) => void;\r\n      /** 卸载组件时执行的逻辑 */\r\n      onUnmount?: () => void;\r\n    }\r\n  ): void;\r\n  /** 卸载组件 */\r\n  unmount(): void;\r\n}\r\n\r\n/** 控制组件 */\r\nexport interface ControlsItem extends UIItem {}\r\n\r\n/** 面板组件 */\r\nexport interface PanelItem extends MountableItem {\r\n  toggle(flag?: boolean): void;\r\n}\r\n\r\n/** 菜单项组件 */\r\nexport interface MenuItem extends PluginItem {\r\n  icon?: HTMLElement | ((player: Player) => HTMLElement);\r\n  content: string | HTMLElement | ((player: Player) => string | HTMLElement);\r\n  onClick?: (player: Player) => void;\r\n}\r\n\r\n/** 界面插件 */\r\nexport abstract class UIPlugin extends BasePlugin {\r\n  $el: HTMLElement;\r\n  $<T extends Element>(selectors: string) {\r\n    return this.$el.querySelector<T>(selectors);\r\n  }\r\n  constructor(player: Player, el: HTMLElement) {\r\n    super(player);\r\n    this.$el = el;\r\n  }\r\n}\r\n\r\n/** 可挂载组件插件 */\r\nexport abstract class MountablePlugin extends UIPlugin implements MountableItem {\r\n  title?: string;\r\n  #onUnmount?: () => void;\r\n  /** 挂载 */\r\n  mount(el: HTMLElement, opt?: { onUnmount?: () => void }) {\r\n    el.appendChild(this.$el);\r\n    this.unmount();\r\n    this.#onUnmount = opt?.onUnmount;\r\n  }\r\n  /** 卸载 */\r\n  unmount() {\r\n    this.#onUnmount?.();\r\n    this.#onUnmount = undefined;\r\n  }\r\n  show() {\r\n    this.$el.style.display = \"\";\r\n  }\r\n  hide() {\r\n    this.$el.style.display = \"none\";\r\n  }\r\n}\r\n\r\n/** 控制组件插件 */\r\nexport abstract class ControlsPlugin extends MountablePlugin implements ControlsItem {}\r\n\r\n/** 面板插件 */\r\nexport abstract class PanelPlugin extends MountablePlugin implements PanelItem {\r\n  title?: string;\r\n  container?: HTMLElement;\r\n  #onToggle?: (flag: boolean) => void;\r\n  shown = false;\r\n  constructor(player: Player, el: HTMLElement) {\r\n    super(player, el);\r\n  }\r\n  /** 挂载 */\r\n  mount(el: HTMLElement, opt?: { onToggle?: (flag: boolean) => void; onUnmount?: () => void }) {\r\n    super.mount(el, { onUnmount: opt?.onUnmount });\r\n    this.#onToggle = opt?.onToggle;\r\n  }\r\n  /** 卸载 */\r\n  unmount() {\r\n    this.toggle(false);\r\n    super.unmount();\r\n    this.#onToggle = undefined;\r\n  }\r\n  /** 切换显示隐藏状态 */\r\n  toggle(flag?: boolean) {\r\n    this.shown = flag ?? !this.shown;\r\n    this.#onToggle?.(this.shown);\r\n  }\r\n}\r\n\r\n/** 菜单项插件 */\r\nexport abstract class MenuPlugin extends BasePlugin implements MenuItem {\r\n  abstract name: string;\r\n  abstract content: string | HTMLElement | ((player: Player) => string | HTMLElement);\r\n}\r\n\r\nexport interface PanelContainer {\r\n  mount: (panel: PanelPlugin) => void;\r\n}\r\n\r\nexport type PluginFrom<T = PluginItem> = (new (player: Player) => T) | T | string;\r\n","/**\n * @license\n * Copyright 2017 Google LLC\n * SPDX-License-Identifier: BSD-3-Clause\n */\nvar t;const i=window,s=i.trustedTypes,e=s?s.createPolicy(\"lit-html\",{createHTML:t=>t}):void 0,o=\"$lit$\",n=`lit$${(Math.random()+\"\").slice(9)}$`,l=\"?\"+n,h=`<${l}>`,r=document,u=()=>r.createComment(\"\"),d=t=>null===t||\"object\"!=typeof t&&\"function\"!=typeof t,c=Array.isArray,v=t=>c(t)||\"function\"==typeof(null==t?void 0:t[Symbol.iterator]),a=\"[ \\t\\n\\f\\r]\",f=/<(?:(!--|\\/[^a-zA-Z])|(\\/?[a-zA-Z][^>\\s]*)|(\\/?$))/g,_=/-->/g,m=/>/g,p=RegExp(`>|${a}(?:([^\\\\s\"'>=/]+)(${a}*=${a}*(?:[^ \\t\\n\\f\\r\"'\\`<>=]|(\"|')|))|$)`,\"g\"),g=/'/g,$=/\"/g,y=/^(?:script|style|textarea|title)$/i,w=t=>(i,...s)=>({_$litType$:t,strings:i,values:s}),x=w(1),b=w(2),T=Symbol.for(\"lit-noChange\"),A=Symbol.for(\"lit-nothing\"),E=new WeakMap,C=r.createTreeWalker(r,129,null,!1);function P(t,i){if(!Array.isArray(t)||!t.hasOwnProperty(\"raw\"))throw Error(\"invalid template strings array\");return void 0!==e?e.createHTML(i):i}const V=(t,i)=>{const s=t.length-1,e=[];let l,r=2===i?\"<svg>\":\"\",u=f;for(let i=0;i<s;i++){const s=t[i];let d,c,v=-1,a=0;for(;a<s.length&&(u.lastIndex=a,c=u.exec(s),null!==c);)a=u.lastIndex,u===f?\"!--\"===c[1]?u=_:void 0!==c[1]?u=m:void 0!==c[2]?(y.test(c[2])&&(l=RegExp(\"</\"+c[2],\"g\")),u=p):void 0!==c[3]&&(u=p):u===p?\">\"===c[0]?(u=null!=l?l:f,v=-1):void 0===c[1]?v=-2:(v=u.lastIndex-c[2].length,d=c[1],u=void 0===c[3]?p:'\"'===c[3]?$:g):u===$||u===g?u=p:u===_||u===m?u=f:(u=p,l=void 0);const w=u===p&&t[i+1].startsWith(\"/>\")?\" \":\"\";r+=u===f?s+h:v>=0?(e.push(d),s.slice(0,v)+o+s.slice(v)+n+w):s+n+(-2===v?(e.push(void 0),i):w)}return[P(t,r+(t[s]||\"<?>\")+(2===i?\"</svg>\":\"\")),e]};class N{constructor({strings:t,_$litType$:i},e){let h;this.parts=[];let r=0,d=0;const c=t.length-1,v=this.parts,[a,f]=V(t,i);if(this.el=N.createElement(a,e),C.currentNode=this.el.content,2===i){const t=this.el.content,i=t.firstChild;i.remove(),t.append(...i.childNodes)}for(;null!==(h=C.nextNode())&&v.length<c;){if(1===h.nodeType){if(h.hasAttributes()){const t=[];for(const i of h.getAttributeNames())if(i.endsWith(o)||i.startsWith(n)){const s=f[d++];if(t.push(i),void 0!==s){const t=h.getAttribute(s.toLowerCase()+o).split(n),i=/([.?@])?(.*)/.exec(s);v.push({type:1,index:r,name:i[2],strings:t,ctor:\".\"===i[1]?H:\"?\"===i[1]?L:\"@\"===i[1]?z:k})}else v.push({type:6,index:r})}for(const i of t)h.removeAttribute(i)}if(y.test(h.tagName)){const t=h.textContent.split(n),i=t.length-1;if(i>0){h.textContent=s?s.emptyScript:\"\";for(let s=0;s<i;s++)h.append(t[s],u()),C.nextNode(),v.push({type:2,index:++r});h.append(t[i],u())}}}else if(8===h.nodeType)if(h.data===l)v.push({type:2,index:r});else{let t=-1;for(;-1!==(t=h.data.indexOf(n,t+1));)v.push({type:7,index:r}),t+=n.length-1}r++}}static createElement(t,i){const s=r.createElement(\"template\");return s.innerHTML=t,s}}function S(t,i,s=t,e){var o,n,l,h;if(i===T)return i;let r=void 0!==e?null===(o=s._$Co)||void 0===o?void 0:o[e]:s._$Cl;const u=d(i)?void 0:i._$litDirective$;return(null==r?void 0:r.constructor)!==u&&(null===(n=null==r?void 0:r._$AO)||void 0===n||n.call(r,!1),void 0===u?r=void 0:(r=new u(t),r._$AT(t,s,e)),void 0!==e?(null!==(l=(h=s)._$Co)&&void 0!==l?l:h._$Co=[])[e]=r:s._$Cl=r),void 0!==r&&(i=S(t,r._$AS(t,i.values),r,e)),i}class M{constructor(t,i){this._$AV=[],this._$AN=void 0,this._$AD=t,this._$AM=i}get parentNode(){return this._$AM.parentNode}get _$AU(){return this._$AM._$AU}u(t){var i;const{el:{content:s},parts:e}=this._$AD,o=(null!==(i=null==t?void 0:t.creationScope)&&void 0!==i?i:r).importNode(s,!0);C.currentNode=o;let n=C.nextNode(),l=0,h=0,u=e[0];for(;void 0!==u;){if(l===u.index){let i;2===u.type?i=new R(n,n.nextSibling,this,t):1===u.type?i=new u.ctor(n,u.name,u.strings,this,t):6===u.type&&(i=new Z(n,this,t)),this._$AV.push(i),u=e[++h]}l!==(null==u?void 0:u.index)&&(n=C.nextNode(),l++)}return C.currentNode=r,o}v(t){let i=0;for(const s of this._$AV)void 0!==s&&(void 0!==s.strings?(s._$AI(t,s,i),i+=s.strings.length-2):s._$AI(t[i])),i++}}class R{constructor(t,i,s,e){var o;this.type=2,this._$AH=A,this._$AN=void 0,this._$AA=t,this._$AB=i,this._$AM=s,this.options=e,this._$Cp=null===(o=null==e?void 0:e.isConnected)||void 0===o||o}get _$AU(){var t,i;return null!==(i=null===(t=this._$AM)||void 0===t?void 0:t._$AU)&&void 0!==i?i:this._$Cp}get parentNode(){let t=this._$AA.parentNode;const i=this._$AM;return void 0!==i&&11===(null==t?void 0:t.nodeType)&&(t=i.parentNode),t}get startNode(){return this._$AA}get endNode(){return this._$AB}_$AI(t,i=this){t=S(this,t,i),d(t)?t===A||null==t||\"\"===t?(this._$AH!==A&&this._$AR(),this._$AH=A):t!==this._$AH&&t!==T&&this._(t):void 0!==t._$litType$?this.g(t):void 0!==t.nodeType?this.$(t):v(t)?this.T(t):this._(t)}k(t){return this._$AA.parentNode.insertBefore(t,this._$AB)}$(t){this._$AH!==t&&(this._$AR(),this._$AH=this.k(t))}_(t){this._$AH!==A&&d(this._$AH)?this._$AA.nextSibling.data=t:this.$(r.createTextNode(t)),this._$AH=t}g(t){var i;const{values:s,_$litType$:e}=t,o=\"number\"==typeof e?this._$AC(t):(void 0===e.el&&(e.el=N.createElement(P(e.h,e.h[0]),this.options)),e);if((null===(i=this._$AH)||void 0===i?void 0:i._$AD)===o)this._$AH.v(s);else{const t=new M(o,this),i=t.u(this.options);t.v(s),this.$(i),this._$AH=t}}_$AC(t){let i=E.get(t.strings);return void 0===i&&E.set(t.strings,i=new N(t)),i}T(t){c(this._$AH)||(this._$AH=[],this._$AR());const i=this._$AH;let s,e=0;for(const o of t)e===i.length?i.push(s=new R(this.k(u()),this.k(u()),this,this.options)):s=i[e],s._$AI(o),e++;e<i.length&&(this._$AR(s&&s._$AB.nextSibling,e),i.length=e)}_$AR(t=this._$AA.nextSibling,i){var s;for(null===(s=this._$AP)||void 0===s||s.call(this,!1,!0,i);t&&t!==this._$AB;){const i=t.nextSibling;t.remove(),t=i}}setConnected(t){var i;void 0===this._$AM&&(this._$Cp=t,null===(i=this._$AP)||void 0===i||i.call(this,t))}}class k{constructor(t,i,s,e,o){this.type=1,this._$AH=A,this._$AN=void 0,this.element=t,this.name=i,this._$AM=e,this.options=o,s.length>2||\"\"!==s[0]||\"\"!==s[1]?(this._$AH=Array(s.length-1).fill(new String),this.strings=s):this._$AH=A}get tagName(){return this.element.tagName}get _$AU(){return this._$AM._$AU}_$AI(t,i=this,s,e){const o=this.strings;let n=!1;if(void 0===o)t=S(this,t,i,0),n=!d(t)||t!==this._$AH&&t!==T,n&&(this._$AH=t);else{const e=t;let l,h;for(t=o[0],l=0;l<o.length-1;l++)h=S(this,e[s+l],i,l),h===T&&(h=this._$AH[l]),n||(n=!d(h)||h!==this._$AH[l]),h===A?t=A:t!==A&&(t+=(null!=h?h:\"\")+o[l+1]),this._$AH[l]=h}n&&!e&&this.j(t)}j(t){t===A?this.element.removeAttribute(this.name):this.element.setAttribute(this.name,null!=t?t:\"\")}}class H extends k{constructor(){super(...arguments),this.type=3}j(t){this.element[this.name]=t===A?void 0:t}}const I=s?s.emptyScript:\"\";class L extends k{constructor(){super(...arguments),this.type=4}j(t){t&&t!==A?this.element.setAttribute(this.name,I):this.element.removeAttribute(this.name)}}class z extends k{constructor(t,i,s,e,o){super(t,i,s,e,o),this.type=5}_$AI(t,i=this){var s;if((t=null!==(s=S(this,t,i,0))&&void 0!==s?s:A)===T)return;const e=this._$AH,o=t===A&&e!==A||t.capture!==e.capture||t.once!==e.once||t.passive!==e.passive,n=t!==A&&(e===A||o);o&&this.element.removeEventListener(this.name,this,e),n&&this.element.addEventListener(this.name,this,t),this._$AH=t}handleEvent(t){var i,s;\"function\"==typeof this._$AH?this._$AH.call(null!==(s=null===(i=this.options)||void 0===i?void 0:i.host)&&void 0!==s?s:this.element,t):this._$AH.handleEvent(t)}}class Z{constructor(t,i,s){this.element=t,this.type=6,this._$AN=void 0,this._$AM=i,this.options=s}get _$AU(){return this._$AM._$AU}_$AI(t){S(this,t)}}const j={O:o,P:n,A:l,C:1,M:V,L:M,R:v,D:S,I:R,V:k,H:L,N:z,U:H,F:Z},B=i.litHtmlPolyfillSupport;null==B||B(N,R),(null!==(t=i.litHtmlVersions)&&void 0!==t?t:i.litHtmlVersions=[]).push(\"2.8.0\");const D=(t,i,s)=>{var e,o;const n=null!==(e=null==s?void 0:s.renderBefore)&&void 0!==e?e:i;let l=n._$litPart$;if(void 0===l){const t=null!==(o=null==s?void 0:s.renderBefore)&&void 0!==o?o:null;n._$litPart$=l=new R(i.insertBefore(u(),t),t,void 0,null!=s?s:{})}return l._$AI(t),l};export{j as _$LH,x as html,T as noChange,A as nothing,D as render,b as svg};\n//# sourceMappingURL=lit-html.js.map\n","import { html, render } from \"lit-html\";\n\nconst template = ({ divider }: { divider: number }) =>\n  html` <div\n    class=\"mpui-slider mpui-slider-horizontal\"\n    style=\"position: relative; width: 100%; height: 100%\"\n  >\n    <div\n      class=\"mpui-slider-track\"\n      style=\"\n      position: absolute;\n      width: 100%;\n      top: 50%;\n      transform: translateY(-50%);\n      display: flex;\n      justify-content: center;\n      align-items: center;\n    \"\n    >\n      <div class=\"mpui-slider-bar\" style=\"position: absolute; left: 0; height: 100%\"></div>\n      <div class=\"mpui-slider-thumb-track\" style=\"height: 0px\">\n        <div\n          class=\"mpui-slider-thumb\"\n          style=\"position: absolute; transform: translate(-50%, -50%)\"\n        ></div>\n        ${divider\n          ? html`\n              <div class=\"mpui-slider-divider\">\n                ${new Array(divider).fill(html`<div class=\"mpui-slider-divider-dot\"></div>`)}\n              </div>\n            `\n          : \"\"}\n      </div>\n    </div>\n  </div>`;\n\ninterface SliderOptions {\n  /** 挂载容器 */\n  container: HTMLElement;\n  /** 最小值 */\n  min: number;\n  /** 最大值 */\n  max: number;\n  /** 步长(若不填或为0，则没有步长限制) */\n  step?: number;\n  /** 分割线 */\n  divider?: number | boolean;\n  /** 默认值(不填的情况下默认值为0) */\n  value?: number;\n  /** 数值更改时触发 */\n  onChange?: (value: number) => void;\n  /** 拖动引发数值更改时触发 */\n  onDrag?: (value: number) => void;\n  /** 开始拖动时触发 */\n  onDragStart?: (value: number) => void;\n  /** 结束拖动时触发 */\n  onDragEnd?: (value: number) => void;\n}\n\n/** 横向滑动条 */\nexport class Slider implements SliderOptions {\n  readonly container: HTMLElement;\n  readonly min: number;\n  readonly max: number;\n  /** 步长 */\n  readonly step: number;\n  /** 分割线 */\n  readonly divider: number;\n  /** 数值 */\n  value: number;\n  onChange?: (value: number) => void;\n  onDragStart?: (value: number) => void;\n  onDragEnd?: (value: number) => void;\n  onDrag?: (value: number) => void;\n\n  // 部件\n  $el: HTMLElement;\n\n  $track: HTMLElement;\n\n  $bar: HTMLElement;\n\n  $thumbTrack: HTMLElement;\n\n  $thumb: HTMLElement;\n\n  constructor({\n    container,\n    min,\n    max,\n    step,\n    divider = 0,\n    value = 0,\n    onChange,\n    onDragStart,\n    onDragEnd,\n    onDrag,\n  }: SliderOptions) {\n    this.container = container;\n    this.min = min;\n    this.max = max;\n    this.step = step || 0;\n    this.divider = divider ? (typeof divider === \"boolean\" ? this.step : divider) : 0;\n    this.value = isNaN(value) ? value : Number(value);\n    this.onChange = onChange;\n    this.onDragStart = onDragStart;\n    this.onDragEnd = onDragEnd;\n    this.onDrag = onDrag;\n\n    render(template({ divider: this.divider }), container);\n\n    this.$el = this.container.querySelector(\".mpui-slider\")!;\n    this.$track = this.$el.querySelector(\".mpui-slider-track\")!; // 滑动条轨道\n    this.$bar = this.$track.querySelector(\".mpui-slider-bar\")!; // 滑动条痕迹\n    this.$thumbTrack = this.$track.querySelector(\".mpui-slider-thumb-track\")!; // 滑块轨道\n    this.$thumb = this.$track.querySelector(\".mpui-slider-thumb\")!; // 滑块\n\n    // 滑动条事件\n    this.$el.addEventListener(\"mousedown\", (event: MouseEvent) => {\n      const e: MouseEvent = event;\n      // 鼠标X位置\n      const { clientX } = e;\n      // 滑块长度\n      const trackLength = this.$track.offsetWidth;\n      // 滑块可滑动距离\n      let nMax = this.$thumbTrack.offsetWidth;\n      nMax = nMax || trackLength;\n      // 滑块轨道与总轨道距离差\n      const thumbTrackX = (trackLength - nMax) / 2;\n      // 滑动条位置\n      const nLeft = this.$el.getBoundingClientRect().left;\n      // 计算滑块位置\n      let nLength = clientX - nLeft - thumbTrackX;\n      // 限制滑块移动位置\n      nLength = nLength >= nMax ? nMax : nLength <= 0 ? 0 : nLength;\n      const value = this.step\n        ? Math.round(((nLength / nMax) * (this.max - this.min)) / this.step) * this.step + this.min\n        : (nLength / nMax) * (this.max - this.min) + this.min;\n      // 开始滑动事件\n      this.onDragStart?.(value);\n      // 监测数据更新并执行函数\n      if (this.value != value) {\n        this.drag(value);\n      }\n\n      const mousemoveEvent = (event: MouseEvent) => {\n        const e: MouseEvent = event;\n        // 鼠标X位置\n        const { clientX } = e;\n        // 鼠标移动时取消默认行为，避免选中其他元素或文字\n        e.preventDefault();\n        e.stopPropagation();\n        // 获取鼠标移动后滑块应该移动到的位置\n        let nLength = clientX - nLeft - thumbTrackX;\n        // 限制滑块移动位置\n        nLength = nLength >= nMax ? nMax : nLength <= 0 ? 0 : nLength;\n\n        const value = this.step\n          ? Math.round(((nLength / nMax) * (this.max - this.min)) / this.step) * this.step +\n            this.min\n          : (nLength / nMax) * (this.max - this.min) + this.min;\n        // 监测数据更新并执行函数\n        if (this.value != value) {\n          this.drag(value);\n        }\n        window.getSelection()?.removeAllRanges();\n      };\n\n      const removeEvent = (event: MouseEvent) => {\n        const e: MouseEvent = event;\n        e.stopPropagation();\n        window.getSelection()?.removeAllRanges();\n        document.removeEventListener(\"mousemove\", mousemoveEvent);\n        document.removeEventListener(\"mouseup\", removeEvent);\n        this.onDragEnd?.(value);\n      };\n\n      document.addEventListener(\"mousemove\", mousemoveEvent);\n      document.addEventListener(\"mouseup\", removeEvent);\n    });\n\n    // 设置滑块初始位置\n    this.setValue(this.value);\n  }\n\n  /** 设置滑动条值 */\n  public setValue(value: number) {\n    this.value = value <= this.min ? this.min : value >= this.max ? this.max : value;\n    // 计算滑块位置\n    const per = (this.value - this.min) / (this.max - this.min);\n    // 修改滑块位置\n    this.$thumb.style.left = `${per * 100}%`;\n    // 修改滑动痕迹高度\n    this.$bar.style.width = `${per * 100}%`;\n    // 触发数据更改事件\n    this.onChange?.(this.value);\n  }\n\n  /** 拖动滑动条到特定的值 */\n  public drag(value: number) {\n    this.setValue(value);\n    // 触发拖动事件\n    this.onDrag?.(this.value);\n  }\n}\n","import { createElement } from \"@/utils\";\r\n\r\nconst templateHTML = /*html*/ `\r\n  <div\r\n    class=\"mpui-slider-track\"\r\n    style=\"\r\n      position: absolute;\r\n      height: 100%;\r\n      left: 50%;\r\n      transform: translateX(-50%);\r\n      display: flex;\r\n      justify-content: center;\r\n      align-items: center\r\n    \"\r\n  >\r\n    <div class=\"mpui-slider-bar\" style=\"position: absolute; bottom: 0; width: 100%\"></div>\r\n    <div class=\"mpui-slider-thumb-track\" style=\"width: 0px\">\r\n      <div\r\n        class=\"mpui-slider-thumb\"\r\n        style=\"position: absolute; transform: translate(-50%, -50%)\"\r\n      ></div>\r\n    </div>\r\n  </div>\r\n`;\r\n\r\ninterface SliderVerticalOptions {\r\n  /** 挂载容器 */\r\n  container: HTMLElement;\r\n  /** 最小值 */\r\n  min: number;\r\n  /** 最大值 */\r\n  max: number;\r\n  /** 步长(若不填或为0，则没有步长限制) */\r\n  step?: number;\r\n  /** 默认值(不填的情况下默认值为0) */\r\n  value?: number;\r\n  /** 数值更改时触发 */\r\n  onChange?: (value: number) => void;\r\n  /** 拖动引发数值更改时触发 */\r\n  onDrag?: (value: number) => void;\r\n  /** 开始拖动时触发 */\r\n  onDragStart?: (value: number) => void;\r\n  /** 结束拖动时触发 */\r\n  onDragEnd?: (value: number) => void;\r\n}\r\n\r\n/** 横向滑动条 */\r\nexport class SliderVertical implements SliderVerticalOptions {\r\n  readonly container: HTMLElement;\r\n  readonly min: number;\r\n  readonly max: number;\r\n  /** 步长 */\r\n  readonly step: number;\r\n  /** 数值 */\r\n  value: number;\r\n  onChange?: (value: number) => void;\r\n  onDragStart?: (value: number) => void;\r\n  onDragEnd?: (value: number) => void;\r\n  onDrag?: (value: number) => void;\r\n  // 部件\r\n  $el: HTMLElement;\r\n  $track: HTMLElement;\r\n  $bar: HTMLElement;\r\n  $thumbTrack: HTMLElement;\r\n  $thumb: HTMLElement;\r\n\r\n  constructor({\r\n    container,\r\n    min,\r\n    max,\r\n    step,\r\n    value = 0,\r\n    onChange,\r\n    onDragStart,\r\n    onDragEnd,\r\n    onDrag,\r\n  }: SliderVerticalOptions) {\r\n    this.container = container;\r\n    this.min = min;\r\n    this.max = max;\r\n    this.step = step || 0;\r\n    this.value = isNaN(value) ? value : Number(value);\r\n    this.onChange = onChange;\r\n    this.onDragStart = onDragStart;\r\n    this.onDragEnd = onDragEnd;\r\n    this.onDrag = onDrag;\r\n\r\n    this.$el = createElement(\r\n      \"div\",\r\n      {\r\n        class: \"mpui-slider mpui-slider-vertical\",\r\n        style: \"position: relative; width: 100%; height: 100%\",\r\n      },\r\n      templateHTML\r\n    );\r\n    this.$track = this.$el.querySelector(\".mpui-slider-track\")!; // 滑动条轨道\r\n    this.$bar = this.$track.querySelector(\".mpui-slider-bar\")!; // 滑动条痕迹\r\n    this.$thumbTrack = this.$track.querySelector(\".mpui-slider-thumb-track\")!; // 滑块轨道\r\n    this.$thumb = this.$track.querySelector(\".mpui-slider-thumb\")!; // 滑块\r\n\r\n    this.container.appendChild(this.$el);\r\n\r\n    // 滑动条事件\r\n    // 点击鼠标事件\r\n    this.$el.addEventListener(\"mousedown\", (event: MouseEvent) => {\r\n      const e: MouseEvent = event;\r\n      // 鼠标Y位置\r\n      const { clientY } = e;\r\n      // 滑块长度\r\n      const trackLength = this.$track.offsetHeight;\r\n      // 滑块可滑动距离\r\n      let nMax = this.$thumbTrack.offsetHeight;\r\n      nMax = nMax || trackLength;\r\n      // 滑块轨道与总轨道距离差\r\n      const thumbTrackY = (trackLength - nMax) / 2;\r\n      // 滑动条位置\r\n      const nTop = this.$el.getBoundingClientRect().top;\r\n      // 计算滑块位置\r\n      let nLength = nMax - (clientY - nTop - thumbTrackY);\r\n      // 限制滑块移动位置\r\n      nLength = nLength >= nMax ? nMax : nLength <= 0 ? 0 : nLength;\r\n      const value = this.step\r\n        ? Math.round(((nLength / nMax) * (this.max - this.min)) / this.step) * this.step + this.min\r\n        : (nLength / nMax) * (this.max - this.min) + this.min;\r\n      // 开始滑动事件\r\n      this.onDragStart?.(value);\r\n      // 监测数据更新并执行函数\r\n      if (this.value != value) {\r\n        this.drag(value);\r\n      }\r\n\r\n      const mousemoveEvent = (event: MouseEvent) => {\r\n        const e: MouseEvent = event;\r\n        // 鼠标X位置\r\n        const { clientY } = e;\r\n        // 鼠标移动时取消默认行为，避免选中其他元素或文字\r\n        e.preventDefault();\r\n        e.stopPropagation();\r\n        // 获取鼠标移动后滑块应该移动到的位置\r\n        let nLength = nMax - (clientY - nTop - thumbTrackY);\r\n        // 限制滑块移动位置\r\n        nLength = nLength >= nMax ? nMax : nLength <= 0 ? 0 : nLength;\r\n\r\n        const value = this.step\r\n          ? Math.round(((nLength / nMax) * (this.max - this.min)) / this.step) * this.step +\r\n            this.min\r\n          : (nLength / nMax) * (this.max - this.min) + this.min;\r\n        // 监测数据更新并执行函数\r\n        if (this.value != value) {\r\n          this.drag(value);\r\n        }\r\n        window.getSelection()?.removeAllRanges();\r\n      };\r\n      const removeEvent = (event: MouseEvent) => {\r\n        const e: MouseEvent = event;\r\n        e.stopPropagation();\r\n        window.getSelection()?.removeAllRanges();\r\n        document.removeEventListener(\"mousemove\", mousemoveEvent);\r\n        document.removeEventListener(\"mouseup\", removeEvent);\r\n        this.onDragEnd?.(value);\r\n      };\r\n\r\n      document.addEventListener(\"mousemove\", mousemoveEvent);\r\n      document.addEventListener(\"mouseup\", removeEvent);\r\n    });\r\n    // 设置滑块初始位置\r\n    this.setValue(this.value);\r\n  }\r\n\r\n  /** 设置滑动条值 */\r\n  setValue(value: number) {\r\n    // this.value = value <= this.min ? this.min : value >= this.max ? this.max : value;\r\n    this.value = Math.max(Math.min(value, this.max), this.min);\r\n    // 计算滑块位置\r\n    const per = (this.value - this.min) / (this.max - this.min);\r\n    // 修改滑块位置\r\n    this.$thumb.style.top = `${(1 - per) * 100}%`;\r\n    // 修改滑动痕迹高度\r\n    this.$bar.style.height = `${Math.max(Math.min(per, 1), 0) * 100}%`;\r\n    // 执行相应函数\r\n    this.onChange?.(value);\r\n  }\r\n\r\n  /** 拖动滑动条到特定的值 */\r\n  private drag(value: number) {\r\n    this.setValue(value);\r\n    // 触发拖动事件\r\n    this.onDrag?.(this.value);\r\n  }\r\n}\r\n","import { html, render, TemplateResult } from \"lit-html\";\r\n\r\nconst templateWrap = ({\r\n  list,\r\n  template,\r\n}: {\r\n  list: PickerOptionsItem[];\r\n  template?: PickerItemTemplate;\r\n}) => html`\r\n  <ul class=\"mpui-picker\">\r\n    ${list.map(\r\n      (item, index) => html`\r\n        <li class=\"mpui-picker-item\" data-value=\"${item.value}\">\r\n          ${template?.(item, index) || item.label || item.value}\r\n        </li>\r\n      `\r\n    )}\r\n  </ul>\r\n`;\r\n\r\n/** 选择器函数 */\r\ntype PickerItemTemplate = (item: PickerOptionsItem, index?: number) => string | TemplateResult;\r\n\r\ninterface PickerOptionsItem {\r\n  value: string | number;\r\n  label?: string;\r\n  disabled?: boolean;\r\n  [key: string]: any;\r\n}\r\n\r\ninterface PickerOptions {\r\n  /** 挂载容器 */\r\n  container: HTMLElement;\r\n  /** 选择列表 */\r\n  list: PickerOptionsItem[];\r\n  /** 选择项标签模板 */\r\n  template?: PickerItemTemplate;\r\n  /** 默认值(不填的情况下默认值为undefined) */\r\n  value?: string | number;\r\n  /** 值更改时触发 */\r\n  onChange?: (value?: string | number) => void;\r\n  /** 选择某一项时触发 */\r\n  onPick?: (value?: string | number) => void;\r\n  /** 相等条件 */\r\n  condition?: (item: string, value?: string | number) => boolean;\r\n}\r\n\r\n/** 单选选择器 */\r\nexport class Picker implements PickerOptions {\r\n  readonly container: HTMLElement;\r\n\r\n  readonly template?: PickerItemTemplate;\r\n\r\n  list: PickerOptionsItem[];\r\n\r\n  /** 已选值 */\r\n  value?: string | number;\r\n\r\n  onChange?: (value?: string | number) => void;\r\n\r\n  onPick?: (value?: string | number) => void;\r\n\r\n  $el!: HTMLElement;\r\n\r\n  /** 相等条件 */\r\n  condition?: (item: string, value?: string | number) => boolean;\r\n\r\n  /** 选择项标签集合 */\r\n  private $items!: NodeListOf<HTMLElement>;\r\n\r\n  constructor({ container, value, onChange, onPick, list, template, condition }: PickerOptions) {\r\n    this.container = container;\r\n    this.list = list;\r\n    this.value = value;\r\n    this.onChange = onChange; // 更新数据时需要执行的函数\r\n    this.onPick = onPick; // 更新数据时需要执行的函数\r\n    this.template = template;\r\n    this.condition = condition;\r\n    this.reload();\r\n  }\r\n\r\n  /** 重载，一般用于列表项更改 */\r\n  public reload(value?: string | number) {\r\n    render(templateWrap({ list: this.list, template: this.template }), this.container);\r\n    this.$el = this.container.querySelector(\".mpui-picker\")!;\r\n    this.$items = this.$el.querySelectorAll(\".mpui-picker-item\"); // 标签集合\r\n    this.$items.forEach((item) => {\r\n      item.addEventListener(\"click\", () => {\r\n        this.pick(item.getAttribute(\"data-value\") || undefined);\r\n      });\r\n    });\r\n    this.setValue(value ?? this.value);\r\n  }\r\n\r\n  /** 设置值 */\r\n  public setValue(value?: string | number) {\r\n    this.$items.forEach((n, i) => {\r\n      if (\r\n        this.condition\r\n          ? this.condition(n.getAttribute(\"data-value\")!, value)\r\n          : n.getAttribute(\"data-value\") == value\r\n      ) {\r\n        n.classList.add(\"is-checked\");\r\n      } else {\r\n        n.classList.remove(\"is-checked\");\r\n      }\r\n    });\r\n    this.value = value;\r\n    this.onChange?.(value);\r\n  }\r\n\r\n  /** 点选一个选项 */\r\n  public pick(value?: string) {\r\n    this.setValue(value);\r\n    this.onPick?.(value);\r\n  }\r\n}\r\n","import { html, render, TemplateResult } from \"lit-html\";\r\n\r\nconst templateWrap = ({\r\n  list,\r\n  template,\r\n}: {\r\n  list: PickerOptionsItem[];\r\n  template?: PickerItemTemplate;\r\n}) => html`\r\n  <ul class=\"mpui-picker\">\r\n    ${list.map(\r\n      (item, index) => html`\r\n        <li class=\"mpui-picker-item\" data-value=\"${item.value}\">\r\n          ${template?.(item, index) || item.label || item.value}\r\n        </li>\r\n      `\r\n    )}\r\n  </ul>\r\n`;\r\n\r\n/** 选择器函数 */\r\ntype PickerItemTemplate = (item: PickerOptionsItem, index?: number) => string | TemplateResult;\r\n\r\ninterface PickerOptionsItem {\r\n  value: string;\r\n  label?: string;\r\n  disabled?: boolean;\r\n  [key: string]: any;\r\n}\r\n\r\ninterface MultiPickerOptions {\r\n  /** 绑定的dom对象 */\r\n  container: HTMLElement;\r\n  /** 选择列表 */\r\n  list: PickerOptionsItem[];\r\n  /** 选择项标签模板 */\r\n  template?: PickerItemTemplate;\r\n  /** 默认值(不填的情况下默认值为[]) */\r\n  value?: string[];\r\n  /** 值更改时触发 */\r\n  onChange?: (value: string[]) => void;\r\n  /** 选择/取消选择某一项时触发 */\r\n  onToggle?: (value: string, flag: boolean) => void;\r\n}\r\n\r\n/** 多项选择器 */\r\nexport class MultiPicker implements MultiPickerOptions {\r\n  readonly container: HTMLElement;\r\n\r\n  readonly template?: PickerItemTemplate;\r\n\r\n  list: PickerOptionsItem[];\r\n\r\n  valueSet: Set<string>;\r\n\r\n  /** 已选值 */\r\n  get value() {\r\n    return [...this.valueSet];\r\n  }\r\n\r\n  onChange?: (value: string[]) => void;\r\n\r\n  onToggle?: (value: string, flag: boolean) => void;\r\n\r\n  $el!: HTMLElement;\r\n\r\n  /** 选择项标签集合 */\r\n  private $items!: NodeListOf<HTMLElement>;\r\n\r\n  constructor({ container, value = [], list, onChange, onToggle }: MultiPickerOptions) {\r\n    this.container = container;\r\n    this.list = list;\r\n    this.valueSet = new Set(value);\r\n    this.onChange = onChange; // 更新数据时需要执行的函数\r\n    this.onToggle = onToggle; // 更新数据时需要执行的函数\r\n    this.reload();\r\n  }\r\n\r\n  /** 重载，一般用于列表项更改 */\r\n  public reload(value?: string[]) {\r\n    render(templateWrap({ list: this.list, template: this.template }), this.container);\r\n    this.$el = this.container.querySelector(\".mpui-picker\")!;\r\n    this.$items = this.$el.querySelectorAll(\".mpui-picker-item\"); // 标签集合\r\n    this.$items.forEach((item) => {\r\n      item.addEventListener(\"click\", () => {\r\n        this.toggle(item.getAttribute(\"data-value\")!);\r\n      });\r\n    });\r\n    this.setValue(value ?? this.value);\r\n  }\r\n\r\n  /** 设置值 */\r\n  public setValue(value: string[]) {\r\n    this.valueSet = new Set(value);\r\n    this.$items.forEach((n, i) => {\r\n      if (this.valueSet.has(n.getAttribute(\"data-value\")!)) {\r\n        n.classList.add(\"is-checked\");\r\n      } else {\r\n        n.classList.remove(\"is-checked\");\r\n      }\r\n    });\r\n    this.onChange?.(value);\r\n  }\r\n\r\n  /** 切换一个选项的选择状态 */\r\n  public toggle(value: string, flag?: boolean) {\r\n    const b = flag == null ? !this.valueSet.has(value) : flag;\r\n    if (b) {\r\n      this.valueSet.add(value);\r\n    } else {\r\n      this.valueSet.delete(value);\r\n    }\r\n    this.$items.forEach((n, i) => {\r\n      if (n.getAttribute(\"data-value\") == value) {\r\n        n.classList.toggle(\"is-checked\", b);\r\n      }\r\n    });\r\n    this.onChange?.(this.value);\r\n    this.onToggle?.(value, b);\r\n  }\r\n}\r\n","import { html, render } from \"lit-html\";\r\n\r\nconst templateWrap = ({ label }: { label?: string }) =>\r\n  html` <div class=\"mpui-switch\">${label}</div> `;\r\n\r\ninterface SwitchOptions {\r\n  /** 挂载容器 */\r\n  container: HTMLElement;\r\n  /** 标签 */\r\n  label?: string;\r\n  /** 不可点选 */\r\n  disabled?: boolean;\r\n  /** 默认值(不填的情况下默认值为false) */\r\n  value?: boolean;\r\n  /** 值更改时触发 */\r\n  onChange?: (value: boolean) => void;\r\n  /** 切换状态时触发 */\r\n  onToggle?: (value: boolean) => void;\r\n}\r\n\r\n/** 开关 */\r\nexport class Switch implements SwitchOptions {\r\n  readonly container: HTMLElement;\r\n\r\n  onChange?: (value: boolean) => void;\r\n\r\n  onToggle?: (value: boolean) => void;\r\n\r\n  label?: string;\r\n\r\n  /** 当前值 */\r\n  value: boolean;\r\n\r\n  $el: HTMLElement;\r\n\r\n  constructor({ container, value = false, onChange, onToggle }: SwitchOptions) {\r\n    this.container = container;\r\n    this.value = value;\r\n    this.onChange = onChange; // 更新数据时需要执行的函数\r\n    this.onToggle = onToggle;\r\n    // 注入模板\r\n    render(templateWrap({ label: this.label }), this.container);\r\n\r\n    this.$el = this.container.querySelector(\".mpui-switch\")!;\r\n    this.$el.addEventListener(\"click\", () => {\r\n      this.toggle(!this.value);\r\n    });\r\n\r\n    this.setValue(this.value);\r\n  }\r\n\r\n  /** 设置开关状态 */\r\n  public setValue(value: boolean) {\r\n    this.value = value;\r\n    this.$el.classList.toggle(\"is-checked\", value);\r\n    this.onChange?.(value);\r\n  }\r\n\r\n  /** 点按开关 */\r\n  public toggle(value = !this.value) {\r\n    this.setValue(value);\r\n    this.onToggle?.(value);\r\n  }\r\n}\r\n","import { html, render } from \"lit-html\";\r\n\r\nconst templateWrap = ({ label }: { label?: string }) => html`\r\n  <div class=\"mpui-checkbox\">\r\n    <div class=\"mpui-checkbox-icon\"></div>\r\n    <div class=\"mpui-checkbox-label\">${label}</div>\r\n  </div>\r\n`;\r\n\r\ninterface CheckboxOptions {\r\n  /** 挂载容器 */\r\n  container: HTMLElement;\r\n  /** 标签 */\r\n  label?: string;\r\n  /** 不可点选 */\r\n  disabled?: boolean;\r\n  /** 默认值(不填的情况下默认值为false) */\r\n  value?: boolean;\r\n  /** 值更改时触发 */\r\n  onChange?: (value: boolean) => void;\r\n  /** 切换状态时触发 */\r\n  onToggle?: (value: boolean) => void;\r\n}\r\n\r\n/** 开关 */\r\nexport class Checkbox implements CheckboxOptions {\r\n  readonly container: HTMLElement;\r\n\r\n  onChange?: (value: boolean) => void;\r\n\r\n  onToggle?: (value: boolean) => void;\r\n\r\n  label?: string;\r\n\r\n  /** 当前值 */\r\n  value: boolean;\r\n\r\n  $el: HTMLElement;\r\n\r\n  constructor({ container, value = false, onChange, onToggle, label }: CheckboxOptions) {\r\n    this.container = container;\r\n    this.value = value;\r\n    this.onChange = onChange; // 更新数据时需要执行的函数\r\n    this.onToggle = onToggle;\r\n    this.label = label;\r\n    // 注入模板\r\n    render(templateWrap({ label: this.label }), this.container);\r\n\r\n    this.$el = this.container.querySelector(\".mpui-checkbox\")!;\r\n    this.$el.addEventListener(\"click\", () => {\r\n      this.toggle();\r\n    });\r\n\r\n    this.setValue(this.value);\r\n  }\r\n\r\n  /** 设置开关状态 */\r\n  public setValue(value: boolean) {\r\n    this.value = value;\r\n    this.$el.classList.toggle(\"is-checked\", value);\r\n    this.onChange?.(value);\r\n  }\r\n\r\n  /** 点按开关 */\r\n  public toggle(value = !this.value) {\r\n    this.setValue(value);\r\n    this.onToggle?.(value);\r\n  }\r\n}\r\n","export { Player } from \"@/player\";\nexport * from \"@/plugin\";\nexport * from \"@/config\";\nexport * as Utils from \"@/utils\";\nexport * as Components from \"@/components\";\nimport { Player } from \"@core\";\nimport \"@css/index.scss\";\n\nconsole.log(\n  `${\"\\n\"} %c mfunsPlayer v${Player.version} ${Player.gitHash} %c https://github.com/Mfuns-cn ${\"\\n\"}${\"\\n\"}`,\n  \"color: #fff; background: #7b7ff7; padding:5px 0;\",\n  \"background: #f5f5f5; padding:5px 0;\"\n);\n","/** 虚拟列表 */\n\nexport class VirtualList<T> {\n  /** 需要绑定的DOM对象 */\n  $el: HTMLElement;\n  $content: HTMLElement;\n  /** 列表数据 */\n  data: T[] = [];\n  /** 拉取列表数据 () => Object */\n  getData: () => T[];\n  /** 列表项高度 */\n  itemHeight: number;\n  /** 列表项DOM生成函数 */\n  createItem: (item: T, i: number, array: T[]) => HTMLElement;\n  /** 溢出范围 */\n  overflow: number;\n  /** 滚动距离 */\n  scrollTop = 0;\n  /** 列表渲染起点 */\n  renderStart = -1;\n  /** 列表渲染终点 */\n  renderEnd = -1;\n  /** 可视范围起点 */\n  viewStart = 0;\n  /** 可视范围终点 */\n  viewEnd = 0;\n  /** 节流开关 */\n  throttle = false;\n  /** 已清空状态 */\n  cleared = false;\n  constructor({\n    el,\n    getData,\n    itemHeight,\n    createItem,\n    overflow = 0,\n  }: {\n    el: HTMLElement;\n    getData: () => T[];\n    itemHeight: number;\n    createItem: (item: T, i: number, array: T[]) => HTMLElement;\n    overflow?: number;\n  }) {\n    this.$el = el;\n    this.getData = getData;\n    this.itemHeight = itemHeight;\n    this.createItem = createItem;\n    this.overflow = overflow;\n\n    this.renderStart = -1;\n    this.renderEnd = -1;\n    this.viewStart = 0;\n    this.viewEnd = 0;\n    this.throttle = false;\n    this.cleared = false;\n\n    this.$el.classList.add(\"vlist-container\");\n    this.$content = document.createElement(\"div\");\n    this.$content.classList.add(\"vlist-content\");\n    this.$el.appendChild(this.$content);\n\n    this.$el.addEventListener(\"scroll\", () => {\n      this.cleared || this.handleScroll();\n    });\n\n    this.reload();\n  }\n  /** 重载列表 */\n  reload() {\n    this.clear();\n    this.data = this.getData();\n    console.log(this.data);\n    this.renderStart = -1;\n    this.renderEnd = -1;\n    this.viewStart = 0;\n    this.viewEnd = 0;\n    this.throttle = false;\n    this.handleScroll();\n    this.cleared = false;\n  }\n  /** 更新列表 */\n  update() {\n    this.data = this.getData();\n    this.handleScroll();\n  }\n  handleScroll() {\n    if (!this.throttle) {\n      const clientH = this.$el.clientHeight;\n      const scrollTop = this.$el.scrollTop;\n      clientH && (this.scrollTop = scrollTop);\n      this.viewStart = this.getViewStart(scrollTop);\n      this.viewEnd = this.getViewEnd(scrollTop, clientH);\n      if (this.viewStart <= this.renderStart || this.viewEnd >= this.renderEnd) {\n        this.render(clientH, scrollTop);\n        // console.log(`${this.renderStart} - ${this.renderEnd}`)\n      }\n      // console.log(`${scrollTop} + ${clientH} @ ${this.viewStart} - ${this.viewEnd} # ${this.renderStart} - ${this.renderEnd}`)\n    } else {\n      // console.log(\"none\")\n    }\n  }\n  render(clientH: number, scrollTop: number) {\n    // 保存原渲染范围\n    const oldRenderStart = this.renderStart;\n    const oldRenderEnd = this.renderEnd;\n    // 获取新渲染范围\n    this.renderStart = this.getViewStart(scrollTop) - this.overflow;\n    this.renderEnd = this.getViewEnd(scrollTop, clientH) + this.overflow;\n    // console.log(`old ${oldRenderStart}-${oldRenderEnd} new ${this.renderStart}-${this.renderEnd}`)\n    // 与列表前段比较\n    if (this.renderStart < oldRenderStart) {\n      // 列表前段范围扩张, 添加新列表项\n      const beforeItems = document.createDocumentFragment();\n      const addFrom = Math.max(this.renderStart, 0);\n      const addTo = Math.min(oldRenderStart - 1, this.renderEnd, this.data.length - 1);\n      // console.log(`add ${addFrom}-${addTo}`)\n      for (let i = addFrom; i <= addTo; i++) {\n        beforeItems.appendChild(this.createItem(this.data[i], i, this.data));\n        // console.log(\"add: \" + i)\n      }\n      this.$content.insertBefore(beforeItems, this.$content.firstElementChild);\n    } else {\n      // 若不扩张, 则删除多余的列表项\n      const removeFrom = Math.max(oldRenderStart, 0);\n      const removeTo = Math.min(this.renderStart - 1, oldRenderEnd);\n      // console.log(`remove ${removeFrom}-${removeTo}`)\n      for (let i = removeFrom; i <= removeTo; i++) {\n        const child = this.$content.firstElementChild;\n        child && this.$content.removeChild(child);\n      }\n    }\n\n    // 与列表后段比较\n    if (this.renderEnd > oldRenderEnd) {\n      // 列表后段范围扩张, 添加新列表项\n      const afterItems = document.createDocumentFragment();\n      const addFrom = Math.max(oldRenderEnd + 1, this.renderStart);\n      const addTo = Math.min(this.renderEnd, this.data.length - 1);\n      // console.log(`add ${addFrom}-${addTo}`)\n      for (let i = addFrom; i <= addTo; i++) {\n        afterItems.appendChild(this.createItem(this.data[i], i, this.data));\n        // console.log(\"add: \" + i)\n      }\n      this.$content.appendChild(afterItems);\n    } else {\n      // 若不扩张, 则删除多余的列表项\n      const removeFrom = Math.min(oldRenderEnd, this.data.length - 1);\n      const removeTo = Math.max(this.renderEnd + 1, oldRenderStart);\n      // console.log(`remove ${removeFrom}-${removeTo}`)\n      for (let i = removeFrom; i >= removeTo; i--) {\n        const child = this.$content.lastElementChild;\n        child && this.$content.removeChild(child);\n        // console.log(\"remove: \" + i)\n      }\n    }\n\n    // 设定占位边距\n    this.$content.style.paddingTop = `${\n      this.renderStart > 0 ? this.renderStart * this.itemHeight : 0\n    }px`;\n    this.$content.style.paddingBottom = `${\n      this.renderEnd < this.data.length - 1\n        ? (this.data.length - this.renderEnd - 1) * this.itemHeight\n        : 0\n    }px`;\n  }\n  getViewStart(scrollTop: number) {\n    return Math.floor(scrollTop / this.itemHeight);\n  }\n  getViewEnd(scrollTop: number, clientH: number) {\n    return Math.ceil((scrollTop + clientH) / this.itemHeight) - 1;\n  }\n  // 清空列表\n  clear() {\n    this.data = [];\n    this.$content.innerHTML = \"\";\n    this.$content.style.paddingTop = \"0px\";\n    this.$content.style.paddingBottom = \"0px\";\n    this.cleared = true;\n  }\n  locateStart(n: number) {\n    // 定位到某项开头\n    this.scrollTo(n * this.itemHeight);\n  }\n  locateEnd(n: number) {\n    // 定位到某项末尾\n    this.scrollTo(n * this.itemHeight - this.$el.clientHeight);\n  }\n  scrollTo(top: number) {\n    this.$el.scrollTo({\n      top,\n      behavior: \"auto\",\n    });\n  }\n}\n","import { debounce, secondToTime } from \"@/utils\";\nimport { dateFormat } from \"@/utils/index\";\nimport { DanmakuItem } from \"@plugins/danmaku/types\";\nimport { Player } from \"@/player\";\nimport { classPrefix } from \"@/config\";\nimport { html, render } from \"lit-html\";\nimport { VirtualList } from \"./VirtualList\";\nimport \"./style.scss\";\nimport Danmaku from \"@plugins/danmaku/danmaku\";\nimport { PanelPlugin } from \"@/plugin\";\n\ndeclare module \"@core\" {\n  interface PlayerEventMap {\n    \"danmakuList:autoScrollChange\": (flag: boolean) => void;\n    \"danmakuList:select\": (dan: DanmakuItem[]) => void;\n  }\n  interface PlayerPlugins {\n    danmakuList?: DanmakuList;\n  }\n}\n\nconst template = (clearSelect: () => void) => html`\n  <div class=\"${classPrefix}-danmakulist\">\n    <div class=\"${classPrefix}-danmakulist-main\">\n      <div class=\"${classPrefix}-danmakulist-head\">\n        <div class=\"list-column col-time\">时间</div>\n        <div class=\"list-column col-content\">弹幕内容</div>\n        <div class=\"list-column col-date\">发送时间</div>\n      </div>\n      <div class=\"${classPrefix}-danmakulist-select\">\n        <div class=\"${classPrefix}-danmakulist-select-info\"></div>\n        <div class=\"${classPrefix}-danmakulist-select-operate\">\n          <div class=\"list-operate-btn\" @click=${clearSelect}>取消选择</div>\n        </div>\n      </div>\n      <div class=\"${classPrefix}-danmakulist-container\"></div>\n      <div class=\"${classPrefix}-danmakulist-status\">\n        <div class=\"status-loading-text\">弹幕列表装填中……</div>\n        <div class=\"status-failed-text\">弹幕加载失败 X_X</div>\n        <div class=\"status-empty-text\">还没有弹幕哦，快来发弹幕^_^</div>\n      </div>\n    </div>\n    <div class=\"${classPrefix}-danmakulist-foot\">\n      <div class=\"${classPrefix}-danmakulist-foot-left\">\n        <span class=\"${classPrefix}-danmakulist-autoscroll\">列表滚动[关]</span>\n      </div>\n      <div class=\"${classPrefix}-danmakulist-foot-right\"></div>\n    </div>\n  </div>\n`;\n\nconst getDanmakuListItem = (\n  danmaku: DanmakuItem,\n  index: number,\n  {\n    operation,\n    onClick,\n    onDblclick,\n    selected,\n    focused,\n    title,\n  }: {\n    operation: (dm: DanmakuItem) => [string, (dm: DanmakuItem) => void, unknown][];\n    onClick: (e: MouseEvent, dm: DanmakuItem) => void;\n    onDblclick: (e: MouseEvent, dm: DanmakuItem) => void;\n    selected: (dm: DanmakuItem) => boolean;\n    focused: (dm: DanmakuItem) => boolean;\n    title: (dm: DanmakuItem) => string;\n  }\n) => {\n  const t = html`\n    <div\n      class=\"${`list-row ${selected(danmaku) ? \"is-selected\" : \"\"} ${\n        focused(danmaku) ? \"is-focused\" : \"\"\n      }`.trim()}\"\n      data-index=\"${index}\"\n      data-mode=\"${danmaku.mode}\"\n      @dblclick=${(e: MouseEvent) => {\n        onDblclick(e, danmaku);\n      }}\n      @click=${(e: MouseEvent) => {\n        onClick(e, danmaku);\n      }}\n      title=\"${title(danmaku)}\"\n    >\n      <div class=\"list-cell col-time\">${secondToTime(danmaku.time)}</div>\n      <div class=\"list-cell col-content\">${danmaku.content}</div>\n      <div class=\"list-cell col-date\">\n        ${danmaku.date ? dateFormat(new Date(danmaku.date * 1000), \"yy-MM-dd HH:mm\") : \"-\"}\n      </div>\n      ${operation.length\n        ? html`<div class=\"list-operate\" title=\"\">\n            ${operation(danmaku).map(\n              ([label, onClick]) =>\n                html`<div\n                  class=\"list-operate-btn\"\n                  @click=${(e: MouseEvent) => {\n                    e.stopPropagation();\n                    onClick(danmaku);\n                  }}\n                >\n                  ${label}\n                </div>`\n            )}\n          </div>`\n        : \"\"}\n    </div>\n  `;\n  const fragment = new DocumentFragment();\n  render(t, fragment);\n  return fragment.firstElementChild! as HTMLElement;\n};\n\nexport default class DanmakuList extends PanelPlugin {\n  static readonly pluginName = \"danmakuList\";\n\n  title = \"弹幕列表\";\n  player: Player;\n  danmaku: Danmaku;\n  data: DanmakuItem[] = [];\n  selected: DanmakuItem[] = [];\n  private focused: DanmakuItem | null = null;\n  sortedBy: keyof DanmakuItem = \"time\";\n  sortOrder = 1 | -1;\n\n  list!: VirtualList<DanmakuItem>;\n  /** 是否随播放自动滚动 */\n  autoScroll = true;\n  /** 自动滚动冻结 */\n  frozen = false;\n\n  $main: HTMLElement;\n  $container: HTMLElement;\n  $status: HTMLElement;\n  $colTime: HTMLElement;\n  $colDate: HTMLElement;\n  $colContent: HTMLElement;\n  $autoscroll: HTMLElement;\n\n  $select: HTMLElement;\n  $selectInfo: HTMLElement;\n\n  constructor(player: Player) {\n    const fragment = new DocumentFragment();\n    render(\n      template(() => this.select([])),\n      fragment\n    );\n    super(player, fragment.querySelector(`.${classPrefix}-danmakulist`)!);\n    this.player = player;\n    this.danmaku = player.plugins.danmaku!;\n    this.$main = this.$(`.${classPrefix}-danmakulist-main`)!;\n    this.$container = this.$(`.${classPrefix}-danmakulist-container`)!;\n    this.$status = this.$(`.${classPrefix}-danmakulist-status`)!;\n    this.$colTime = this.$(\".col-time\")!;\n    this.$colDate = this.$(\".col-date\")!;\n    this.$colContent = this.$(\".col-content\")!;\n    this.$autoscroll = this.$(`.${classPrefix}-danmakulist-autoscroll`)!;\n\n    this.$select = this.$(`.${classPrefix}-danmakulist-select`)!;\n    this.$selectInfo = this.$(`.${classPrefix}-danmakulist-select-info`)!;\n\n    this.$colTime.onclick = () => {\n      this.setAutoScroll(false);\n      if (this.sortedBy == \"time\") {\n        this.sort(\"time\", -this.sortOrder);\n      } else {\n        this.sort(\"time\", 1);\n      }\n    };\n    this.$colDate.onclick = () => {\n      this.setAutoScroll(false);\n      if (this.sortedBy == \"date\") {\n        this.sort(\"date\", -this.sortOrder);\n      } else {\n        this.sort(\"date\", 1);\n      }\n    };\n    this.$colContent.onclick = () => {\n      this.setAutoScroll(false);\n      if (this.sortedBy == \"content\") {\n        this.sort(\"content\", -this.sortOrder);\n      } else {\n        this.sort(\"content\", 1);\n      }\n    };\n    this.$autoscroll.onclick = () => {\n      this.setAutoScroll(!this.autoScroll);\n    };\n    this.player.on(\"danmakuList:autoScrollChange\", (flag) => {\n      if (flag) {\n        this.$autoscroll.innerText = \"列表滚动[开]\";\n      } else {\n        this.$autoscroll.innerText = \"列表滚动[关]\";\n      }\n    });\n    if (this.autoScroll) {\n      this.player.emit(\"danmakuList:autoScrollChange\", true);\n    }\n    this.player.on(\"danmakuList:select\", (dm) => {\n      const num = dm.length;\n      this.$selectInfo.innerText = num ? `已选择${num}条弹幕` : \"\";\n      this.$select.classList.toggle(\"is-show\", num > 1);\n    });\n  }\n  mount(\n    el: HTMLElement,\n    opt?: { onToggle?: ((flag: boolean) => void) | undefined; onUnmount?: (() => void) | undefined }\n  ): void {\n    super.mount(el, opt);\n    const pos = this.list?.scrollTop;\n    console.log(\"mountpos: \" + pos);\n    requestAnimationFrame(() => {\n      pos != null && this.list?.scrollTo(pos);\n      -this.autoScroll && this.locateByTime(this.player.currentTime);\n    });\n  }\n  toggle(flag?: boolean | undefined): void {\n    super.toggle(flag);\n    if (this.shown) {\n      const pos = this.list?.scrollTop;\n      pos != null && this.list?.scrollTo(pos);\n      this.autoScroll && this.locateByTime(this.player.currentTime);\n    }\n  }\n  init() {\n    const api = this.plugins.danmaku?.invoke;\n    const operate = this.plugins.danmakuOperate;\n    this.list = new VirtualList({\n      el: this.$container,\n      getData: () => {\n        return this.data;\n      },\n      itemHeight: 24,\n      createItem: (danmaku, i) =>\n        getDanmakuListItem(danmaku, i, {\n          operation: (dm) => {\n            const myDanmaku = this.player.userId && dm.user == this.player.userId;\n            return [\n              [\n                \"举报\",\n                (dm: DanmakuItem) => {\n                  operate?.report(dm);\n                },\n                !myDanmaku && api?.report,\n              ],\n              [\n                \"屏蔽\",\n                (dm: DanmakuItem) => {\n                  operate?.blockUser(dm.user, true);\n                },\n                !myDanmaku && api?.blockUser,\n              ],\n              [\n                \"撤回\",\n                (dm: DanmakuItem) => {\n                  operate?.recall(dm);\n                },\n                myDanmaku && api?.recall,\n              ],\n            ].filter((v) => v[2]) as [string, (dm: DanmakuItem) => void, unknown][];\n          },\n          onClick: (e, dm) => {\n            this.clickSelect(dm, e.shiftKey, e.ctrlKey);\n          },\n          onDblclick: (e, dm) => {\n            this.player.seek(dm.time);\n          },\n          selected: (dm) => this.selected.includes(dm),\n          focused: (dm) => this.focused == dm,\n          title: (dm) =>\n            `${dm.content}\\n${\n              danmaku.date ? dateFormat(new Date(danmaku.date * 1000), \"yyyy-MM-dd HH:mm:ss\") : \"-\"\n            } @ ${secondToTime(danmaku.time, 0x0010)}`,\n        }),\n      overflow: 5,\n    });\n\n    const unFreeze = debounce(() => {\n      this.frozen = false;\n    }, 5000);\n    this.list.$el.addEventListener(\"wheel\", () => {\n      this.frozen = true;\n      unFreeze();\n    });\n    this.list.$el.addEventListener(\"mousedown\", () => {\n      this.frozen = true;\n      unFreeze();\n    });\n    this.$main.addEventListener(\"mouseleave\", () => {\n      this.frozen = false;\n    });\n    // 切换到新分P时，清空上一P弹幕\n    this.player.on(\"videoChange\", () => {\n      this.clear();\n    });\n    this.player.on(\"danmaku:add\", (dan) => {\n      this.fill(dan);\n      if (this.autoScroll) {\n        this.sort(\"time\");\n      }\n    });\n    this.player.on(\"timeupdate\", (time) => {\n      if (this.autoScroll && !this.frozen) {\n        this.locateByTime(time);\n      }\n    });\n    this.player.on(\"danmaku:select\", (dan) => {\n      this.locateByDanmaku(dan);\n      this.select([dan]);\n    });\n  }\n  /** 弹幕列表排序 */\n  sort(sortedBy: keyof DanmakuItem, sortOrder = 1) {\n    this.sortedBy = sortedBy;\n    this.sortOrder = sortOrder;\n    this.data.sort((a: any, b: any) => {\n      const at = a[this.sortedBy];\n      const bt = b[this.sortedBy];\n      // 排序\n      return at > bt ? sortOrder : at == bt ? 0 : -sortOrder;\n    });\n    this.list.reload();\n  }\n  /** 装填弹幕(重载列表) */\n  fill(dan: DanmakuItem[]) {\n    this.data = this.data.concat(dan);\n    // 弹幕列表装填\n    if (!this.data.length) {\n      this.setStatus(\"empty\");\n    } else {\n      this.reload();\n      this.setStatus();\n    }\n  }\n  /** 添加弹幕(不重载列表) */\n  add(dan: DanmakuItem[]) {\n    this.data = this.data.concat(dan);\n    // 弹幕列表装填\n    if (!this.data.length) {\n      this.setStatus(\"empty\");\n    } else {\n      this.list.update();\n      this.setStatus();\n    }\n  }\n  /** 重载弹幕列表 */\n  reload() {\n    this.sort(this.sortedBy, this.sortOrder);\n    if (this.autoScroll) {\n      this.locateByTime(this.player.currentTime);\n    }\n  }\n  clear() {\n    // 清空弹幕列表\n    this.list.clear();\n    this.data = [];\n    this.setStatus(\"loading\");\n  }\n  setStatus(status = \"\") {\n    this.$status.dataset.status = status;\n    console.log(\"弹幕加载状态\" + status);\n  }\n  /** 根据播放时间定位 */\n  locateByTime(time: number) {\n    let viewEnd = this.list.viewEnd;\n    if (this.data[viewEnd]?.time > time) {\n      // 如果列表可视区域最后一项的时间超过当前时间, 则重头开始遍历, 否则从列表可视区域最后一项遍历\n      viewEnd = 0;\n    }\n    while (this.data[viewEnd + 1]?.time <= time) {\n      // 遍历并检测下一项弹幕时间是否超过当前时间, 若超过, 则以当前弹幕为定位点\n      viewEnd++;\n    }\n    this.list.locateEnd(viewEnd);\n  }\n  /** 定位弹幕 */\n  locateByDanmaku(dan: DanmakuItem) {\n    const index = this.data.indexOf(dan);\n    if (index > -1) {\n      this.list.locateStart(index);\n      this.frozen = true;\n    }\n  }\n  setAutoScroll(flag: boolean) {\n    this.player.emit(\"danmakuList:autoScrollChange\", flag);\n    // 设置自动滚动\n    this.autoScroll = flag;\n    if (flag) {\n      this.frozen = false;\n      this.sort(\"time\");\n      this.locateByTime(this.player.currentTime);\n      this.list.handleScroll();\n    }\n  }\n  /** 设置选定状态 */\n  select(dan: DanmakuItem[], focused?: DanmakuItem) {\n    this.selected = dan;\n    const selectedIndex: number[] = [];\n    this.focused = focused || (dan.length == 1 ? dan[0] : null);\n    const focusedIndex = this.data.indexOf(this.focused!);\n    dan.forEach((dm) => {\n      const index = this.data.indexOf(dm);\n      selectedIndex.push(index);\n    });\n    for (const item of this.list.$content.children) {\n      item.classList.toggle(\n        \"is-selected\",\n        selectedIndex.includes(Number((item as HTMLElement).dataset.index))\n      );\n      item.classList.toggle(\n        \"is-focused\",\n        focusedIndex == Number((item as HTMLElement).dataset.index)\n      );\n    }\n    this.player.emit(\"danmakuList:select\", this.selected);\n  }\n  /** 设置某条弹幕的选定状态，若选定则聚焦弹幕，否则取消聚焦 */\n  private toggleSelect(dm: DanmakuItem, flag: boolean) {\n    const focusedItem = this.list.$content.querySelector(\n      `[data-index=\"${this.data.indexOf(this.focused!)}\"]`\n    );\n    const item = this.list.$content.querySelector(`[data-index=\"${this.data.indexOf(dm)}\"]`);\n    if (flag) {\n      if (!this.selected.includes(dm)) {\n        this.selected.push(dm);\n      }\n      this.focused = dm;\n      item?.classList.add(\"is-selected\");\n      item?.classList.add(\"is-focused\");\n    } else if (!flag) {\n      const index = this.selected.indexOf(dm);\n      if (index > -1) {\n        this.selected.splice(index, 1);\n      }\n      item?.classList.remove(\"is-selected\");\n      focusedItem?.classList.remove(\"is-focused\");\n    }\n    this.player.emit(\"danmakuList:select\", this.selected);\n  }\n  /** 单击选定弹幕 */\n  private clickSelect(dm: DanmakuItem, shift?: boolean, ctrl?: boolean) {\n    if (shift) {\n      // 按住shift，则以已聚焦弹幕到当前选择弹幕范围选定弹幕，若无已聚焦弹幕，则只选定该弹幕\n      // 该操作既不会取消选择已选弹幕，也不会重新设定已存在的聚焦弹幕\n      if (this.focused) {\n        const index = this.data.indexOf(dm);\n        const focusedIndex = this.data.indexOf(this.focused!);\n        if (index == -1 || focusedIndex == -1) {\n          // 若弹幕列表中没有该弹幕，或未设定已聚焦弹幕，则只选定该弹幕\n          this.select([dm]);\n        } else {\n          const from = index < focusedIndex ? index : focusedIndex;\n          const to = (index < focusedIndex ? focusedIndex : index) + 1;\n          this.select(this.data.slice(from, to), this.focused);\n        }\n      } else {\n        this.select([dm]);\n      }\n    } else if (ctrl) {\n      // 按住ctrl，则将该条弹幕添加到已选择弹幕中，若该弹幕已选择，则移除选择\n      // 选定弹幕时设定聚焦状态，移除选择时移除聚焦状态\n      this.toggleSelect(dm, !this.selected.includes(dm));\n    } else {\n      // 如果该弹幕是唯一一条已选择弹幕，则清除选择，否则选择该条弹幕\n      if (this.selected.length == 1 && this.selected[0] == dm) {\n        this.select([]);\n      } else {\n        this.select([dm]);\n      }\n    }\n  }\n}\n","import { Checkbox } from \"@/components\";\r\nimport { Player } from \"@/player\";\r\nimport { PlayerOptions } from \"@/types\";\r\nimport { BasePlugin } from \"@/plugin\";\r\n\r\ndeclare module \"@core\" {\r\n  interface PlayerEventMap {\r\n    /** 视频黑边 */\r\n    blackBorderChange: (flag: boolean) => void;\r\n  }\r\n  interface PlayerOptions {\r\n    /** 视频黑边 */\r\n    blackBorder?: boolean;\r\n    /** 视频黑边边距 */\r\n    blackBorderPadding?: string;\r\n  }\r\n}\r\n\r\n/** 视频黑边 */\r\n\r\nexport default class BlackBorder extends BasePlugin {\r\n  static pluginName = \"blackBorder\";\r\n  padding: string = \"\";\r\n  checkbox?: Checkbox;\r\n  constructor(player: Player) {\r\n    super(player);\r\n    if (player.plugins.buttonSettings) {\r\n      const container = document.createElement(\"div\");\r\n      this.checkbox = new Checkbox({\r\n        container,\r\n        value: !this.status,\r\n        onToggle: (val) => {\r\n          this.toggle(!val);\r\n        },\r\n        label: \"隐藏黑边\",\r\n      });\r\n      player.plugins.settings?.$others.appendChild(container);\r\n    }\r\n  }\r\n  apply(player: Player, options: PlayerOptions): void {\r\n    this.padding = options.blackBorderPadding || \"8px\";\r\n    if (options.blackBorder) this.toggle(true);\r\n  }\r\n  toggle(v: boolean) {\r\n    if (v) {\r\n      this.player.$content.style.setProperty(\"--padding\", this.padding);\r\n    } else {\r\n      this.player.$content.style.setProperty(\"--padding\", \"\");\r\n    }\r\n    this.player.emit(\"blackBorderChange\", v);\r\n  }\r\n  get status() {\r\n    return !!this.player.$content.style.getPropertyValue(\"--padding\");\r\n  }\r\n}\r\n","import type { PlayerOptions } from \"@/types\";\r\nimport { Player } from \"@/player\";\r\nimport { BasePlugin } from \"@/plugin\";\r\n\r\ndeclare module \"@core\" {\r\n  interface Player {\r\n    /** 是否为宽屏模式 */\r\n    isWidescreen?: boolean;\r\n    /** 进入宽屏模式 */\r\n    enterWidescreen?: () => void;\r\n    /** 退出宽屏模式 */\r\n    exitWidescreen?: () => void;\r\n  }\r\n}\r\n\r\ndeclare module \"@core\" {\r\n  interface PlayerOptions {\r\n    widescreen?: boolean;\r\n  }\r\n  interface PlayerInvokes {\r\n    widescreen?: (flag: boolean) => void;\r\n  }\r\n  interface PlayerEventMap {\r\n    widescreenEnter: () => void;\r\n    widescreenExit: () => void;\r\n  }\r\n  interface PlayerPlugins {\r\n    widescreen?: Widescreen;\r\n  }\r\n}\r\n\r\n/** 宽屏模式插件 */\r\n\r\nexport default class Widescreen extends BasePlugin {\r\n  static readonly pluginName = \"widescreen\";\r\n  public invokeToggle?: (flag: boolean) => void;\r\n\r\n  init() {\r\n    // --- 绑定属性 --- //\r\n\r\n    this.player.define(\"isWidescreen\", {\r\n      get: () => this.status,\r\n    });\r\n    this.player.define(\"enterWidescreen\", () => this.enter());\r\n    this.player.define(\"exitWidescreen\", () => this.exit());\r\n  }\r\n\r\n  apply(player: Player, options: PlayerOptions): void {\r\n    this.invokeToggle = options.invoke?.widescreen;\r\n    options.widescreen && this.enter();\r\n  }\r\n\r\n  enter() {\r\n    if (this.status) return;\r\n    this.player.$el.classList.add(\"is-widescreen\");\r\n    this.invokeToggle?.(true);\r\n    this.player.emit(\"widescreenEnter\");\r\n  }\r\n  exit() {\r\n    if (!this.status) return;\r\n    this.player.$el.classList.remove(\"is-widescreen\");\r\n    this.invokeToggle?.(false);\r\n    this.player.emit(\"widescreenExit\");\r\n  }\r\n  get status() {\r\n    return this.player.$el.classList.contains(\"is-widescreen\");\r\n  }\r\n}\r\n","import { Player } from \"@/player\";\r\nimport { classPrefix } from \"@/config\";\r\nimport { ControlsPlugin } from \"@/plugin\";\r\nimport { createElement } from \"@/utils\";\r\n\r\nconst templateHTML = /*html*/ `\r\n  <div class=\"${classPrefix}-controls-button-icon\">\r\n    <i class=\"mpicon-play\"></i>\r\n    <i class=\"mpicon-pause\"></i>\r\n  </div>\r\n  <div class=\"mpui-tooltip\">播放</div>\r\n`;\r\n\r\nexport default class ButtonPlay extends ControlsPlugin {\r\n  static pluginName = \"buttonPlay\";\r\n\r\n  $icon: HTMLElement;\r\n  $tooltip: HTMLElement;\r\n\r\n  constructor(player: Player) {\r\n    super(\r\n      player,\r\n      createElement(\r\n        \"div\",\r\n        { class: `${classPrefix}-controls-button ${classPrefix}-button-play is-paused` },\r\n        templateHTML\r\n      )\r\n    );\r\n    this.$icon = this.$(`.${classPrefix}-controls-button-icon`)!;\r\n    this.$tooltip = this.$(\".mpui-tooltip\")!;\r\n  }\r\n\r\n  init() {\r\n    this.player.on(\"pause\", () => {\r\n      this._change(false);\r\n    });\r\n    this.player.on(\"play\", () => {\r\n      this._change(true);\r\n    });\r\n    this.player.on(\"videoChange\", () => {\r\n      this._change(false);\r\n    });\r\n    this.$icon.addEventListener(\"click\", () => {\r\n      this.player.paused ? this.player.play() : this.player.pause();\r\n    });\r\n  }\r\n  /** 设置按钮状态 */\r\n  private _change(flag: boolean) {\r\n    this.$el.classList.toggle(\"is-on\", flag);\r\n    this.$tooltip.innerText = flag ? \"暂停\" : \"播放\";\r\n  }\r\n}\r\n","import { Player } from \"@/player\";\r\nimport { classPrefix } from \"@/config\";\r\nimport { PlayerOptions } from \"@/types\";\r\nimport { ControlsPlugin } from \"@/plugin\";\r\nimport { createElement } from \"@/utils\";\r\n\r\nconst templateHTML = /*html*/ `\r\n  <div class=\"${classPrefix}-controls-button-icon\">\r\n    <i class=\"mpicon-prev\"></i>\r\n  </div>\r\n  <div class=\"mpui-tooltip\">上一P</div>\r\n`;\r\n\r\ndeclare module \"@core\" {\r\n  interface PlayerOptions {\r\n    /** 视频切换按钮 */\r\n    switchButton?: {\r\n      /** 自动隐藏按钮，默认值为false */\r\n      autoHide?: boolean;\r\n      /** 只有一个视频时，隐藏所有切换按钮，默认值为true */\r\n      singleHide?: boolean;\r\n    };\r\n  }\r\n}\r\n\r\nexport default class ButtonPrev extends ControlsPlugin {\r\n  static pluginName = \"buttonPrev\";\r\n  $icon: HTMLElement;\r\n  $tooltip: HTMLElement;\r\n\r\n  /** 只有单个视频时，隐藏所有切换按钮 */\r\n  singleHide: boolean = true;\r\n\r\n  constructor(player: Player) {\r\n    super(\r\n      player,\r\n      createElement(\r\n        \"div\",\r\n        {\r\n          class: `${classPrefix}-controls-button ${classPrefix}-button-prev is-autohide is-disabled`,\r\n        },\r\n        templateHTML\r\n      )\r\n    );\r\n    this.$icon = this.$(`.${classPrefix}-controls-button-icon`)!;\r\n    this.$tooltip = this.$(\".mpui-tooltip\")!;\r\n  }\r\n\r\n  apply(player: Player, options: PlayerOptions): void {\r\n    this.singleHide = options.switchButton?.singleHide ?? true;\r\n  }\r\n\r\n  init() {\r\n    this.$icon.addEventListener(\"click\", () => {\r\n      this.player.prev();\r\n    });\r\n    this.player.on(\"videoChange\", (info) => {\r\n      const { hasNext, hasPrev } = info;\r\n      this.setDisabled(!hasPrev);\r\n      this.$el.classList.toggle(\"is-hidden\", this.singleHide && !hasPrev && !hasNext);\r\n    });\r\n  }\r\n  setDisabled(flag: boolean) {\r\n    this.$el.classList.toggle(\"is-disabled\", flag);\r\n  }\r\n  /** 自动隐藏上一个/下一个按钮 */\r\n  setAutoHide(flag: boolean) {\r\n    this.$el.classList.toggle(\"is-autohide\", flag);\r\n  }\r\n  get disabled() {\r\n    return this.$el.classList.contains(\"is-disabled\");\r\n  }\r\n}\r\n","import { Player } from \"@/player\";\nimport { classPrefix } from \"@/config\";\nimport { PlayerOptions } from \"@/types\";\nimport { ControlsPlugin } from \"@/plugin\";\nimport { createElement } from \"@/utils\";\n\nconst templateHTML = /*html*/ `\n  <div class=\"${classPrefix}-controls-button-icon\">\n    <i class=\"mpicon-next\"></i>\n  </div>\n  <div class=\"mpui-tooltip\">下一P</div>\n`;\n\ndeclare module \"@core\" {\n  interface PlayerOptions {\n    /** 视频切换按钮 */\n    switchButton?: {\n      /** 自动隐藏按钮，默认值为false */\n      autoHide?: boolean;\n      /** 只有一个视频时，隐藏所有切换按钮，默认值为true */\n      singleHide?: boolean;\n    };\n  }\n}\n\nexport default class ButtonNext extends ControlsPlugin {\n  static pluginName = \"buttonNext\";\n  $icon: HTMLElement;\n  $tooltip: HTMLElement;\n\n  /** 只有单个视频时，隐藏所有切换按钮 */\n  singleHide: boolean = true;\n\n  constructor(player: Player) {\n    super(\n      player,\n      createElement(\n        \"div\",\n        { class: `${classPrefix}-controls-button ${classPrefix}-button-next` },\n        templateHTML\n      )\n    );\n\n    this.$icon = this.$(`.${classPrefix}-controls-button-icon`)!;\n    this.$tooltip = this.$(\".mpui-tooltip\")!;\n  }\n\n  apply(player: Player, options: PlayerOptions): void {\n    this.singleHide = options.switchButton?.singleHide ?? true;\n  }\n\n  init(player: Player) {\n    this.$icon.addEventListener(\"click\", () => {\n      this.player.next();\n    });\n    this.player.on(\"videoChange\", (info) => {\n      const { hasNext, hasPrev } = info;\n      this.setDisabled(!hasNext);\n      this.$el.classList.toggle(\"is-hidden\", this.singleHide && !hasPrev && !hasNext);\n    });\n  }\n\n  setDisabled(flag: boolean) {\n    this.$el.classList.toggle(\"is-disabled\", flag);\n  }\n  /** 自动隐藏上一个/下一个按钮 */\n  setAutoHide(flag: boolean) {\n    this.$el.classList.toggle(\"is-autohide\", flag);\n  }\n  get disabled() {\n    return this.$el.classList.contains(\"is-disabled\");\n  }\n}\n","import { classPrefix } from \"@/config\";\nimport { Player } from \"@/player\";\nimport { createElement, secondToTime, timeToSecond } from \"@/utils\";\nimport { ControlsPlugin } from \"@/plugin\";\n\nconst templateHTML = /*html*/ `\n  <div class=\"${classPrefix}-videotime-label\">\n    <span class=\"${classPrefix}-videotime-current\">00:00</span>\n    <span class=\"${classPrefix}-videotime-divider\">/</span>\n    <span class=\"${classPrefix}-videotime-total\">00:00</span>\n  </div>\n  <input class=\"${classPrefix}-videotime-input mpui-input\" />\n`;\n\nexport default class VideoTime extends ControlsPlugin {\n  static pluginName = \"videoTime\";\n\n  $label: HTMLElement;\n  $current: HTMLElement;\n  $total: HTMLElement;\n  $input: HTMLInputElement;\n  /** 点按时的值 */\n  private valueBeforeEdited = \"\";\n  private timeFormat = 0b0010;\n\n  constructor(player: Player) {\n    super(player, createElement(\"div\", { class: `${classPrefix}-videotime` }, templateHTML));\n    this.$label = this.$(`.${classPrefix}-videotime-label`)!;\n    this.$current = this.$(`.${classPrefix}-videotime-current`)!;\n    this.$total = this.$(`.${classPrefix}-videotime-total`)!;\n    this.$input = this.$(`.${classPrefix}-videotime-input`)!;\n  }\n\n  init() {\n    this.player.on(\"timeupdate\", (time) => {\n      this.$current.innerText = this.format(time);\n    });\n    this.player.on(\"seeking\", (time) => {\n      this.$current.innerText = this.format(time);\n    });\n    this.player.on(\"durationchange\", (time) => {\n      // 如果视频总时长>1小时，则采用00:00:00格式，否则采用00:00格式\n      this.timeFormat = time > 3600 ? 0b0100 : 0b0010;\n      this.$total.innerText = this.format(time);\n    });\n    this.$label.addEventListener(\"click\", () => {\n      this.$el.classList.add(\"is-input\");\n      this.$input.value = this.format(this.player.currentTime);\n      this.valueBeforeEdited = this.$input.value;\n      this.$input.focus();\n    });\n    this.$input.addEventListener(\"blur\", () => {\n      const inputVal = this.$input.value;\n      if (inputVal != this.valueBeforeEdited) {\n        // 如果输入值有改动，则跳转\n        this.player.seek(timeToSecond(inputVal));\n        this.player.play();\n      }\n      this.exitInput();\n    });\n    this.$input.addEventListener(\"keydown\", (event) => {\n      const e = event || window.event;\n      if (e.keyCode == 13) {\n        this.player.seek(timeToSecond(this.$input.value));\n        this.player.play();\n        this.exitInput();\n      }\n      if (e.keyCode == 27) {\n        this.exitInput();\n      }\n    });\n  }\n\n  /** 退出输入模式 */\n  exitInput() {\n    this.$el.classList.remove(\"is-input\");\n    this.$input.value = \"\";\n    this.valueBeforeEdited = \"\";\n  }\n\n  /** 格式化时间 */\n  protected format(time: number) {\n    return secondToTime(time, this.timeFormat);\n  }\n}\n","import { Player } from \"@/player\";\r\nimport { classPrefix } from \"@/config\";\r\nimport { ControlsPlugin } from \"@/plugin\";\r\nimport { createElement } from \"@/utils\";\r\n\r\nconst templateHTML = /*html*/ `\r\n  <div class=\"${classPrefix}-controls-button-icon\">\r\n    <i class=\"mpicon-loop-off\"></i>\r\n    <i class=\"mpicon-loop\"></i>\r\n  </div>\r\n  <div class=\"mpui-tooltip\">洗脑循环</div>\r\n`;\r\n\r\nexport default class ButtonLoop extends ControlsPlugin {\r\n  static pluginName = \"buttonLoop\";\r\n\r\n  $icon: HTMLElement;\r\n  $tooltip: HTMLElement;\r\n\r\n  constructor(player: Player) {\r\n    super(\r\n      player,\r\n      createElement(\r\n        \"div\",\r\n        { class: `${classPrefix}-controls-button ${classPrefix}-button-loop` },\r\n        templateHTML\r\n      )\r\n    );\r\n\r\n    this.$icon = this.$(`.${classPrefix}-controls-button-icon`)!;\r\n    this.$tooltip = this.$(\".mpui-tooltip\")!;\r\n  }\r\n\r\n  init() {\r\n    this.player.on(\"loopChange\", (flag) => {\r\n      this.$el.classList.toggle(\"is-on\", flag);\r\n      this.$tooltip.innerText = flag ? \"关闭洗脑循环\" : \"洗脑循环\";\r\n    });\r\n    this.$icon.addEventListener(\"click\", () => {\r\n      if (this.player.loop) {\r\n        this.player.setLoop(false);\r\n      } else {\r\n        this.player.setLoop(true);\r\n      }\r\n    });\r\n  }\r\n}\r\n","import { Player } from \"@/player\";\nimport { classPrefix } from \"@/config\";\nimport { ControlsPlugin } from \"@/plugin\";\nimport { createElement } from \"@/utils\";\n\nconst templateHTML = /*html*/ `\n  <div class=\"${classPrefix}-controls-button-icon\">\n    <div class=\"${classPrefix}-controls-button-text\">P0</div>\n  </div>\n  <div class=\"mpui-tooltip\">分P列表</div>\n`;\n\nexport default class ButtonPart extends ControlsPlugin {\n  static pluginName = \"buttonPart\";\n\n  $icon: HTMLElement;\n  $text: HTMLElement;\n  $tooltip: HTMLElement;\n\n  constructor(player: Player) {\n    super(\n      player,\n      createElement(\n        \"div\",\n        { class: `${classPrefix}-controls-button ${classPrefix}-button-part` },\n        templateHTML\n      )\n    );\n\n    this.$icon = this.$(`.${classPrefix}-controls-button-icon`)!;\n    this.$text = this.$(`.${classPrefix}-controls-button-text`)!;\n    this.$tooltip = this.$(\".mpui-tooltip\")!;\n  }\n\n  init() {\n    this.$icon.addEventListener(\"click\", () => {\n      this.plugins.partList?.toggle();\n    });\n    this.player.on(\"videoChange\", (info) => {\n      this.$text.innerText = `P${info.part}`;\n      this.$el.classList.toggle(\"is-show\", (info.list?.length || 1) > 1);\n    });\n  }\n}\n","import { SliderVertical } from \"@/components\";\r\nimport { Player } from \"@/player\";\r\nimport { classPrefix } from \"@/config\";\r\nimport { ControlsPlugin } from \"@/plugin\";\r\nimport { createElement } from \"@/utils\";\r\n\r\nconst templateHTML = /*html*/ `\r\n  <div class=\"${classPrefix}-controls-button-icon\">\r\n    <i class=\"mpicon-volume\"></i>\r\n    <i class=\"mpicon-volume-off\"></i>\r\n  </div>\r\n\r\n  <div class=\"${classPrefix}-controls-panel-wrap\">\r\n    <div class=\"${classPrefix}-controls-panel\">\r\n      <div class=\"${classPrefix}-button-volume-value\">0</div>\r\n      <div class=\"${classPrefix}-button-volume-slider\"></div>\r\n    </div>\r\n  </div>\r\n`;\r\n\r\nexport default class ButtonVolume extends ControlsPlugin {\r\n  static pluginName = \"buttonVolume\";\r\n\r\n  $icon: HTMLElement;\r\n  $slider: HTMLElement;\r\n  $value: HTMLElement;\r\n  slider!: SliderVertical;\r\n\r\n  constructor(player: Player) {\r\n    super(\r\n      player,\r\n      createElement(\r\n        \"div\",\r\n        { class: `${classPrefix}-controls-button ${classPrefix}-button-volume` },\r\n        templateHTML\r\n      )\r\n    );\r\n    this.$icon = this.$(`.${classPrefix}-controls-button-icon`)!;\r\n    this.$slider = this.$(`.${classPrefix}-button-volume-slider`)!;\r\n    this.$value = this.$(`.${classPrefix}-button-volume-value`)!;\r\n  }\r\n\r\n  init() {\r\n    this.slider = new SliderVertical({\r\n      container: this.$slider,\r\n      min: 0,\r\n      max: 100,\r\n      step: 1,\r\n      value: this.player.volume * 100,\r\n      onChange: (value) => {\r\n        this.$value.innerText = value.toString();\r\n      },\r\n      onDrag: (value) => {\r\n        this.player.setVolume(value / 100);\r\n      },\r\n      onDragStart: (value) => {\r\n        if (this.player.muted && value != 0) {\r\n          this.player.setMuted(false);\r\n        }\r\n        this.$el.classList.add(\"is-control\");\r\n        this.player.isControlled = true;\r\n      },\r\n      onDragEnd: () => {\r\n        this.$el.classList.remove(\"is-control\");\r\n        this.player.isControlled = false;\r\n      },\r\n    });\r\n    this.player.on(\"volumechange\", (value: number, muted: boolean) => {\r\n      if (muted) {\r\n        this.$el.classList.add(\"is-muted\");\r\n        this.slider.setValue(0);\r\n      } else {\r\n        this.$el.classList.remove(\"is-muted\");\r\n        this.slider.setValue(Math.round(value * 100));\r\n      }\r\n      if (value == 0) {\r\n        this.$el.classList.add(\"is-muted\");\r\n      }\r\n    });\r\n    this.$icon.addEventListener(\"click\", () => {\r\n      if (this.player.muted || this.player.volume == 0) {\r\n        if (this.player.volume == 0) {\r\n          this.player.setVolume(0.1);\r\n        }\r\n        this.player.setMuted(true);\r\n      } else {\r\n        this.player.setMuted(false);\r\n      }\r\n    });\r\n  }\r\n}\r\n","import { Player } from \"@/player\";\r\nimport { classPrefix } from \"@/config\";\r\nimport { ControlsItem, ControlsPlugin, PluginFrom } from \"@/plugin\";\r\nimport { PlayerOptions } from \"@core\";\r\nimport { createElement } from \"@/utils\";\r\n\r\nconst templateHTML = /*html*/ `\r\n  <div class=\"${classPrefix}-controls-button-icon\">\r\n    <i class=\"mpicon-settings\"></i>\r\n  </div>\r\n  <div class=\"${classPrefix}-controls-panel-wrap\">\r\n    <div class=\"${classPrefix}-controls-panel\">\r\n  </div>\r\n    \r\n`;\r\n\r\ndeclare module \"@core\" {\r\n  interface PlayerOptions {\r\n    buttonSettings?: {\r\n      controls?: ControlsPlugin[];\r\n    };\r\n  }\r\n}\r\n\r\nexport default class ButtonSettings extends ControlsPlugin {\r\n  static pluginName = \"buttonSettings\";\r\n\r\n  $icon: HTMLElement;\r\n  $panel: HTMLElement;\r\n\r\n  controls: ControlsPlugin[] = [];\r\n\r\n  constructor(player: Player) {\r\n    super(\r\n      player,\r\n      createElement(\r\n        \"div\",\r\n        { class: `${classPrefix}-controls-button ${classPrefix}-button-settings` },\r\n        templateHTML\r\n      )\r\n    );\r\n\r\n    this.$icon = this.$(`.${classPrefix}-controls-button-icon`)!;\r\n    this.$panel = this.$(`.${classPrefix}-controls-panel`)!;\r\n  }\r\n\r\n  apply(player: Player, options: PlayerOptions) {\r\n    this.controls = options.buttonSettings?.controls || [];\r\n  }\r\n\r\n  ready() {\r\n    this.build(this.$panel, this.controls);\r\n  }\r\n\r\n  setControls(controls: ControlsPlugin[]) {\r\n    this.controls = controls;\r\n    this.build(this.$panel, controls);\r\n  }\r\n\r\n  protected build(container: HTMLElement, list?: PluginFrom<ControlsItem>[]) {\r\n    container.innerHTML = \"\";\r\n    const fragment = new DocumentFragment();\r\n    list?.forEach((item) => {\r\n      const el = this.player.plugin.from(item)?.$el;\r\n      if (el) fragment.appendChild(el);\r\n    });\r\n    container.appendChild(fragment);\r\n  }\r\n}\r\n","import { Player } from \"@/player\";\r\nimport { classPrefix } from \"@/config\";\r\nimport { ControlsPlugin } from \"@/plugin\";\r\nimport { createElement, pictureInPictureEnabled } from \"@/utils\";\r\n\r\nconst templateHTML = /*html*/ `\r\n  <div class=\"${classPrefix}-controls-button-icon\">\r\n    <i class=\"mpicon-pip\"></i>\r\n    <i class=\"mpicon-pip-exit\"></i>\r\n  </div>\r\n  <div class=\"mpui-tooltip\">画中画</div>\r\n`;\r\n\r\nexport default class ButtonPip extends ControlsPlugin {\r\n  static pluginName = \"buttonPip\";\r\n\r\n  $icon: HTMLElement;\r\n  $tooltip: HTMLElement;\r\n\r\n  constructor(player: Player) {\r\n    super(\r\n      player,\r\n      createElement(\r\n        \"div\",\r\n        { class: `${classPrefix}-controls-button ${classPrefix}-button-pip` },\r\n        templateHTML\r\n      )\r\n    );\r\n    this.$icon = this.$(`.${classPrefix}-controls-button-icon`)!;\r\n    this.$tooltip = this.$(\".mpui-tooltip\")!;\r\n  }\r\n\r\n  init() {\r\n    this.player.on(\"enterpictureinpicture\", () => {\r\n      this.$el.classList.add(\"is-on\");\r\n      this.$tooltip.innerText = \"退出画中画\";\r\n    });\r\n    this.player.on(\"leavepictureinpicture\", () => {\r\n      this.$el.classList.remove(\"is-on\");\r\n      this.$tooltip.innerText = \"画中画\";\r\n    });\r\n    this.$icon.addEventListener(\"click\", () => {\r\n      if (this.player.isPip) {\r\n        this.player.exitPip?.();\r\n      } else {\r\n        this.player.enterPip?.();\r\n      }\r\n    });\r\n  }\r\n  get ignored() {\r\n    return !this.player.enterPip || !pictureInPictureEnabled;\r\n  }\r\n}\r\n","import { Player } from \"@/player\";\r\nimport { classPrefix } from \"@/config\";\r\nimport { ControlsPlugin } from \"@/plugin\";\r\nimport { createElement } from \"@/utils\";\r\n\r\nconst templateHTML = /*html*/ `\r\n  <div class=\"${classPrefix}-controls-button-icon\">\r\n    <i class=\"mpicon-widescreen\"></i>\r\n    <i class=\"mpicon-widescreen-exit\"></i>\r\n  </div>\r\n  <div class=\"mpui-tooltip\">宽屏模式</div>\r\n`;\r\n\r\nexport default class ButtonWidescreen extends ControlsPlugin {\r\n  static pluginName = \"buttonWidescreen\";\r\n\r\n  $icon: HTMLElement;\r\n  $tooltip: HTMLElement;\r\n\r\n  constructor(player: Player) {\r\n    super(\r\n      player,\r\n      createElement(\r\n        \"div\",\r\n        { class: `${classPrefix}-controls-button ${classPrefix}-button-widescreen` },\r\n        templateHTML\r\n      )\r\n    );\r\n    this.$icon = this.$(`.${classPrefix}-controls-button-icon`)!;\r\n    this.$tooltip = this.$(\".mpui-tooltip\")!;\r\n  }\r\n\r\n  init() {\r\n    this.player.on(\"widescreenEnter\", () => {\r\n      this.$el.classList.add(\"is-on\");\r\n      this.$tooltip.innerText = \"退出宽屏模式\";\r\n    });\r\n    this.player.on(\"widescreenExit\", () => {\r\n      this.$el.classList.remove(\"is-on\");\r\n      this.$tooltip.innerText = \"宽屏模式\";\r\n    });\r\n    this.$icon.addEventListener(\"click\", () => {\r\n      if (this.player.isWidescreen) {\r\n        this.player.enterWidescreen?.();\r\n      } else {\r\n        this.player.exitWidescreen?.();\r\n      }\r\n    });\r\n  }\r\n  get ignored() {\r\n    return !this.player.enterWidescreen;\r\n  }\r\n}\r\n","import { Player } from \"@/player\";\r\nimport { classPrefix } from \"@/config\";\r\nimport { ControlsPlugin } from \"@/plugin\";\r\nimport { createElement } from \"@/utils\";\r\n\r\nconst templateHTML = /*html*/ `\r\n  <div class=\"${classPrefix}-controls-button-icon\">\r\n    <i class=\"mpicon-webscreen\"></i>\r\n    <i class=\"mpicon-webscreen-exit\"></i>\r\n  </div>\r\n  <div class=\"mpui-tooltip\">网页全屏</div>\r\n`;\r\n\r\nexport default class ButtonWebscreen extends ControlsPlugin {\r\n  static pluginName = \"buttonWebscreen\";\r\n\r\n  $icon: HTMLElement;\r\n  $tooltip: HTMLElement;\r\n\r\n  constructor(player: Player) {\r\n    super(\r\n      player,\r\n      createElement(\r\n        \"div\",\r\n        { class: `${classPrefix}-controls-button ${classPrefix}-button-webscreen` },\r\n        templateHTML\r\n      )\r\n    );\r\n    this.$icon = this.$(`.${classPrefix}-controls-button-icon`)!;\r\n    this.$tooltip = this.$(\".mpui-tooltip\")!;\r\n  }\r\n\r\n  init() {\r\n    this.player.on(\"webscreenEnter\", () => {\r\n      this.$el.classList.add(\"is-on\");\r\n      this.$tooltip.innerText = \"退出网页全屏\";\r\n    });\r\n    this.player.on(\"webscreenExit\", () => {\r\n      this.$el.classList.remove(\"is-on\");\r\n      this.$tooltip.innerText = \"网页全屏\";\r\n    });\r\n    this.$icon.addEventListener(\"click\", () => {\r\n      if (!this.player.isWebscreen) {\r\n        this.player.enterWebscreen?.();\r\n      } else {\r\n        this.player.exitWebscreen?.();\r\n      }\r\n    });\r\n  }\r\n  get ignored() {\r\n    return !this.player.enterWebscreen;\r\n  }\r\n}\r\n","import { Player } from \"@/player\";\r\nimport { classPrefix } from \"@/config\";\r\nimport { ControlsPlugin } from \"@/plugin\";\r\nimport { createElement, fullScreenEnabled } from \"@/utils\";\r\n\r\nconst templateHTML = /*html*/ `\r\n  <div class=\"${classPrefix}-controls-button-icon\">\r\n    <i class=\"mpicon-fullscreen\"></i>\r\n    <i class=\"mpicon-fullscreen-exit\"></i>\r\n  </div>\r\n  <div class=\"mpui-tooltip\">进入全屏</div>\r\n`;\r\n\r\nexport default class ButtonFullscreen extends ControlsPlugin {\r\n  static pluginName = \"buttonFullscreen\";\r\n\r\n  $icon: HTMLElement;\r\n  $tooltip: HTMLElement;\r\n\r\n  constructor(player: Player) {\r\n    super(\r\n      player,\r\n      createElement(\r\n        \"div\",\r\n        { class: `${classPrefix}-controls-button ${classPrefix}-button-fullscreen` },\r\n        templateHTML\r\n      )\r\n    );\r\n    this.$icon = this.$(`.${classPrefix}-controls-button-icon`)!;\r\n    this.$tooltip = this.$(\".mpui-tooltip\")!;\r\n  }\r\n\r\n  init() {\r\n    this.player.on(\"fullscreenEnter\", () => {\r\n      this.$el.classList.add(\"is-on\");\r\n      this.$tooltip.innerText = \"退出全屏\";\r\n    });\r\n    this.player.on(\"fullscreenExit\", () => {\r\n      this.$el.classList.remove(\"is-on\");\r\n      this.$tooltip.innerText = \"进入全屏\";\r\n    });\r\n    this.$icon.addEventListener(\"click\", () => {\r\n      if (!this.player.isFullscreen) {\r\n        this.player.enterFullscreen?.();\r\n      } else {\r\n        this.player.exitFullscreen?.();\r\n      }\r\n    });\r\n  }\r\n  get ignored() {\r\n    return !this.player.enterFullscreen || !fullScreenEnabled;\r\n  }\r\n}\r\n","import { Player } from \"@/player\";\r\nimport { classPrefix, developers, repositoryLink } from \"@/config\";\r\nimport { html, render } from \"lit-html\";\r\nimport { PanelPlugin } from \"@/plugin\";\r\n\r\nconst template = () => html`\r\n  <div class=\"${classPrefix}-about\">\r\n    <div class=\"${classPrefix}-about-logo\"></div>\r\n    <div class=\"${classPrefix}-about-version\">version ${Player.version}-${Player.gitHash}</div>\r\n    <div>github：<a href=\"${repositoryLink}\" target=\"_blank\">mfuns-cn/mfunsPlayer</a></div>\r\n    <div>开发者：</div>\r\n    <ul class=\"${classPrefix}-about-developers\">\r\n      ${developers.map(\r\n        ({ name, link }) => html`\r\n          <li>\r\n            <a href=\"${link}\" target=\"_blank\">${name}</a>\r\n          </li>\r\n        `\r\n      )}\r\n      <li></li>\r\n    </ul>\r\n  </div>\r\n`;\r\n\r\n/** 播放器面板 */\r\nexport default class about extends PanelPlugin {\r\n  static pluginName = \"about\";\r\n\r\n  title = \"关于\";\r\n  constructor(player: Player) {\r\n    const fragment = new DocumentFragment();\r\n    render(template(), fragment);\r\n\r\n    super(player, fragment.querySelector(`.${classPrefix}-about`)!);\r\n  }\r\n}\r\n","import { Player } from \"@/player\";\r\nimport { classPrefix } from \"@/config\";\r\nimport { html, render } from \"lit-html\";\r\nimport { PanelPlugin } from \"@/plugin\";\r\n\r\nconst template = (list: HotkeyInfoListItem[]) => html`\r\n  <div class=\"${classPrefix}-hotkeys\">\r\n    <div class=\"${classPrefix}-hotkeys-list\">\r\n      ${list.map(\r\n        ({ key, description }) => html`\r\n          <div class=\"${classPrefix}-hotkeys-list-item\">\r\n            <div class=\"${classPrefix}-hotkeys-list-key\">${key}</div>\r\n            <div class=\"${classPrefix}-hotkeys-list-description\">${description}</div>\r\n          </div>\r\n        `\r\n      )}\r\n    </div>\r\n  </div>\r\n`;\r\n\r\ninterface HotkeyInfoListItem {\r\n  key: string;\r\n  description: string;\r\n}\r\n\r\n/** 快捷键信息面板 */\r\nexport default class HotkeyInfo extends PanelPlugin {\r\n  static pluginName = \"hotkeyInfo\";\r\n\r\n  title = \"快捷键说明\";\r\n  constructor(player: Player) {\r\n    const hotkeyInfoList = [\r\n      { key: \"Space\", description: \"播放/暂停\" },\r\n      { key: \"→\", description: \"快进5秒\" },\r\n      { key: \"←\", description: \"快退5秒\" },\r\n      { key: \"↑\", description: \"音量增加10%\" },\r\n      { key: \"↓\", description: \"音量降低10%\" },\r\n    ];\r\n    const fragment = new DocumentFragment();\r\n    render(template(hotkeyInfoList), fragment);\r\n    super(player, fragment.querySelector(`.${classPrefix}-hotkeys`)!);\r\n  }\r\n}\r\n","import { classPrefix } from \"@/config\";\r\nimport { Player } from \"@/player\";\r\nimport { BasePlugin, MenuItem, PluginFrom } from \"@/plugin\";\r\nimport { html, render } from \"lit-html\";\r\nimport { createElement } from \"@/utils\";\r\nimport { PlayerOptions } from \"@core\";\r\n\r\ndeclare module \"@core\" {\r\n  interface PlayerPlugins {\r\n    contextMenu?: ContextMenu;\r\n  }\r\n  interface PlayerEventMap {\r\n    contextMenuShow: (x: number, y: number) => void;\r\n    contextMenuHide: () => void;\r\n  }\r\n  interface PlayerOptions {\r\n    contextMenu?: {\r\n      list: PluginFrom<MenuItem>[];\r\n    };\r\n  }\r\n}\r\n\r\nconst template = () => html`\r\n  <div class=\"${classPrefix}-contextmenu\">\r\n    <ul class=\"${classPrefix}-contextmenu-list mpui-black\"></ul>\r\n  </div>\r\n`;\r\n\r\n/** 右键菜单 */\r\n\r\nexport default class ContextMenu extends BasePlugin {\r\n  static pluginName = \"contextMenu\";\r\n  player: Player;\r\n  container: HTMLElement;\r\n  $el: HTMLElement;\r\n  $list: HTMLElement;\r\n  list: PluginFrom<MenuItem>[] = [];\r\n  private isShow = false;\r\n  constructor(player: Player) {\r\n    super(player);\r\n    this.player = player;\r\n\r\n    this.container = createElement(\"div\", { class: `${classPrefix}-contextmenu-wrap` });\r\n    render(template(), this.container);\r\n    this.$el = this.container.querySelector(`.${classPrefix}-contextmenu`)!;\r\n    this.$list = this.$el.querySelector(`.${classPrefix}-contextmenu-list`)!;\r\n\r\n    this.player.$main.appendChild(this.container);\r\n  }\r\n  apply(player: Player, options: PlayerOptions): void {\r\n    this.list = options.contextMenu?.list || [];\r\n  }\r\n  setMenu(list: MenuItem[]) {\r\n    this.$list.innerHTML = \"\";\r\n    const fragment = new DocumentFragment();\r\n    list.forEach((item) => {\r\n      const el = createElement(\"li\", { class: `${classPrefix}-contextmenu-item` });\r\n      if (item.onClick)\r\n        el.onclick = () => {\r\n          item.onClick?.(this.player);\r\n        };\r\n      let content: string | HTMLElement;\r\n      if (typeof item.content == \"function\") {\r\n        content = item.content(this.player);\r\n      } else {\r\n        content = item.content;\r\n      }\r\n      if (typeof content == \"object\") {\r\n        el.appendChild(content);\r\n      } else {\r\n        el.innerText = content;\r\n      }\r\n      fragment.appendChild(el);\r\n    });\r\n    this.$list.appendChild(fragment);\r\n  }\r\n  init() {\r\n    this.player.$area.addEventListener(\"contextmenu\", (e: MouseEvent) => {\r\n      e.preventDefault();\r\n      const clientRect = this.player.$area.getBoundingClientRect();\r\n      const x = e.clientX - clientRect.left;\r\n      const y = e.clientY - clientRect.top;\r\n      this.show(x, y);\r\n    });\r\n    this.container.addEventListener(\"contextmenu\", (e: MouseEvent) => {\r\n      e.preventDefault();\r\n      const clientRect = this.container.getBoundingClientRect();\r\n      const x = e.clientX - clientRect.left;\r\n      const y = e.clientY - clientRect.top;\r\n      this.show(x, y);\r\n    });\r\n    document.addEventListener(\"click\", () => {\r\n      if (this.isShow) {\r\n        this.hide();\r\n      }\r\n    });\r\n  }\r\n  show(x: number, y: number) {\r\n    this.container.classList.add(\"is-show\");\r\n    const clientRect = this.player.$area.getBoundingClientRect();\r\n    if (x + this.$el.offsetWidth >= clientRect.width) {\r\n      this.$el.style.right = clientRect.width - x + \"px\";\r\n      this.$el.style.left = \"initial\";\r\n    } else {\r\n      this.$el.style.left = x + \"px\";\r\n      this.$el.style.right = \"initial\";\r\n    }\r\n    if (y + this.$el.offsetHeight >= clientRect.height) {\r\n      this.$el.style.bottom = clientRect.height - y + \"px\";\r\n      this.$el.style.top = \"initial\";\r\n    } else {\r\n      this.$el.style.top = y + \"px\";\r\n      this.$el.style.bottom = \"initial\";\r\n    }\r\n    this.isShow = true;\r\n    this.player.emit(\"contextMenuShow\", x, y);\r\n  }\r\n  hide() {\r\n    this.container.classList.remove(\"is-show\");\r\n    this.isShow = false;\r\n    this.player.emit(\"contextMenuHide\");\r\n  }\r\n}\r\n","import { classPrefix } from \"@/config\";\r\nimport { Player } from \"@/player\";\r\nimport { PlayerOptions } from \"@/types\";\r\n\r\nimport { BasePlugin, ControlsItem, PluginFrom } from \"@/plugin\";\r\nimport { createElement } from \"@/utils\";\r\n\r\nconst templateHTML = /*html*/ `\r\n  <div class=\"${classPrefix}-controller-mask\"></div>\r\n  <div class=\"${classPrefix}-controller mpui-black\">\r\n    <div class=\"${classPrefix}-controller-top\"></div>\r\n    <div class=\"${classPrefix}-controller-content\">\r\n      <div class=\"${classPrefix}-controller-left\"></div>\r\n      <div class=\"${classPrefix}-controller-center\"></div>\r\n      <div class=\"${classPrefix}-controller-right\"></div>\r\n    </div>\r\n  </div>\r\n`;\r\n\r\ndeclare module \"@core\" {\r\n  interface PlayerPlugins {\r\n    controller?: Controller;\r\n  }\r\n  interface PlayerOptions {\r\n    controller?: { controls?: ControllerControls };\r\n  }\r\n}\r\n\r\nexport interface ControllerControls {\r\n  left?: PluginFrom<ControlsItem>[];\r\n  center?: PluginFrom<ControlsItem>[];\r\n  right?: PluginFrom<ControlsItem>[];\r\n  top?: PluginFrom<ControlsItem>[];\r\n}\r\n\r\n/** 控制栏 */\r\nexport default class Controller extends BasePlugin {\r\n  static pluginName = \"controller\";\r\n  player: Player;\r\n  container: HTMLElement;\r\n  $el: HTMLElement;\r\n  $top: HTMLElement;\r\n  $content: HTMLElement;\r\n  $left: HTMLElement;\r\n  $center: HTMLElement;\r\n  $right: HTMLElement;\r\n\r\n  isHover = false;\r\n\r\n  protected inactiveHook: () => boolean | void;\r\n  protected mouseEnterHandler: () => void;\r\n  protected mouseLeaveHandler: () => void;\r\n  protected controls: ControllerControls = {};\r\n\r\n  constructor(player: Player) {\r\n    super(player);\r\n    this.player = player;\r\n    this.container = createElement(\r\n      \"div\",\r\n      { class: `${classPrefix}-controller-wrap` },\r\n      templateHTML\r\n    );\r\n    this.$el = this.container.querySelector(`.${classPrefix}-controller`)!;\r\n    this.$top = this.$el.querySelector(`.${classPrefix}-controller-top`)!;\r\n    this.$content = this.$el.querySelector(`.${classPrefix}-controller-content`)!;\r\n    this.$left = this.$el.querySelector(`.${classPrefix}-controller-left`)!;\r\n    this.$center = this.$el.querySelector(`.${classPrefix}-controller-center`)!;\r\n    this.$right = this.$el.querySelector(`.${classPrefix}-controller-right`)!;\r\n    this.player.$main.append(this.container);\r\n\r\n    this.inactiveHook = () => !this.isHover && void 0;\r\n    this.mouseEnterHandler = () => {\r\n      this.isHover = true;\r\n    };\r\n    this.mouseLeaveHandler = () => {\r\n      this.isHover = false;\r\n    };\r\n  }\r\n  init() {\r\n    this.player.hook.register(\"inactive\", this.inactiveHook);\r\n    this.container.addEventListener(\"mouseenter\", this.mouseEnterHandler);\r\n    this.container.addEventListener(\"mouseleave\", this.mouseLeaveHandler);\r\n  }\r\n  apply(player: Player, options: PlayerOptions) {\r\n    this.controls = options.controller?.controls || {};\r\n  }\r\n  ready() {\r\n    this.setControls(this.controls);\r\n  }\r\n  /** 更新控制组件 */\r\n  setControls(controls: ControllerControls) {\r\n    this.controls = controls;\r\n    const { left, center, right, top } = controls;\r\n    this.build(this.$left, left);\r\n    this.build(this.$center, center);\r\n    this.build(this.$right, right);\r\n    this.build(this.$top, top);\r\n  }\r\n  protected build(container: HTMLElement, list?: PluginFrom<ControlsItem>[]) {\r\n    container.innerHTML = \"\";\r\n    const fragment = new DocumentFragment();\r\n    list?.forEach((item) => {\r\n      const el = this.player.plugin.from<ControlsItem>(item)?.$el;\r\n      if (el) fragment.appendChild(el);\r\n    });\r\n    container.appendChild(fragment);\r\n  }\r\n  destroy() {\r\n    this.player.hook.unregister(\"inactive\", this.inactiveHook);\r\n    this.container.removeEventListener(\"mouseenter\", this.mouseEnterHandler);\r\n    this.container.removeEventListener(\"mouseleave\", this.mouseLeaveHandler);\r\n  }\r\n}\r\n","export enum keyCode {\r\n  Backspace = 8,\r\n  Tab = 9,\r\n  Enter = 13,\r\n  Shift = 16,\r\n  Ctrl = 17,\r\n  Alt = 18,\r\n  PauseBreak = 19,\r\n  CapsLock = 20,\r\n  Escape = 27,\r\n  Space = 32,\r\n  PageUp = 33,\r\n  PageDown = 34,\r\n  End = 35,\r\n  Home = 36,\r\n\r\n  LeftArrow = 37,\r\n  UpArrow = 38,\r\n  RightArrow = 39,\r\n  DownArrow = 40,\r\n\r\n  Insert = 45,\r\n  Delete = 46,\r\n\r\n  Zero = 48,\r\n  ClosedParen = Zero,\r\n  One = 49,\r\n  ExclamationMark = One,\r\n  Two = 50,\r\n  AtSign = Two,\r\n  Three = 51,\r\n  PoundSign = Three,\r\n  Hash = PoundSign,\r\n  Four = 52,\r\n  DollarSign = Four,\r\n  Five = 53,\r\n  PercentSign = Five,\r\n  Six = 54,\r\n  Caret = Six,\r\n  Hat = Caret,\r\n  Seven = 55,\r\n  Ampersand = Seven,\r\n  Eight = 56,\r\n  Star = Eight,\r\n  Asterik = Star,\r\n  Nine = 57,\r\n  OpenParen = Nine,\r\n\r\n  A = 65,\r\n  B = 66,\r\n  C = 67,\r\n  D = 68,\r\n  E = 69,\r\n  F = 70,\r\n  G = 71,\r\n  H = 72,\r\n  I = 73,\r\n  J = 74,\r\n  K = 75,\r\n  L = 76,\r\n  M = 77,\r\n  N = 78,\r\n  O = 79,\r\n  P = 80,\r\n  Q = 81,\r\n  R = 82,\r\n  S = 83,\r\n  T = 84,\r\n  U = 85,\r\n  V = 86,\r\n  W = 87,\r\n  X = 88,\r\n  Y = 89,\r\n  Z = 90,\r\n\r\n  LeftWindowKey = 91,\r\n  RightWindowKey = 92,\r\n  SelectKey = 93,\r\n\r\n  Numpad0 = 96,\r\n  Numpad1 = 97,\r\n  Numpad2 = 98,\r\n  Numpad3 = 99,\r\n  Numpad4 = 100,\r\n  Numpad5 = 101,\r\n  Numpad6 = 102,\r\n  Numpad7 = 103,\r\n  Numpad8 = 104,\r\n  Numpad9 = 105,\r\n\r\n  Multiply = 106,\r\n  Add = 107,\r\n  Subtract = 109,\r\n  DecimalPoint = 110,\r\n  Divide = 111,\r\n\r\n  F1 = 112,\r\n  F2 = 113,\r\n  F3 = 114,\r\n  F4 = 115,\r\n  F5 = 116,\r\n  F6 = 117,\r\n  F7 = 118,\r\n  F8 = 119,\r\n  F9 = 120,\r\n  F10 = 121,\r\n  F11 = 122,\r\n  F12 = 123,\r\n\r\n  NumLock = 144,\r\n  ScrollLock = 145,\r\n\r\n  SemiColon = 186,\r\n  Equals = 187,\r\n  Comma = 188,\r\n  Dash = 189,\r\n  Period = 190,\r\n  UnderScore = Dash,\r\n  PlusSign = Equals,\r\n  ForwardSlash = 191,\r\n  Tilde = 192,\r\n  GraveAccent = Tilde,\r\n\r\n  OpenBracket = 219,\r\n  ClosedBracket = 221,\r\n  Quote = 222,\r\n}\r\n","import { PlayerOptions } from \"@/types\";\r\nimport { Player } from \"@/player\";\r\nimport { keyCode } from \"@/utils/KeyCode.enum\";\r\n\r\nexport default class Hotkey {\r\n  static readonly pluginName = \"hotkey\";\r\n  player: Player;\r\n  controlMask: HTMLElement;\r\n\r\n  constructor(player: Player) {\r\n    this.player = player;\r\n    this.controlMask = this.player.$area;\r\n  }\r\n\r\n  apply() {\r\n    this.initKey();\r\n    this.initMask();\r\n  }\r\n\r\n  initKey() {\r\n    document.addEventListener(\"keydown\", (e: KeyboardEvent) => {\r\n      const tag = document.activeElement?.tagName.toUpperCase();\r\n      const editable = document.activeElement?.getAttribute(\"contenteditable\");\r\n      if (this.player.isFocused) {\r\n        if (tag == \"INPUT\" || tag == \"TEXTAREA\" || editable == \"\" || editable == \"true\") return;\r\n        switch (e.keyCode) {\r\n          case keyCode.Space:\r\n            e.preventDefault();\r\n            this.player.paused ? this.player.play() : this.player.pause();\r\n            break;\r\n          case keyCode.LeftArrow:\r\n            e.preventDefault();\r\n            this.player.seek(this.player.currentTime - 5);\r\n            break;\r\n          case keyCode.RightArrow:\r\n            e.preventDefault();\r\n            this.player.seek(this.player.currentTime + 5);\r\n            break;\r\n          case keyCode.UpArrow:\r\n            e.preventDefault();\r\n            this.player.setVolume(this.player.volume + 0.1);\r\n            break;\r\n          case keyCode.DownArrow:\r\n            e.preventDefault();\r\n            this.player.setVolume(this.player.volume - 0.1);\r\n            break;\r\n        }\r\n      }\r\n    });\r\n  }\r\n\r\n  initMask() {\r\n    this.controlMask.addEventListener(\"click\", () => {\r\n      this.player.paused ? this.player.play() : this.player.pause();\r\n    });\r\n  }\r\n}\r\n","import { classPrefix } from \"@/config\";\r\nimport { Player } from \"@/player\";\r\nimport { PlayerOptions } from \"@/types\";\r\nimport { createElement } from \"@/utils\";\r\nimport { BasePlugin, PanelItem, PanelPlugin, PluginFrom } from \"@/plugin\";\r\n\r\nconst templateHTML = /*html*/ `\r\n  <div class=\"${classPrefix}-modal-mask\"></div>\r\n  <div class=\"${classPrefix}-modal\">\r\n    <div class=\"${classPrefix}-modal-head\">\r\n      <div class=\"${classPrefix}-modal-title\"></div>\r\n      <div class=\"${classPrefix}-modal-close\">\r\n        <i class=\"mpicon-close\"></i>\r\n      </div>\r\n    </div>\r\n    <div class=\"${classPrefix}-modal-content\"></div>\r\n  </div>\r\n`;\r\n\r\ndeclare module \"@core\" {\r\n  interface PlayerPlugins {\r\n    modal?: Modal;\r\n  }\r\n  interface PlayerOptions {\r\n    modal?: {\r\n      panels?: PanelPlugin[];\r\n    };\r\n  }\r\n}\r\n\r\nexport default class Modal extends BasePlugin {\r\n  static readonly pluginName = \"modal\";\r\n  container: HTMLElement;\r\n  $el: HTMLElement;\r\n  $mask: HTMLElement;\r\n  $content: HTMLElement;\r\n  $title: HTMLElement;\r\n  $close: HTMLElement;\r\n  current: PanelItem | null = null;\r\n  #initPanels: PluginFrom<PanelItem>[] = [];\r\n  get isShow(): boolean {\r\n    return this.container.classList.contains(\"is-show\");\r\n  }\r\n\r\n  constructor(player: Player) {\r\n    super(player);\r\n    this.container = createElement(\"div\", { class: `${classPrefix}-modal-wrap` }, templateHTML);\r\n    this.$el = this.container.querySelector(`.${classPrefix}-modal`)!;\r\n    this.$mask = this.container.querySelector(`.${classPrefix}-modal-mask`)!;\r\n    this.$content = this.$el.querySelector(`.${classPrefix}-modal-content`)!;\r\n    this.$title = this.$el.querySelector(`.${classPrefix}-modal-title`)!;\r\n    this.$close = this.$el.querySelector(`.${classPrefix}-modal-close`)!;\r\n\r\n    this.player.$main.appendChild(this.container);\r\n  }\r\n\r\n  init() {\r\n    this.$mask.addEventListener(\"click\", () => {\r\n      this.hide();\r\n    });\r\n    this.$close.addEventListener(\"click\", () => {\r\n      this.hide();\r\n    });\r\n  }\r\n  apply(player: Player, options: PlayerOptions): void {\r\n    this.#initPanels = options.modal?.panels || [];\r\n  }\r\n  ready(): void {\r\n    this.#initPanels.forEach((item) => {\r\n      const panel = this.player.plugin.from(item);\r\n      panel && this.mount(panel);\r\n    });\r\n    this.#initPanels = [];\r\n  }\r\n  /** 关闭模态框 */\r\n  hide() {\r\n    this.current?.toggle(false);\r\n  }\r\n  /** 挂载一个面板 */\r\n  mount(panel: PanelItem) {\r\n    panel.mount(this.$content, {\r\n      onToggle: (flag) => {\r\n        if (flag) {\r\n          for (const a of this.$content.children) {\r\n            a.classList.toggle(\"is-show\", a == panel.$el);\r\n          }\r\n          this.container.classList.add(\"is-show\");\r\n          this.$title.innerText = panel.title || \"\";\r\n          this.current = panel;\r\n        } else {\r\n          if (this.current == panel) {\r\n            this.container.classList.remove(\"is-show\");\r\n            panel.$el.classList.remove(\"is-show\");\r\n            this.$title.innerText = \"\";\r\n            this.current = null;\r\n          }\r\n        }\r\n      },\r\n    });\r\n  }\r\n}\r\n","import { classPrefix } from \"@/config\";\nimport { Player } from \"@/player\";\nimport { createElement, secondToTime } from \"@/utils\";\nimport { ControlsPlugin } from \"@/plugin\";\n\nconst templateHTML = /*html*/ `\n  <div class=\"${classPrefix}-progress-bar\">\n    <div class=\"${classPrefix}-progress-buffered\"></div>\n    <div class=\"${classPrefix}-progress-played\"></div>\n    <div class=\"${classPrefix}-progress-thumb-track\">\n      <div class=\"${classPrefix}-progress-thumb\"></div>\n    </div>\n    <div class=\"${classPrefix}-progress-preview\">\n      <div class=\"${classPrefix}-progress-thumbnail\"></div>\n      <div class=\"${classPrefix}-progress-time\"></div>\n    </div>\n    <div class=\"${classPrefix}-progress-tip\"></div>\n  </div>\n`;\n\n/** 进度条 */\nexport default class Progress extends ControlsPlugin {\n  static readonly pluginName = \"progress\";\n\n  $bar: HTMLElement;\n  $buffered: HTMLElement;\n  $played: HTMLElement;\n  $thumbTrack: HTMLElement;\n  $thumb: HTMLElement;\n  $preview: HTMLElement;\n  $thumbnail: HTMLElement;\n  $time: HTMLElement;\n  $tip: HTMLElement;\n  /** 轨道长度 */\n  private trackLength = 0;\n  /** 鼠标与轨道距离 */\n  private distance = 0;\n  /** 滑块可滑动距离 */\n  private nMax = 0;\n  /** 滑块轨道位置 */\n  private nLeft = 0;\n  /** 滑动距离 */\n  get nLength(): number {\n    const nLength = this.distance - this.thumbTrackX;\n    // 限制滑块移动位置\n    return nLength >= this.nMax ? this.nMax : nLength <= 0 ? 0 : nLength;\n  }\n  /** 滑块轨道与总轨道距离差 */\n  get thumbTrackX(): number {\n    return (this.trackLength - this.nMax) / 2;\n  }\n  /** 滑动值 */\n  get nValue(): number {\n    return (this.nLength / this.nMax) * this.player.duration;\n  }\n  private isDragging = false;\n  private isHover = false;\n  private isActive = false;\n\n  constructor(player: Player) {\n    super(player, createElement(\"div\", { class: `${classPrefix}-progress` }, templateHTML));\n\n    this.$bar = this.$(`.${classPrefix}-progress-bar`)!;\n    this.$buffered = this.$(`.${classPrefix}-progress-buffered`)!;\n    this.$played = this.$(`.${classPrefix}-progress-played`)!;\n    this.$thumbTrack = this.$(`.${classPrefix}-progress-thumb-track`)!;\n    this.$thumb = this.$(`.${classPrefix}-progress-thumb`)!;\n    this.$preview = this.$(`.${classPrefix}-progress-preview`)!;\n    this.$thumbnail = this.$(`.${classPrefix}-progress-thumbnail`)!;\n    this.$time = this.$(`.${classPrefix}-progress-time`)!;\n    this.$tip = this.$(`.${classPrefix}-progress-tip`)!;\n\n    // 点按进度条事件\n    this.$el.addEventListener(\"mousedown\", (e: MouseEvent) => {\n      const { clientX } = e;\n      // 更新滑动条位置信息\n      this.trackLength = this.$el.offsetWidth;\n      this.nMax = this.$thumbTrack.offsetWidth || this.trackLength;\n      this.nLeft = this.$el.getBoundingClientRect().left;\n      // 获取鼠标与轨道距离\n      this.distance = clientX - this.nLeft;\n      this.setPlayed(this.nValue);\n      this.$el.classList.add(`${classPrefix}-progress-dragging`);\n      this.isDragging = true;\n      document.addEventListener(\"mousemove\", dragMoveEvent);\n      document.addEventListener(\"mouseup\", dragEndEvent);\n    });\n\n    // 滑动进度条事件\n    const dragMoveEvent = (e: MouseEvent) => {\n      // 鼠标X位置\n      const { clientX } = e;\n      // 鼠标移动时取消默认行为，避免选中其他元素或文字\n      e.preventDefault();\n      e.stopPropagation();\n      // 获取鼠标与轨道距离\n      this.distance = clientX - this.nLeft;\n      this.setPlayed(this.nValue);\n      // 更新指针显示\n      this.updateTip();\n      window.getSelection()?.removeAllRanges();\n    };\n\n    // 松开进度条事件\n    const dragEndEvent = (e: MouseEvent) => {\n      e.stopPropagation();\n      window.getSelection()?.removeAllRanges();\n      document.removeEventListener(\"mousemove\", dragMoveEvent);\n      document.removeEventListener(\"mouseup\", dragEndEvent);\n      this.$el.classList.remove(`${classPrefix}-progress-dragging`);\n      this.isDragging = false;\n      if (!this.isHover) this.setActive(false);\n      // 跳转\n      this.player.seek(this.nValue);\n      this.player.play();\n    };\n\n    // 鼠标离开进度条区域\n    this.$el.addEventListener(\"mouseenter\", () => {\n      this.isHover = true;\n      if (!this.isDragging) this.updateTip();\n    });\n    // 鼠标在进度条区域内移动\n    this.$el.addEventListener(\"mousemove\", (e: MouseEvent) => {\n      // 如果进度条处于拖动状态，则无需重复显示进度条指针\n      if (this.isDragging) return;\n      // 鼠标X位置\n      const { clientX } = e;\n      // 更新滑动条位置信息\n      this.trackLength = this.$el.offsetWidth;\n      this.nMax = this.$thumbTrack.offsetWidth || this.trackLength;\n      this.nLeft = this.$el.getBoundingClientRect().left;\n      // 获取鼠标与轨道距离\n      this.distance = clientX - this.nLeft;\n      // 更新指针显示\n      this.updateTip();\n    });\n    // 鼠标离开进度条区域\n    this.$el.addEventListener(\"mouseleave\", () => {\n      this.isHover = false;\n      if (!this.isDragging) this.setActive(false);\n    });\n\n    // 视频播放时间更新\n    this.player.on(\"timeupdate\", (time) => {\n      if (!this.isDragging) this.setPlayed(time);\n    });\n\n    // 视频缓存更新\n    this.player.on(\"progress\", (buffered) => {\n      this.setBuffered(buffered.length ? buffered.end(buffered.length - 1) : 0);\n    });\n  }\n\n  /** 设置已播放进度条位置 */\n  public setPlayed(time: number) {\n    // 计算进度比值\n    const per = time / this.player.duration || 0;\n    // 修改滑块位置\n    this.$thumb.style.left = `${per * 100}%`;\n    // 修改滑动痕迹宽度\n    this.$played.style.width = `${per * 100}%`;\n  }\n\n  /** 设置已播放进度条位置 */\n  public setBuffered(time: number) {\n    // 计算进度比值\n    const per = time / this.player.duration || 0;\n    // 修改滑动痕迹宽度\n    this.$buffered.style.width = `${per * 100}%`;\n  }\n\n  /** 设置进度条活跃状态 */\n  private setActive(flag: boolean) {\n    this.isActive = flag;\n    this.$el.classList.toggle(`${classPrefix}-progress-active`, flag);\n    if (flag) {\n      this.player.isControlled = true;\n    } else {\n      this.player.isControlled = false;\n    }\n  }\n\n  /** 更新指针位置 */\n  public updateTip() {\n    if (!this.isActive) this.setActive(true);\n    let per = this.distance / this.trackLength;\n    per = per >= 1 ? 1 : per <= 0 ? 0 : per;\n    this.$tip.style.left = `${per * 100}%`;\n    this.$preview.style.left = `${per * 100}%`;\n    this.$time.innerText = secondToTime(this.nValue);\n  }\n}\n","import { classPrefix } from \"@/config\";\r\nimport { Player } from \"@/player\";\r\nimport { PanelPlugin } from \"@/plugin\";\r\nimport { Checkbox, Picker } from \"@/components\";\r\nimport { createElement } from \"@/utils\";\r\n\r\ndeclare module \"@core\" {\r\n  interface PlayerPlugins {\r\n    settings?: Settings;\r\n  }\r\n}\r\n\r\nconst templateHTML = /*html*/ `\r\n  <div class=\"${classPrefix}-settings-slot\">\r\n    <div class=\"${classPrefix}-panel-row\">\r\n      <div class=\"${classPrefix}-row-label\">播放倍速</div>\r\n      <div class=\"${classPrefix}-settings-rate-picker\"></div>\r\n    </div>\r\n    <div class=\"${classPrefix}-panel-row\">\r\n      <div class=\"${classPrefix}-row-label\">视频比例</div>\r\n      <div class=\"${classPrefix}-settings-ratio-picker\"></div>\r\n    </div>\r\n  </div>\r\n  <div class=\"${classPrefix}-panel-row\">\r\n    <div class=\"${classPrefix}-row-label\">播放方式</div>\r\n    <div class=\"${classPrefix}-settings-play\"></div>\r\n  </div>\r\n  <div class=\"${classPrefix}-panel-row\">\r\n    <div class=\"${classPrefix}-row-label\">其他设置</div>\r\n    <div class=\"${classPrefix}-settings-others\"></div>\r\n  </div>\r\n`;\r\n\r\nexport default class Settings extends PanelPlugin {\r\n  static pluginName = \"settings\";\r\n\r\n  title = \"设置\";\r\n\r\n  $slot: HTMLElement;\r\n  $play: HTMLElement;\r\n  $others: HTMLElement;\r\n\r\n  $ratePicker: HTMLElement;\r\n  $ratioPicker: HTMLElement;\r\n\r\n  pickerRate!: Picker;\r\n  pickerRatio!: Picker;\r\n  toggleAutoplay!: Checkbox;\r\n  toggleAutopart!: Checkbox;\r\n\r\n  constructor(player: Player) {\r\n    super(player, createElement(\"div\", { class: `${classPrefix}-settings` }, templateHTML));\r\n    this.$slot = this.$(`.${classPrefix}-settings-slot`)!;\r\n    this.$play = this.$(`.${classPrefix}-settings-play`)!;\r\n    this.$others = this.$(`.${classPrefix}-settings-others`)!;\r\n\r\n    this.$ratePicker = this.$(`.${classPrefix}-settings-rate-picker`)!;\r\n    this.$ratioPicker = this.$(`.${classPrefix}-settings-ratio-picker`)!;\r\n  }\r\n  init() {\r\n    this.pickerRate = new Picker({\r\n      container: this.$ratePicker,\r\n      list: [\r\n        { value: 0.5, label: \"0.5\" },\r\n        { value: 0.75, label: \"0.75\" },\r\n        { value: 1, label: \"1.0\" },\r\n        { value: 1.25, label: \"1.25\" },\r\n        { value: 1.5, label: \"1.5\" },\r\n        { value: 2, label: \"2.0\" },\r\n      ],\r\n      value: this.player.playbackRate || 1,\r\n      onPick: (value) => {\r\n        this.player.setPlaybackRate(Number(value));\r\n      },\r\n    });\r\n    this.player.on(\"ratechange\", (rate: number) => {\r\n      this.pickerRate.setValue(rate);\r\n    });\r\n\r\n    this.pickerRatio = new Picker({\r\n      container: this.$ratioPicker,\r\n      list: [\r\n        { value: \"\", label: \"自动\" },\r\n        { value: \"16/9\", label: \"16:9\" },\r\n        { value: \"4/3\", label: \"4:3\" },\r\n      ],\r\n      value: this.player.aspectRatio || \"\",\r\n      onPick: (value) => {\r\n        this.player.setAspectRatio?.((value || \"\") as string);\r\n      },\r\n    });\r\n    this.player.on(\"aspectRatioChange\", (ratio) => {\r\n      this.pickerRatio.setValue(ratio);\r\n    });\r\n  }\r\n}\r\n","import { classPrefix } from \"@/config\";\r\nimport { Player } from \"@/player\";\r\nimport { PlayerOptions } from \"@/types\";\r\nimport { BasePlugin, PanelItem, PluginFrom } from \"@/plugin\";\r\nimport { createElement } from \"@/utils\";\r\n\r\nconst templateHTML = /*html*/ `\r\n  <div class=\"${classPrefix}-side-mask\"></div>\r\n  <div class=\"${classPrefix}-side\">\r\n    <div class=\"${classPrefix}-side-head\">\r\n      <div class=\"${classPrefix}-side-title\"></div>\r\n      <div class=\"${classPrefix}-side-close\">\r\n        <i class=\"mpicon-close\"></i>\r\n      </div>\r\n    </div>\r\n    <div class=\"${classPrefix}-side-content\"></div>\r\n  </div>\r\n`;\r\n\r\ndeclare module \"@core\" {\r\n  interface PlayerPlugins {\r\n    side?: Side;\r\n  }\r\n  interface PlayerOptions {\r\n    side?: {\r\n      panels?: PluginFrom<PanelItem>[];\r\n    };\r\n  }\r\n}\r\n\r\nexport default class Side extends BasePlugin {\r\n  static readonly pluginName = \"side\";\r\n  container: HTMLElement;\r\n  $el: HTMLElement;\r\n  $mask: HTMLElement;\r\n  $content: HTMLElement;\r\n  $title: HTMLElement;\r\n  $close: HTMLElement;\r\n  current: PanelItem | null = null;\r\n  #initPanels: PluginFrom<PanelItem>[] = [];\r\n  get isShow(): boolean {\r\n    return this.container.classList.contains(\"is-show\");\r\n  }\r\n\r\n  constructor(player: Player) {\r\n    super(player);\r\n    this.container = createElement(\"div\", { class: `${classPrefix}-side-wrap` }, templateHTML);\r\n    this.$el = this.container.querySelector(`.${classPrefix}-side`)!;\r\n    this.$mask = this.container.querySelector(`.${classPrefix}-side-mask`)!;\r\n    this.$content = this.$el.querySelector(`.${classPrefix}-side-content`)!;\r\n    this.$title = this.$el.querySelector(`.${classPrefix}-side-title`)!;\r\n    this.$close = this.$el.querySelector(`.${classPrefix}-side-close`)!;\r\n\r\n    this.player.$main.appendChild(this.container);\r\n  }\r\n  init() {\r\n    // --- 事件 --- //\r\n    this.$mask.addEventListener(\"click\", () => {\r\n      this.hide();\r\n    });\r\n    this.$close.addEventListener(\"click\", () => {\r\n      this.hide();\r\n    });\r\n  }\r\n  apply(player: Player, options: PlayerOptions): void {\r\n    this.#initPanels = options.side?.panels || [];\r\n  }\r\n  ready(): void {\r\n    this.#initPanels.forEach((item) => {\r\n      const panel = this.player.plugin.from(item);\r\n      panel && this.mount(panel);\r\n    });\r\n    this.#initPanels = [];\r\n  }\r\n\r\n  hide() {\r\n    this.current?.toggle(false);\r\n  }\r\n\r\n  mount(panel: PanelItem) {\r\n    panel.mount(this.$content, {\r\n      onToggle: (flag) => {\r\n        if (flag) {\r\n          this.current?.toggle(false);\r\n          for (const a of this.$content.children) {\r\n            a.classList.toggle(\"is-show\", a == panel.$el);\r\n          }\r\n          this.container.classList.add(\"is-show\");\r\n          this.$title.innerText = panel.title || \"\";\r\n          this.current = panel;\r\n        } else {\r\n          if (this.current == panel) {\r\n            this.container.classList.remove(\"is-show\");\r\n            panel.$el.classList.remove(\"is-show\");\r\n            this.$title.innerText = \"\";\r\n            this.current = null;\r\n          }\r\n        }\r\n      },\r\n    });\r\n  }\r\n}\r\n","import { Player } from \"@/player\";\r\nimport { BasePlugin } from \"@/plugin\";\r\n\r\ndeclare module \"@core\" {\r\n  interface Player {\r\n    /** 是否为画中画模式 */\r\n    isPip?: boolean;\r\n    /** 进入画中画模式 */\r\n    enterPip?: () => void;\r\n    /** 退出画中画模式 */\r\n    exitPip?: () => void;\r\n  }\r\n}\r\n\r\nexport default class Pip extends BasePlugin {\r\n  static pluginName = \"pip\";\r\n\r\n  constructor(player: Player) {\r\n    super(player);\r\n\r\n    // --- 绑定属性 --- //\r\n    this.player.define(\"isPip\", {\r\n      get: () => this.status,\r\n    });\r\n    this.player.define(\"enterPip\", () => this.enter());\r\n    this.player.define(\"exitPip\", () => this.exit());\r\n\r\n    // --- 绑定事件 --- //\r\n    this.player.on(\"enterpictureinpicture\", () => {\r\n      this.player.$el.classList.add(\"is-pip\");\r\n      this.player.emit(\"enterpictureinpicture\");\r\n    });\r\n    this.player.on(\"leavepictureinpicture\", () => {\r\n      this.player.$el.classList.remove(\"is-pip\");\r\n      this.player.emit(\"leavepictureinpicture\");\r\n    });\r\n    // 进入画中画时，退出全屏模式\r\n    this.player.on(\"enterpictureinpicture\", () => {\r\n      this.player.exitFullscreen?.();\r\n    });\r\n    // 进入全屏时，退出画中画模式\r\n    this.player.on(\"fullscreenEnter\", () => {\r\n      this.exit();\r\n    });\r\n  }\r\n\r\n  enter() {\r\n    if (this.status) return;\r\n    this.player.$video.requestPictureInPicture();\r\n  }\r\n\r\n  exit() {\r\n    if (!this.status) return;\r\n    document.exitPictureInPicture();\r\n  }\r\n\r\n  get status(): boolean {\r\n    return !!(document.pictureInPictureElement == this.player.$video);\r\n  }\r\n}\r\n","import { Player } from \"@/player\";\nimport { BasePlugin } from \"@/plugin\";\n\ndeclare module \"@core\" {\n  interface Player {\n    /** 是否为全屏模式 */\n    isFullscreen?: boolean;\n    /** 进入全屏模式 */\n    enterFullscreen?: () => void;\n    /** 退出全屏模式 */\n    exitFullscreen?: () => void;\n  }\n}\ndeclare module \"@core\" {\n  interface PlayerEventMap {\n    /** 进入全屏模式 */\n    fullscreenEnter: () => void;\n    /** 退出全屏模式 */\n    fullscreenExit: () => void;\n  }\n}\n\nexport default class Fullscreen extends BasePlugin {\n  static pluginName = \"fullscreen\";\n\n  $el: HTMLElement;\n\n  constructor(player: Player) {\n    super(player);\n    this.$el = this.player.$main;\n\n    // --- 绑定属性 --- //\n    this.player.define(\"isFullscreen\", {\n      get: () => this.status,\n    });\n    this.player.define(\"enterFullscreen\", () => this.enter());\n    this.player.define(\"exitFullscreen\", () => this.exit());\n\n    // --- 绑定事件 --- //\n    const fullScreenChangeHandler = () => {\n      if (this.status) {\n        this.player.$el.classList.add(\"is-fullscreen\");\n        this.player.emit(\"fullscreenEnter\");\n      } else {\n        this.player.$el.classList.remove(\"is-fullscreen\");\n        this.player.emit(\"fullscreenExit\");\n      }\n    };\n    this.$el.addEventListener(\"fullscreenchange\", fullScreenChangeHandler);\n    this.$el.addEventListener(\"webkitfullscreenchange\", fullScreenChangeHandler);\n    this.$el.addEventListener(\"mozfullscreenchange\", fullScreenChangeHandler);\n    this.$el.addEventListener(\"msfullscreenchange\", fullScreenChangeHandler);\n  }\n\n  enter() {\n    if (this.status) return;\n    const el: any = this.$el;\n    if (el.requestFullscreen) {\n      el.requestFullscreen();\n    } else if (el.mozRequestFullScreen) {\n      el.mozRequestFullScreen();\n    } else if (el.webkitRequestFullscreen) {\n      el.webkitRequestFullscreen();\n    } else if (el.webkitEnterFullscreen) {\n      // Safari for iOS\n      el.webkitEnterFullscreen();\n    } else if (el.webkitEnterFullScreen) {\n      el.webkitEnterFullScreen();\n    } else if (el.msRequestFullscreen) {\n      el.msRequestFullscreen();\n    }\n  }\n\n  exit() {\n    if (!this.status) return;\n    const doc: any = document;\n    if (document.exitFullscreen) {\n      document.exitFullscreen();\n    } else if (doc.mozCancelFullScreen) {\n      doc.mozCancelFullScreen();\n    } else if (doc.webkitExitFullscreen) {\n      doc.webkitExitFullscreen();\n    } else if (doc.webkitExitFullScreen) {\n      doc.webkitExitFullScreen();\n    } else if ((this.$el as any).msExitFullscreen!) {\n      (this.$el as any).msExitFullscreen();\n    }\n  }\n\n  get status(): boolean {\n    return !!(\n      document.fullscreenElement ||\n      (document as any).mozFullScreenElement ||\n      (document as any).webkitFullscreenElement ||\n      (document as any).msFullscreenElement == this.$el\n    );\n  }\n}\n","import { BasePlugin } from \"@/plugin\";\r\nimport { PlayerOptions } from \"@/types\";\r\nimport { Player } from \"@core\";\r\n\r\ndeclare module \"@core\" {\r\n  interface Player {\r\n    userId?: number;\r\n    authorId?: number;\r\n    login?: () => Promise<void>;\r\n  }\r\n  interface PlayerEventMap {\r\n    login: (userId: number) => void;\r\n  }\r\n  interface PlayerOptions {\r\n    userId?: number;\r\n  }\r\n  interface PlayerInvokes {\r\n    login?: () => Promise<number>;\r\n  }\r\n  interface VideoInfo {\r\n    author?: {\r\n      id: number;\r\n    };\r\n  }\r\n}\r\n\r\nexport default class User extends BasePlugin {\r\n  static pluginName = \"user\";\r\n  #userId = 0;\r\n  #authorId = 0;\r\n\r\n  public invokeLogin?: () => Promise<number>;\r\n  init() {\r\n    this.player.define(\"userId\", { get: () => this.#userId });\r\n    this.player.define(\"authorId\", { get: () => this.#authorId });\r\n    this.player.define(\"login\", () => {\r\n      return this.login();\r\n    });\r\n    this.player.on(\"videoChange\", ({ author }) => {\r\n      if (author?.id != null) {\r\n        this.#authorId = author.id || 0;\r\n      }\r\n    });\r\n  }\r\n  apply(player: Player, options: PlayerOptions): void {\r\n    this.#userId = options.userId || 0;\r\n    this.invokeLogin = options.invoke?.login;\r\n  }\r\n  /** 调用页面登录 */\r\n  async login() {\r\n    await this.invokeLogin?.().then((res) => {\r\n      res != null && this.setUser(res);\r\n    });\r\n  }\r\n  /** 设置用户 */\r\n  async setUser(userId: number) {\r\n    this.#userId = userId;\r\n    this.player.emit(\"login\", userId);\r\n  }\r\n}\r\n","import type { PlayerOptions } from \"@/types\";\r\nimport { Player } from \"@/player\";\r\nimport { BasePlugin } from \"@/plugin\";\r\nimport { debounce } from \"@/utils\";\r\n\r\ndeclare module \"@core\" {\r\n  interface Player {\r\n    /** 是否为活跃状态 */\r\n    isActive?: boolean;\r\n    /** 是否为操作中状态 */\r\n    isControlled?: boolean;\r\n    /** 设置活跃状态 */\r\n    setActive?: () => void;\r\n    /** 移除活跃状态 */\r\n    removeActive?: () => void;\r\n  }\r\n  interface PlayerOptions {\r\n    /** 活跃持续时间 */\r\n    activeDuration?: number;\r\n  }\r\n  interface PlayerEventMap {\r\n    active: () => void;\r\n    inactive: () => void;\r\n  }\r\n  interface PlayerHookMap {\r\n    inactive: void;\r\n  }\r\n  interface PlayerPlugins {\r\n    stateActive?: StateActive;\r\n  }\r\n}\r\n\r\n/** 活跃状态插件 */\r\n\r\nexport default class StateActive extends BasePlugin {\r\n  static readonly pluginName = \"stateActive\";\r\n  #status = false;\r\n  #mousemove = false;\r\n  /** 活跃持续时间 */\r\n  public activeDuration: number = 3000;\r\n  constructor(player: Player) {\r\n    super(player);\r\n\r\n    // --- 绑定属性 --- //\r\n    this.player.define(\"isActive\", {\r\n      get: () => this.#status,\r\n    });\r\n\r\n    // --- 绑定事件 --- //\r\n    const debounceRemoveActive = debounce(() => {\r\n      this.#mousemove = false;\r\n      this.remove();\r\n    }, this.activeDuration);\r\n    this.player.$main.addEventListener(\"mousemove\", () => {\r\n      this.#mousemove = true;\r\n      this.set();\r\n      debounceRemoveActive();\r\n    });\r\n    this.player.$main.addEventListener(\"mouseleave\", () => {\r\n      this.#mousemove = false;\r\n      this.remove();\r\n    });\r\n  }\r\n\r\n  apply(player: Player, options: PlayerOptions) {\r\n    this.activeDuration = options.activeDuration ?? 3000;\r\n  }\r\n\r\n  /** 设置播放器活跃状态 */\r\n  set() {\r\n    if (this.#status) return;\r\n    this.player.$el.classList.add(\"is-active\");\r\n    this.#status = true;\r\n    this.player.emit(\"active\");\r\n  }\r\n  /** 移除播放器活跃状态 */\r\n  remove() {\r\n    if (!this.#status || this.#mousemove || this.player.isControlled) return;\r\n    this.player.hook.call(\"inactive\").then((res) => {\r\n      if (!res) return;\r\n      this.player.$el.classList.remove(\"is-active\");\r\n      this.#status = false;\r\n      this.player.emit(\"inactive\");\r\n    });\r\n  }\r\n}\r\n","import type { PlayerOptions } from \"@/types\";\r\nimport { Player } from \"@/player\";\r\nimport { BasePlugin } from \"@/plugin\";\r\n\r\ndeclare module \"@core\" {\r\n  interface Player {\r\n    /** 是否为聚焦状态 */\r\n    isFocused?: boolean;\r\n    /** 播放器聚焦 */\r\n    focus?: () => void;\r\n    /** 播放器取消聚焦 */\r\n    blur?: () => void;\r\n  }\r\n  interface PlayerEventMap {\r\n    focus: () => void;\r\n    blur: () => void;\r\n  }\r\n}\r\n\r\n/** 聚焦状态插件 */\r\n\r\nexport default class StateFocus extends BasePlugin {\r\n  static readonly pluginName = \"stateFocus\";\r\n  constructor(player: Player) {\r\n    super(player);\r\n\r\n    // --- 绑定属性 --- //\r\n    this.player.define(\"isFocused\", {\r\n      get: () => this.status,\r\n    });\r\n\r\n    // --- 绑定事件 --- //\r\n    document.addEventListener(\r\n      \"click\",\r\n      () => {\r\n        this.toggle(false);\r\n      },\r\n      true\r\n    );\r\n    this.player.$el.addEventListener(\r\n      \"click\",\r\n      () => {\r\n        this.toggle(true);\r\n      },\r\n      true\r\n    );\r\n  }\r\n\r\n  /** 设置播放器聚焦状态 */\r\n  toggle(flag: boolean) {\r\n    if (this.status == flag) return;\r\n    this.player.$el.classList.toggle(\"is-focus\", flag);\r\n    this.player.emit(flag ? \"focus\" : \"blur\");\r\n  }\r\n\r\n  get status() {\r\n    return this.player.$el.classList.contains(\"is-focus\");\r\n  }\r\n}\r\n","var resizeObservers = [];\nexport { resizeObservers };\n","import { resizeObservers } from '../utils/resizeObservers';\nvar hasActiveObservations = function () {\n    return resizeObservers.some(function (ro) { return ro.activeTargets.length > 0; });\n};\nexport { hasActiveObservations };\n","import { resizeObservers } from '../utils/resizeObservers';\nvar hasSkippedObservations = function () {\n    return resizeObservers.some(function (ro) { return ro.skippedTargets.length > 0; });\n};\nexport { hasSkippedObservations };\n","var msg = 'ResizeObserver loop completed with undelivered notifications.';\nvar deliverResizeLoopError = function () {\n    var event;\n    if (typeof ErrorEvent === 'function') {\n        event = new ErrorEvent('error', {\n            message: msg\n        });\n    }\n    else {\n        event = document.createEvent('Event');\n        event.initEvent('error', false, false);\n        event.message = msg;\n    }\n    window.dispatchEvent(event);\n};\nexport { deliverResizeLoopError };\n","var ResizeObserverBoxOptions;\n(function (ResizeObserverBoxOptions) {\n    ResizeObserverBoxOptions[\"BORDER_BOX\"] = \"border-box\";\n    ResizeObserverBoxOptions[\"CONTENT_BOX\"] = \"content-box\";\n    ResizeObserverBoxOptions[\"DEVICE_PIXEL_CONTENT_BOX\"] = \"device-pixel-content-box\";\n})(ResizeObserverBoxOptions || (ResizeObserverBoxOptions = {}));\nexport { ResizeObserverBoxOptions };\n","export var freeze = function (obj) { return Object.freeze(obj); };\n","import { freeze } from './utils/freeze';\nvar ResizeObserverSize = (function () {\n    function ResizeObserverSize(inlineSize, blockSize) {\n        this.inlineSize = inlineSize;\n        this.blockSize = blockSize;\n        freeze(this);\n    }\n    return ResizeObserverSize;\n}());\nexport { ResizeObserverSize };\n","import { freeze } from './utils/freeze';\nvar DOMRectReadOnly = (function () {\n    function DOMRectReadOnly(x, y, width, height) {\n        this.x = x;\n        this.y = y;\n        this.width = width;\n        this.height = height;\n        this.top = this.y;\n        this.left = this.x;\n        this.bottom = this.top + this.height;\n        this.right = this.left + this.width;\n        return freeze(this);\n    }\n    DOMRectReadOnly.prototype.toJSON = function () {\n        var _a = this, x = _a.x, y = _a.y, top = _a.top, right = _a.right, bottom = _a.bottom, left = _a.left, width = _a.width, height = _a.height;\n        return { x: x, y: y, top: top, right: right, bottom: bottom, left: left, width: width, height: height };\n    };\n    DOMRectReadOnly.fromRect = function (rectangle) {\n        return new DOMRectReadOnly(rectangle.x, rectangle.y, rectangle.width, rectangle.height);\n    };\n    return DOMRectReadOnly;\n}());\nexport { DOMRectReadOnly };\n","var isSVG = function (target) { return target instanceof SVGElement && 'getBBox' in target; };\nvar isHidden = function (target) {\n    if (isSVG(target)) {\n        var _a = target.getBBox(), width = _a.width, height = _a.height;\n        return !width && !height;\n    }\n    var _b = target, offsetWidth = _b.offsetWidth, offsetHeight = _b.offsetHeight;\n    return !(offsetWidth || offsetHeight || target.getClientRects().length);\n};\nvar isElement = function (obj) {\n    var _a;\n    if (obj instanceof Element) {\n        return true;\n    }\n    var scope = (_a = obj === null || obj === void 0 ? void 0 : obj.ownerDocument) === null || _a === void 0 ? void 0 : _a.defaultView;\n    return !!(scope && obj instanceof scope.Element);\n};\nvar isReplacedElement = function (target) {\n    switch (target.tagName) {\n        case 'INPUT':\n            if (target.type !== 'image') {\n                break;\n            }\n        case 'VIDEO':\n        case 'AUDIO':\n        case 'EMBED':\n        case 'OBJECT':\n        case 'CANVAS':\n        case 'IFRAME':\n        case 'IMG':\n            return true;\n    }\n    return false;\n};\nexport { isSVG, isHidden, isElement, isReplacedElement };\n","export var global = typeof window !== 'undefined' ? window : {};\n","import { ResizeObserverBoxOptions } from '../ResizeObserverBoxOptions';\nimport { ResizeObserverSize } from '../ResizeObserverSize';\nimport { DOMRectReadOnly } from '../DOMRectReadOnly';\nimport { isSVG, isHidden } from '../utils/element';\nimport { freeze } from '../utils/freeze';\nimport { global } from '../utils/global';\nvar cache = new WeakMap();\nvar scrollRegexp = /auto|scroll/;\nvar verticalRegexp = /^tb|vertical/;\nvar IE = (/msie|trident/i).test(global.navigator && global.navigator.userAgent);\nvar parseDimension = function (pixel) { return parseFloat(pixel || '0'); };\nvar size = function (inlineSize, blockSize, switchSizes) {\n    if (inlineSize === void 0) { inlineSize = 0; }\n    if (blockSize === void 0) { blockSize = 0; }\n    if (switchSizes === void 0) { switchSizes = false; }\n    return new ResizeObserverSize((switchSizes ? blockSize : inlineSize) || 0, (switchSizes ? inlineSize : blockSize) || 0);\n};\nvar zeroBoxes = freeze({\n    devicePixelContentBoxSize: size(),\n    borderBoxSize: size(),\n    contentBoxSize: size(),\n    contentRect: new DOMRectReadOnly(0, 0, 0, 0)\n});\nvar calculateBoxSizes = function (target, forceRecalculation) {\n    if (forceRecalculation === void 0) { forceRecalculation = false; }\n    if (cache.has(target) && !forceRecalculation) {\n        return cache.get(target);\n    }\n    if (isHidden(target)) {\n        cache.set(target, zeroBoxes);\n        return zeroBoxes;\n    }\n    var cs = getComputedStyle(target);\n    var svg = isSVG(target) && target.ownerSVGElement && target.getBBox();\n    var removePadding = !IE && cs.boxSizing === 'border-box';\n    var switchSizes = verticalRegexp.test(cs.writingMode || '');\n    var canScrollVertically = !svg && scrollRegexp.test(cs.overflowY || '');\n    var canScrollHorizontally = !svg && scrollRegexp.test(cs.overflowX || '');\n    var paddingTop = svg ? 0 : parseDimension(cs.paddingTop);\n    var paddingRight = svg ? 0 : parseDimension(cs.paddingRight);\n    var paddingBottom = svg ? 0 : parseDimension(cs.paddingBottom);\n    var paddingLeft = svg ? 0 : parseDimension(cs.paddingLeft);\n    var borderTop = svg ? 0 : parseDimension(cs.borderTopWidth);\n    var borderRight = svg ? 0 : parseDimension(cs.borderRightWidth);\n    var borderBottom = svg ? 0 : parseDimension(cs.borderBottomWidth);\n    var borderLeft = svg ? 0 : parseDimension(cs.borderLeftWidth);\n    var horizontalPadding = paddingLeft + paddingRight;\n    var verticalPadding = paddingTop + paddingBottom;\n    var horizontalBorderArea = borderLeft + borderRight;\n    var verticalBorderArea = borderTop + borderBottom;\n    var horizontalScrollbarThickness = !canScrollHorizontally ? 0 : target.offsetHeight - verticalBorderArea - target.clientHeight;\n    var verticalScrollbarThickness = !canScrollVertically ? 0 : target.offsetWidth - horizontalBorderArea - target.clientWidth;\n    var widthReduction = removePadding ? horizontalPadding + horizontalBorderArea : 0;\n    var heightReduction = removePadding ? verticalPadding + verticalBorderArea : 0;\n    var contentWidth = svg ? svg.width : parseDimension(cs.width) - widthReduction - verticalScrollbarThickness;\n    var contentHeight = svg ? svg.height : parseDimension(cs.height) - heightReduction - horizontalScrollbarThickness;\n    var borderBoxWidth = contentWidth + horizontalPadding + verticalScrollbarThickness + horizontalBorderArea;\n    var borderBoxHeight = contentHeight + verticalPadding + horizontalScrollbarThickness + verticalBorderArea;\n    var boxes = freeze({\n        devicePixelContentBoxSize: size(Math.round(contentWidth * devicePixelRatio), Math.round(contentHeight * devicePixelRatio), switchSizes),\n        borderBoxSize: size(borderBoxWidth, borderBoxHeight, switchSizes),\n        contentBoxSize: size(contentWidth, contentHeight, switchSizes),\n        contentRect: new DOMRectReadOnly(paddingLeft, paddingTop, contentWidth, contentHeight)\n    });\n    cache.set(target, boxes);\n    return boxes;\n};\nvar calculateBoxSize = function (target, observedBox, forceRecalculation) {\n    var _a = calculateBoxSizes(target, forceRecalculation), borderBoxSize = _a.borderBoxSize, contentBoxSize = _a.contentBoxSize, devicePixelContentBoxSize = _a.devicePixelContentBoxSize;\n    switch (observedBox) {\n        case ResizeObserverBoxOptions.DEVICE_PIXEL_CONTENT_BOX:\n            return devicePixelContentBoxSize;\n        case ResizeObserverBoxOptions.BORDER_BOX:\n            return borderBoxSize;\n        default:\n            return contentBoxSize;\n    }\n};\nexport { calculateBoxSize, calculateBoxSizes };\n","import { calculateBoxSizes } from './algorithms/calculateBoxSize';\nimport { freeze } from './utils/freeze';\nvar ResizeObserverEntry = (function () {\n    function ResizeObserverEntry(target) {\n        var boxes = calculateBoxSizes(target);\n        this.target = target;\n        this.contentRect = boxes.contentRect;\n        this.borderBoxSize = freeze([boxes.borderBoxSize]);\n        this.contentBoxSize = freeze([boxes.contentBoxSize]);\n        this.devicePixelContentBoxSize = freeze([boxes.devicePixelContentBoxSize]);\n    }\n    return ResizeObserverEntry;\n}());\nexport { ResizeObserverEntry };\n","import { isHidden } from '../utils/element';\nvar calculateDepthForNode = function (node) {\n    if (isHidden(node)) {\n        return Infinity;\n    }\n    var depth = 0;\n    var parent = node.parentNode;\n    while (parent) {\n        depth += 1;\n        parent = parent.parentNode;\n    }\n    return depth;\n};\nexport { calculateDepthForNode };\n","import { resizeObservers } from '../utils/resizeObservers';\nimport { ResizeObserverEntry } from '../ResizeObserverEntry';\nimport { calculateDepthForNode } from './calculateDepthForNode';\nimport { calculateBoxSize } from './calculateBoxSize';\nvar broadcastActiveObservations = function () {\n    var shallowestDepth = Infinity;\n    var callbacks = [];\n    resizeObservers.forEach(function processObserver(ro) {\n        if (ro.activeTargets.length === 0) {\n            return;\n        }\n        var entries = [];\n        ro.activeTargets.forEach(function processTarget(ot) {\n            var entry = new ResizeObserverEntry(ot.target);\n            var targetDepth = calculateDepthForNode(ot.target);\n            entries.push(entry);\n            ot.lastReportedSize = calculateBoxSize(ot.target, ot.observedBox);\n            if (targetDepth < shallowestDepth) {\n                shallowestDepth = targetDepth;\n            }\n        });\n        callbacks.push(function resizeObserverCallback() {\n            ro.callback.call(ro.observer, entries, ro.observer);\n        });\n        ro.activeTargets.splice(0, ro.activeTargets.length);\n    });\n    for (var _i = 0, callbacks_1 = callbacks; _i < callbacks_1.length; _i++) {\n        var callback = callbacks_1[_i];\n        callback();\n    }\n    return shallowestDepth;\n};\nexport { broadcastActiveObservations };\n","import { resizeObservers } from '../utils/resizeObservers';\nimport { calculateDepthForNode } from './calculateDepthForNode';\nvar gatherActiveObservationsAtDepth = function (depth) {\n    resizeObservers.forEach(function processObserver(ro) {\n        ro.activeTargets.splice(0, ro.activeTargets.length);\n        ro.skippedTargets.splice(0, ro.skippedTargets.length);\n        ro.observationTargets.forEach(function processTarget(ot) {\n            if (ot.isActive()) {\n                if (calculateDepthForNode(ot.target) > depth) {\n                    ro.activeTargets.push(ot);\n                }\n                else {\n                    ro.skippedTargets.push(ot);\n                }\n            }\n        });\n    });\n};\nexport { gatherActiveObservationsAtDepth };\n","import { hasActiveObservations } from '../algorithms/hasActiveObservations';\nimport { hasSkippedObservations } from '../algorithms/hasSkippedObservations';\nimport { deliverResizeLoopError } from '../algorithms/deliverResizeLoopError';\nimport { broadcastActiveObservations } from '../algorithms/broadcastActiveObservations';\nimport { gatherActiveObservationsAtDepth } from '../algorithms/gatherActiveObservationsAtDepth';\nvar process = function () {\n    var depth = 0;\n    gatherActiveObservationsAtDepth(depth);\n    while (hasActiveObservations()) {\n        depth = broadcastActiveObservations();\n        gatherActiveObservationsAtDepth(depth);\n    }\n    if (hasSkippedObservations()) {\n        deliverResizeLoopError();\n    }\n    return depth > 0;\n};\nexport { process };\n","var trigger;\nvar callbacks = [];\nvar notify = function () { return callbacks.splice(0).forEach(function (cb) { return cb(); }); };\nvar queueMicroTask = function (callback) {\n    if (!trigger) {\n        var toggle_1 = 0;\n        var el_1 = document.createTextNode('');\n        var config = { characterData: true };\n        new MutationObserver(function () { return notify(); }).observe(el_1, config);\n        trigger = function () { el_1.textContent = \"\".concat(toggle_1 ? toggle_1-- : toggle_1++); };\n    }\n    callbacks.push(callback);\n    trigger();\n};\nexport { queueMicroTask };\n","import { queueMicroTask } from './queueMicroTask';\nvar queueResizeObserver = function (cb) {\n    queueMicroTask(function ResizeObserver() {\n        requestAnimationFrame(cb);\n    });\n};\nexport { queueResizeObserver };\n","import { process } from './process';\nimport { global } from './global';\nimport { queueResizeObserver } from './queueResizeObserver';\nvar watching = 0;\nvar isWatching = function () { return !!watching; };\nvar CATCH_PERIOD = 250;\nvar observerConfig = { attributes: true, characterData: true, childList: true, subtree: true };\nvar events = [\n    'resize',\n    'load',\n    'transitionend',\n    'animationend',\n    'animationstart',\n    'animationiteration',\n    'keyup',\n    'keydown',\n    'mouseup',\n    'mousedown',\n    'mouseover',\n    'mouseout',\n    'blur',\n    'focus'\n];\nvar time = function (timeout) {\n    if (timeout === void 0) { timeout = 0; }\n    return Date.now() + timeout;\n};\nvar scheduled = false;\nvar Scheduler = (function () {\n    function Scheduler() {\n        var _this = this;\n        this.stopped = true;\n        this.listener = function () { return _this.schedule(); };\n    }\n    Scheduler.prototype.run = function (timeout) {\n        var _this = this;\n        if (timeout === void 0) { timeout = CATCH_PERIOD; }\n        if (scheduled) {\n            return;\n        }\n        scheduled = true;\n        var until = time(timeout);\n        queueResizeObserver(function () {\n            var elementsHaveResized = false;\n            try {\n                elementsHaveResized = process();\n            }\n            finally {\n                scheduled = false;\n                timeout = until - time();\n                if (!isWatching()) {\n                    return;\n                }\n                if (elementsHaveResized) {\n                    _this.run(1000);\n                }\n                else if (timeout > 0) {\n                    _this.run(timeout);\n                }\n                else {\n                    _this.start();\n                }\n            }\n        });\n    };\n    Scheduler.prototype.schedule = function () {\n        this.stop();\n        this.run();\n    };\n    Scheduler.prototype.observe = function () {\n        var _this = this;\n        var cb = function () { return _this.observer && _this.observer.observe(document.body, observerConfig); };\n        document.body ? cb() : global.addEventListener('DOMContentLoaded', cb);\n    };\n    Scheduler.prototype.start = function () {\n        var _this = this;\n        if (this.stopped) {\n            this.stopped = false;\n            this.observer = new MutationObserver(this.listener);\n            this.observe();\n            events.forEach(function (name) { return global.addEventListener(name, _this.listener, true); });\n        }\n    };\n    Scheduler.prototype.stop = function () {\n        var _this = this;\n        if (!this.stopped) {\n            this.observer && this.observer.disconnect();\n            events.forEach(function (name) { return global.removeEventListener(name, _this.listener, true); });\n            this.stopped = true;\n        }\n    };\n    return Scheduler;\n}());\nvar scheduler = new Scheduler();\nvar updateCount = function (n) {\n    !watching && n > 0 && scheduler.start();\n    watching += n;\n    !watching && scheduler.stop();\n};\nexport { scheduler, updateCount };\n","import { ResizeObserverBoxOptions } from './ResizeObserverBoxOptions';\nimport { calculateBoxSize } from './algorithms/calculateBoxSize';\nimport { isSVG, isReplacedElement } from './utils/element';\nvar skipNotifyOnElement = function (target) {\n    return !isSVG(target)\n        && !isReplacedElement(target)\n        && getComputedStyle(target).display === 'inline';\n};\nvar ResizeObservation = (function () {\n    function ResizeObservation(target, observedBox) {\n        this.target = target;\n        this.observedBox = observedBox || ResizeObserverBoxOptions.CONTENT_BOX;\n        this.lastReportedSize = {\n            inlineSize: 0,\n            blockSize: 0\n        };\n    }\n    ResizeObservation.prototype.isActive = function () {\n        var size = calculateBoxSize(this.target, this.observedBox, true);\n        if (skipNotifyOnElement(this.target)) {\n            this.lastReportedSize = size;\n        }\n        if (this.lastReportedSize.inlineSize !== size.inlineSize\n            || this.lastReportedSize.blockSize !== size.blockSize) {\n            return true;\n        }\n        return false;\n    };\n    return ResizeObservation;\n}());\nexport { ResizeObservation };\n","var ResizeObserverDetail = (function () {\n    function ResizeObserverDetail(resizeObserver, callback) {\n        this.activeTargets = [];\n        this.skippedTargets = [];\n        this.observationTargets = [];\n        this.observer = resizeObserver;\n        this.callback = callback;\n    }\n    return ResizeObserverDetail;\n}());\nexport { ResizeObserverDetail };\n","import { scheduler, updateCount } from './utils/scheduler';\nimport { ResizeObservation } from './ResizeObservation';\nimport { ResizeObserverDetail } from './ResizeObserverDetail';\nimport { resizeObservers } from './utils/resizeObservers';\nvar observerMap = new WeakMap();\nvar getObservationIndex = function (observationTargets, target) {\n    for (var i = 0; i < observationTargets.length; i += 1) {\n        if (observationTargets[i].target === target) {\n            return i;\n        }\n    }\n    return -1;\n};\nvar ResizeObserverController = (function () {\n    function ResizeObserverController() {\n    }\n    ResizeObserverController.connect = function (resizeObserver, callback) {\n        var detail = new ResizeObserverDetail(resizeObserver, callback);\n        observerMap.set(resizeObserver, detail);\n    };\n    ResizeObserverController.observe = function (resizeObserver, target, options) {\n        var detail = observerMap.get(resizeObserver);\n        var firstObservation = detail.observationTargets.length === 0;\n        if (getObservationIndex(detail.observationTargets, target) < 0) {\n            firstObservation && resizeObservers.push(detail);\n            detail.observationTargets.push(new ResizeObservation(target, options && options.box));\n            updateCount(1);\n            scheduler.schedule();\n        }\n    };\n    ResizeObserverController.unobserve = function (resizeObserver, target) {\n        var detail = observerMap.get(resizeObserver);\n        var index = getObservationIndex(detail.observationTargets, target);\n        var lastObservation = detail.observationTargets.length === 1;\n        if (index >= 0) {\n            lastObservation && resizeObservers.splice(resizeObservers.indexOf(detail), 1);\n            detail.observationTargets.splice(index, 1);\n            updateCount(-1);\n        }\n    };\n    ResizeObserverController.disconnect = function (resizeObserver) {\n        var _this = this;\n        var detail = observerMap.get(resizeObserver);\n        detail.observationTargets.slice().forEach(function (ot) { return _this.unobserve(resizeObserver, ot.target); });\n        detail.activeTargets.splice(0, detail.activeTargets.length);\n    };\n    return ResizeObserverController;\n}());\nexport { ResizeObserverController };\n","import { ResizeObserverController } from './ResizeObserverController';\nimport { isElement } from './utils/element';\nvar ResizeObserver = (function () {\n    function ResizeObserver(callback) {\n        if (arguments.length === 0) {\n            throw new TypeError(\"Failed to construct 'ResizeObserver': 1 argument required, but only 0 present.\");\n        }\n        if (typeof callback !== 'function') {\n            throw new TypeError(\"Failed to construct 'ResizeObserver': The callback provided as parameter 1 is not a function.\");\n        }\n        ResizeObserverController.connect(this, callback);\n    }\n    ResizeObserver.prototype.observe = function (target, options) {\n        if (arguments.length === 0) {\n            throw new TypeError(\"Failed to execute 'observe' on 'ResizeObserver': 1 argument required, but only 0 present.\");\n        }\n        if (!isElement(target)) {\n            throw new TypeError(\"Failed to execute 'observe' on 'ResizeObserver': parameter 1 is not of type 'Element\");\n        }\n        ResizeObserverController.observe(this, target, options);\n    };\n    ResizeObserver.prototype.unobserve = function (target) {\n        if (arguments.length === 0) {\n            throw new TypeError(\"Failed to execute 'unobserve' on 'ResizeObserver': 1 argument required, but only 0 present.\");\n        }\n        if (!isElement(target)) {\n            throw new TypeError(\"Failed to execute 'unobserve' on 'ResizeObserver': parameter 1 is not of type 'Element\");\n        }\n        ResizeObserverController.unobserve(this, target);\n    };\n    ResizeObserver.prototype.disconnect = function () {\n        ResizeObserverController.disconnect(this);\n    };\n    ResizeObserver.toString = function () {\n        return 'function ResizeObserver () { [polyfill code] }';\n    };\n    return ResizeObserver;\n}());\nexport { ResizeObserver };\n","import type { PlayerOptions } from \"@/types\";\r\nimport { Player } from \"@/player\";\r\nimport { BasePlugin } from \"@/plugin\";\r\nimport { ResizeObserver as ResizeObserverPonyfill } from \"@juggle/resize-observer\";\r\n\r\ndeclare module \"@core\" {\r\n  interface PlayerEventMap {\r\n    resize: (size: [number, number]) => void;\r\n  }\r\n}\r\n\r\n/** 尺寸更改状态插件 */\r\n\r\nexport default class StateResize extends BasePlugin {\r\n  static readonly pluginName = \"stateResize\";\r\n  private readonly observer?: ResizeObserver;\r\n  constructor(player: Player) {\r\n    super(player);\r\n\r\n    // --- 初始化observer --- //\r\n    const Observer = window.ResizeObserver || ResizeObserverPonyfill;\r\n    if (Observer) {\r\n      this.observer = new Observer(([item]) => {\r\n        const { width, height } = item.contentRect;\r\n        this.player.emit(\"resize\", [width, height]);\r\n      });\r\n    }\r\n  }\r\n  mounted() {\r\n    this.observer?.observe(this.player.$el);\r\n  }\r\n}\r\n","import type { PlayerOptions } from \"@/types\";\r\nimport { Player } from \"@/player\";\r\nimport { BasePlugin } from \"@/plugin\";\r\n\r\ndeclare module \"@core\" {\r\n  interface Player {\r\n    /** 是否与视口交叉 */\r\n    isIntersecting?: boolean;\r\n  }\r\n  interface PlayerEventMap {\r\n    intersection: (flag: boolean) => void;\r\n  }\r\n}\r\n\r\n/** 聚焦状态插件 */\r\n\r\nexport default class StateIntersecting extends BasePlugin {\r\n  static readonly pluginName = \"stateIntersecting\";\r\n  private _status = false;\r\n  private readonly observer?: IntersectionObserver;\r\n  constructor(player: Player) {\r\n    super(player);\r\n\r\n    // --- 绑定属性 --- //\r\n    this.player.define(\"isIntersecting\", {\r\n      get: () => this._status,\r\n    });\r\n\r\n    // --- 初始化observer --- //\r\n    if (window.IntersectionObserver) {\r\n      this.observer = new window.IntersectionObserver(([item]) => {\r\n        const { isIntersecting } = item;\r\n        this._status = isIntersecting;\r\n        this.player.emit(\"intersection\", isIntersecting);\r\n      });\r\n    }\r\n    this.player.once(\"mounted\", () => {\r\n      this.observer?.observe(this.player.$el);\r\n    });\r\n  }\r\n}\r\n","import { classPrefix } from \"@/config\";\r\nimport { createElement } from \"@/utils\";\r\nimport { Player, UIPlugin } from \"@core\";\r\n\r\ndeclare module \"@core\" {\r\n  interface Player {\r\n    /** 添加一条toast消息 */\r\n    toast?: (content: string | HTMLElement, duration?: number, close?: boolean) => ToastItem;\r\n  }\r\n}\r\n\r\nexport interface ToastItem {\r\n  el: HTMLElement;\r\n  close(): void;\r\n}\r\n\r\nexport default class Toast extends UIPlugin {\r\n  /** 默认toast持续时间 */\r\n  public defaultDuration = 5000;\r\n  constructor(player: Player) {\r\n    super(player, createElement(\"div\", { class: `${classPrefix}-toast` }));\r\n    this.player.$area.appendChild(this.$el);\r\n  }\r\n\r\n  init() {\r\n    this.player.define(\r\n      \"toast\",\r\n      (content: string | HTMLElement, duration?: number, close?: boolean) =>\r\n        this.append(content, duration, close)\r\n    );\r\n  }\r\n\r\n  /** 添加toast消息\r\n   * @param content 要发送的消息\r\n   * @param duration 持续时间(ms)\r\n   * @returns 消息id\r\n   */\r\n  public append(content: string | HTMLElement, duration?: number, close?: boolean) {\r\n    const item = this.createToastItem({ content, duration, close });\r\n    this.$el.appendChild(item.el);\r\n    return item;\r\n  }\r\n\r\n  /** 创建一个toast元素 */\r\n  protected createToastItem(opt: {\r\n    content: string | HTMLElement;\r\n    duration?: number;\r\n    close?: boolean;\r\n  }): ToastItem {\r\n    const el = createElement(\"div\", { class: `${classPrefix}-toast-item` });\r\n    const content = el.appendChild(\r\n      createElement(\"div\", { class: `${classPrefix}-toast-item-content` })\r\n    );\r\n    content.appendChild(typeof opt.content == \"object\" ? opt.content : new Text(opt.content));\r\n    const item = {\r\n      el,\r\n      close() {\r\n        this.el.remove();\r\n      },\r\n    };\r\n    if (opt.close) {\r\n      const button = el.appendChild(\r\n        createElement(\"div\", {\r\n          class: `${classPrefix}-toast-item-close`,\r\n        })\r\n      );\r\n      button.onclick = () => {\r\n        item.close();\r\n      };\r\n    }\r\n    let timer = 0;\r\n    const closeHandler = () => {\r\n      item.close();\r\n      window.clearTimeout(timer);\r\n    };\r\n    timer = window.setTimeout(closeHandler, opt.duration || this.defaultDuration);\r\n    return item;\r\n  }\r\n\r\n  /** 移除toast消息 */\r\n  public remove(item: ToastItem) {\r\n    item.close();\r\n  }\r\n}\r\n","import ContextMenu from \"@plugins/ui/contextMenu\";\nimport Controller from \"@plugins/ui/controller\";\nimport {\n  ButtonPlay,\n  ButtonPrev,\n  ButtonNext,\n  LabelTime,\n  ButtonLoop,\n  ButtonPart,\n  ButtonVolume,\n  ButtonSettings,\n  ButtonPip,\n  ButtonFullscreen,\n} from \"@plugins/controls\";\nimport Hotkey from \"@plugins/hotkey\";\nimport Modal from \"@plugins/ui/modal\";\nimport Progress from \"@plugins/controls/progress\";\nimport Settings from \"@plugins/settings\";\nimport { PlayerOptions } from \"@/types\";\nimport Side from \"@plugins/ui/side\";\nimport Pip from \"@plugins/screen/pip\";\nimport Fullscreen from \"@plugins/screen/fullscreen\";\nimport User from \"@plugins/videoOptions/user\";\nimport StateActive from \"../state/stateActive\";\nimport StateFocus from \"../state/stateFocus\";\nimport StateResize from \"../state/stateResize\";\nimport StateIntersecting from \"../state/stateIntersecting\";\nimport Toast from \"@plugins/ui/toast\";\n\n/** 核心插件 */\nexport const corePlugins = [\n  StateActive,\n  StateFocus,\n  StateResize,\n  StateIntersecting,\n  Pip,\n  Fullscreen,\n];\n\n/** 基础插件 */\nexport const basicPlugins = [Modal, Side, Controller, Toast, Settings, Hotkey, ContextMenu, User];\n\n/** 基础控件 */\nexport const basicControls = [\n  Progress,\n  ButtonPlay,\n  ButtonPrev,\n  ButtonNext,\n  LabelTime,\n  ButtonLoop,\n  ButtonPart,\n  ButtonVolume,\n  ButtonSettings,\n  ButtonPip,\n  ButtonFullscreen,\n];\n\nexport const presetBasic = [...corePlugins, ...basicPlugins, ...basicControls];\n","import { Player } from \"@/player\";\r\nimport { BasePlugin } from \"@/plugin\";\r\nimport { PlayerOptions } from \"@/types\";\r\nimport { Checkbox } from \"@/components\";\r\n\r\ndeclare module \"@core\" {\r\n  interface PlayerEventMap {\r\n    /** 分P连播 */\r\n    autoPartChange: (flag: boolean) => void;\r\n  }\r\n  interface PlayerOptions {\r\n    /** 分P连播 */\r\n    autoPart?: boolean;\r\n  }\r\n}\r\n\r\n/** 自动切换下一P */\r\n\r\nexport default class AutoPart extends BasePlugin {\r\n  static pluginName = \"autoPart\";\r\n  private _status = false;\r\n  protected checkbox?: Checkbox;\r\n  init() {\r\n    this.player.hook.register(\"end\", () => {\r\n      if (this.status) {\r\n        const { part, list } = this.player.getVideoInfo();\r\n        if (part != list?.length) {\r\n          this.player.next();\r\n          return false;\r\n        }\r\n      }\r\n    });\r\n  }\r\n  apply(player: Player, options: PlayerOptions): void {\r\n    if (options.autoPart) this.toggle(true);\r\n  }\r\n  ready() {\r\n    if (this.plugins.settings) {\r\n      const container = document.createElement(\"div\");\r\n      this.checkbox = new Checkbox({\r\n        container,\r\n        value: this.status,\r\n        onToggle: (val) => {\r\n          this.toggle(val);\r\n        },\r\n        label: \"分P连播\",\r\n      });\r\n      this.plugins.settings.$play.appendChild(container);\r\n    }\r\n  }\r\n  toggle(v: boolean) {\r\n    if (v) {\r\n      this._status = true;\r\n    } else {\r\n      this._status = false;\r\n    }\r\n    this.player.emit(\"autoPartChange\", v);\r\n  }\r\n  get status() {\r\n    return this._status;\r\n  }\r\n}\r\n","import { Player } from \"@/player\";\r\nimport { BasePlugin } from \"@/plugin\";\r\nimport { PlayerOptions } from \"@/types\";\r\nimport { Checkbox } from \"@/components\";\r\n\r\ndeclare module \"@core\" {\r\n  interface PlayerEventMap {\r\n    /** 自动播放 */\r\n    autoPlayChange: (flag: boolean) => void;\r\n  }\r\n}\r\n\r\n/** 启用自动播放设置 */\r\n\r\nexport default class AutoPlay extends BasePlugin {\r\n  static pluginName = \"autoPlay\";\r\n  private _status = false;\r\n  protected checkbox?: Checkbox;\r\n  apply(player: Player, options: PlayerOptions) {\r\n    if (options.autoPlay) this.toggle(true);\r\n  }\r\n  ready() {\r\n    if (this.plugins.settings) {\r\n      const container = document.createElement(\"div\");\r\n      this.checkbox = new Checkbox({\r\n        container,\r\n        value: this.status,\r\n        onToggle: (val) => {\r\n          this.toggle(val);\r\n        },\r\n        label: \"自动播放\",\r\n      });\r\n      this.plugins.settings.$play.appendChild(container);\r\n    }\r\n  }\r\n  toggle(v: boolean) {\r\n    if (v) {\r\n      this._status = true;\r\n    } else {\r\n      this._status = false;\r\n    }\r\n    this.player.emit(\"autoPlayChange\", v);\r\n  }\r\n  get status() {\r\n    return this._status;\r\n  }\r\n}\r\n","import { Player } from \"@/player\";\r\nimport { BasePlugin } from \"@/plugin\";\r\nimport { PlayerOptions } from \"@/types\";\r\nimport { Checkbox } from \"@/components\";\r\n\r\ndeclare module \"@core\" {\r\n  interface PlayerEventMap {\r\n    /** 跳转到上次播放位置 */\r\n    autoSeekChange: (flag: boolean) => void;\r\n  }\r\n  interface PlayerOptions {\r\n    /** 跳转到上次播放位置 */\r\n    autoSeek?: boolean;\r\n    /** 上次播放的时间点(秒)，若存在time选项则此项失效 */\r\n    lastPosition?: number;\r\n  }\r\n}\r\n\r\n/** 跳转到上次播放位置 */\r\n\r\nexport default class AutoSeek extends BasePlugin {\r\n  static pluginName = \"autoSeek\";\r\n  private _status = false;\r\n  protected checkbox?: Checkbox;\r\n\r\n  apply(player: Player, options: PlayerOptions) {\r\n    if (options.autoSeek) {\r\n      this.toggle(true);\r\n      this.player.once(\"loadedmetadata\", () => {\r\n        console.log(`ok: ${options.time} ${options.lastPosition}`);\r\n        !options.time && options.lastPosition && this.player.seek(Math.floor(options.lastPosition));\r\n        options.autoPlay && this.player.play();\r\n      });\r\n    }\r\n  }\r\n\r\n  ready() {\r\n    if (this.plugins.settings) {\r\n      const container = document.createElement(\"div\");\r\n      this.checkbox = new Checkbox({\r\n        container,\r\n        value: this.status,\r\n        onToggle: (val) => {\r\n          this.toggle(val);\r\n        },\r\n        label: \"断点续播\",\r\n      });\r\n      this.plugins.settings.$play.appendChild(container);\r\n    }\r\n  }\r\n\r\n  toggle(v: boolean) {\r\n    if (v) {\r\n      this._status = true;\r\n    } else {\r\n      this._status = false;\r\n    }\r\n    this.player.emit(\"autoSeekChange\", v);\r\n  }\r\n  get status() {\r\n    return this._status;\r\n  }\r\n}\r\n","import { Player } from \"@/player\";\r\nimport { BasePlugin } from \"@/plugin\";\r\nimport { PlayerOptions } from \"@/types\";\r\n\r\nconst themeOptionsVars = {\r\n  primaryColor: \"--mp-primary-color\",\r\n  secondaryColor: \"--mp-secondary-color\",\r\n  borderRadius: \"--mp-border-radius\",\r\n  bgLight: \"--mp-bg-light\",\r\n  bgDark: \"--mp-bg-dark\",\r\n  bgBlack: \"--mp-bg-black\",\r\n};\r\n\r\nexport type ThemeOptions = Partial<Record<keyof typeof themeOptionsVars, string>>;\r\ndeclare module \"@core\" {\r\n  interface Player {\r\n    theme?: Theme;\r\n  }\r\n}\r\ndeclare module \"@core\" {\r\n  interface PlayerOptions {\r\n    theme?: ThemeOptions;\r\n    /** 颜色模式 */\r\n    colorScheme?: ThemeColorScheme;\r\n  }\r\n}\r\n\r\nexport type ThemeColorScheme = \"light\" | \"dark\" | \"auto\";\r\n\r\nexport default class Theme extends BasePlugin {\r\n  static pluginName = \"theme\";\r\n  private properties: ThemeOptions = {};\r\n  /** 绑定了主题变量的DOM元素 */\r\n  private themeElement: HTMLElement[];\r\n  /** 匹配暗黑模式 */\r\n  private _matchDarkScheme = window.matchMedia(\"(prefers-color-scheme: dark)\");\r\n  private _handleDarkScheme: (e: MediaQueryListEvent) => void;\r\n  constructor(player: Player) {\r\n    super(player);\r\n    this.themeElement = this.player.container ? [this.player.container] : [];\r\n    this._handleDarkScheme = (e) => {\r\n      this.player.$el.classList.toggle(\"mpui-dark\", e.matches);\r\n    };\r\n  }\r\n  apply(player: Player, options: PlayerOptions) {\r\n    this.setTheme(options.theme || {});\r\n  }\r\n  /** 设置主题 */\r\n  setTheme(theme: ThemeOptions) {\r\n    Object.assign(this.properties, theme);\r\n    this.themeElement.forEach((el) => {\r\n      let name: keyof ThemeOptions;\r\n      for (name in theme) {\r\n        el.style.setProperty(themeOptionsVars[name], theme[name]!);\r\n      }\r\n    });\r\n  }\r\n  /** 设置某个主题属性 */\r\n  set(name: keyof ThemeOptions, value: string) {\r\n    this.properties[name] = value;\r\n    this.themeElement.forEach((el) => {\r\n      el.style.setProperty(themeOptionsVars[name], value);\r\n    });\r\n  }\r\n  get(name: keyof ThemeOptions) {\r\n    return this.properties[name];\r\n  }\r\n  /** 为元素绑定主题变量 */\r\n  public bind(el: HTMLElement) {\r\n    this.themeElement.push(el);\r\n    let name: keyof typeof themeOptionsVars;\r\n    for (name in this.properties) {\r\n      const value = this.properties[name];\r\n      value && el.style.setProperty(themeOptionsVars[name], value);\r\n    }\r\n  }\r\n  setColorScheme(scheme: ThemeColorScheme) {\r\n    this.player.$el.classList.toggle(\"mpui-dark\", scheme == \"dark\");\r\n    if (scheme == \"auto\") {\r\n      this._matchDarkScheme.addEventListener(\"change\", this._handleDarkScheme);\r\n    } else {\r\n      this._matchDarkScheme.removeEventListener(\"change\", this._handleDarkScheme);\r\n    }\r\n  }\r\n}\r\n","import { Player } from \"@/player\";\r\nimport { BasePlugin } from \"@/plugin\";\r\nimport { PlayerOptions, VideoInfo } from \"@/types\";\r\n\r\ndeclare module \"@core\" {\r\n  interface PlayerPlugins {\r\n    part?: Part;\r\n  }\r\n\r\n  export interface VideoInfo {\r\n    /** 视频分P列表 */\r\n    list?: Omit<VideoInfo, \"list\" | \"part\">[];\r\n    /** 要播放的分P */\r\n    part?: number;\r\n  }\r\n\r\n  export interface PlayerEventMap {\r\n    partListChange: (list: VideoInfo[]) => void;\r\n    partChange: (part: number) => void;\r\n  }\r\n}\r\n\r\n/** 视频分P功能，将多段视频作为一个分P视频加载 */\r\n\r\nexport default class Part extends BasePlugin {\r\n  static pluginName = \"part\";\r\n  constructor(player: Player) {\r\n    super(player);\r\n  }\r\n  baseVideoInfo: VideoInfo | null = null;\r\n  init() {\r\n    this.player.hook.register(\r\n      \"video.set\",\r\n      (info) => {\r\n        // 如果基本信息中的part与当前传入的part不一致，则更改当前分P列表\r\n        if (!this.baseVideoInfo?.list || this.baseVideoInfo?.list != info.list) {\r\n          this.baseVideoInfo = { ...info };\r\n          this.player.emit(\"partListChange\", []);\r\n        }\r\n        // 如果视频信息中存在list，则直接设置part\r\n        if (info.list) {\r\n          info.part ||= 1;\r\n          Object.assign(info, info.list[info.part - 1]);\r\n          info.hasNext ||= info.part! < info.list.length;\r\n          info.hasPrev ||= info.part! > 1;\r\n          this.player.emit(\"partChange\", info.part);\r\n        } else {\r\n          this.player.emit(\"partChange\", 1);\r\n        }\r\n      },\r\n      true\r\n    );\r\n    this.player.hook.register(\"next\", () => {\r\n      // 如果视频信息中有list，且part<list.length，则设置下一P\r\n      if (this.list && this.part! < this.num) {\r\n        this.set(this.part + 1);\r\n        return false;\r\n      }\r\n    });\r\n    this.player.hook.register(\"prev\", () => {\r\n      // 如果视频信息中有list，且part>1，则设置上一P\r\n      if (this.list && this.part! > 1) {\r\n        this.set(this.part - 1);\r\n        return false;\r\n      }\r\n    });\r\n  }\r\n  /** 设置分P */\r\n  set(p: number, play?: boolean) {\r\n    const info = this.player.getVideoInfo();\r\n    if (p > 0 && p <= (info.list?.length || 0)) {\r\n      this.player.setVideo(\r\n        {\r\n          ...this.baseVideoInfo,\r\n          part: p,\r\n        },\r\n        play ?? !this.player.paused\r\n      );\r\n    }\r\n  }\r\n  get num() {\r\n    return this.player.getVideoInfo().list?.length || 0;\r\n  }\r\n  get list() {\r\n    return this.player.getVideoInfo().list || [];\r\n  }\r\n  get part() {\r\n    return this.player.getVideoInfo().part || 1;\r\n  }\r\n}\r\n","import { Player } from \"@/player\";\r\nimport { BasePlugin } from \"@/plugin\";\r\nimport { LoadInfo, PlayerOptions } from \"@/types\";\r\n\r\nexport default class Seamless extends BasePlugin {\r\n  static pluginName = \"seamless\";\r\n  constructor(player: Player) {\r\n    super(player);\r\n  }\r\n  /** 无缝加载视频 */\r\n  load(info: LoadInfo) {\r\n    this.player.emit(\"videoLoad\", info);\r\n    const { url, type, play, time } = info;\r\n    const oldVideo = this.player.$video;\r\n    const video = oldVideo.cloneNode() as HTMLVideoElement;\r\n    const controller = this.player.loader.create(info, video);\r\n    video.addEventListener(\r\n      \"loadedmetadata\",\r\n      () => {\r\n        this.player.$content.insertBefore(video, oldVideo);\r\n        const t = time === true ? this.player.currentTime : time || 0;\r\n        video.currentTime = t;\r\n        !this.player.paused && video.play();\r\n        video.addEventListener(\r\n          \"canplay\",\r\n          () => {\r\n            this.player.emit(\"videoLoad\", info);\r\n            this.player.isPip && video.requestPictureInPicture();\r\n            this.player.attachMediaController(controller);\r\n            oldVideo.remove();\r\n            play == true && this.player.paused && this.player.play();\r\n            play == false && !this.player.paused && this.player.pause();\r\n          },\r\n          { once: true }\r\n        );\r\n      },\r\n      { once: true }\r\n    );\r\n  }\r\n  ready() {\r\n    this.player.hook.register(\"video.load\", (ctx) => {\r\n      /** 加载视频时，只有设置为从当前播放时间加载才能自动无缝加载 */\r\n      if (ctx.time !== true) return;\r\n      this.load(ctx);\r\n      this.player.emit(\"videoLoad\", ctx);\r\n      return false;\r\n    });\r\n  }\r\n}\r\n","import { Player } from \"@/player\";\r\nimport { classPrefix } from \"@/config\";\r\nimport { html, render } from \"lit-html\";\r\nimport { VideoInfo } from \"@/types\";\r\nimport { PanelPlugin } from \"@/plugin\";\r\nimport { createElement } from \"@/utils\";\r\n\r\nconst templateList = (list: Omit<VideoInfo, \"list\" | \"part\">[], setPart: (p: number) => void) =>\r\n  list.map(\r\n    ({ title }, index) => html`\r\n      <li\r\n        class=\"${classPrefix}-partlist-item\"\r\n        @click=${() => {\r\n          setPart(index + 1);\r\n        }}\r\n        data-part=\"${index + 1}\"\r\n      >\r\n        <div class=\"${classPrefix}-partlist-item-id\">P${index + 1}</div>\r\n        <div class=\"${classPrefix}-partlist-item-title\">${title}</div>\r\n      </li>\r\n    `\r\n  );\r\n\r\ndeclare module \"@core\" {\r\n  interface PlayerPlugins {\r\n    partList?: PartList;\r\n  }\r\n}\r\n/** 分P列表面板 */\r\nexport default class PartList extends PanelPlugin {\r\n  static pluginName = \"partList\";\r\n\r\n  title = \"分P列表\";\r\n  $list: HTMLElement;\r\n  private _part = 0;\r\n  private _list: VideoInfo[\"list\"] = [];\r\n\r\n  constructor(player: Player) {\r\n    super(player, createElement(\"div\", { class: `${classPrefix}-partlist` }));\r\n    this.$list = this.$el.appendChild(\r\n      createElement(\"ul\", { class: `${classPrefix}-partlist-list mpui-list` })\r\n    );\r\n  }\r\n  init() {\r\n    this.player.on(\"videoChange\", (v) => {\r\n      this._update(v.list);\r\n      this._select(v.part || 1);\r\n    });\r\n  }\r\n  private _update(list: VideoInfo[\"list\"]) {\r\n    if (list == this._list) return;\r\n    this._list = list;\r\n    render(\r\n      templateList(list || [], (p) => {\r\n        this.plugins.part?.set(p);\r\n      }),\r\n      this.$list\r\n    );\r\n  }\r\n  private _select(p: number) {\r\n    this.$list.querySelector(`li[data-part=\"${this._part}\"]`)?.classList.remove(\"is-selected\");\r\n    this._part = p;\r\n    this.$list.querySelector(`li[data-part=\"${p}\"]`)?.classList.add(\"is-selected\");\r\n  }\r\n}\r\n","import { Player } from \"@/player\";\nimport { classPrefix } from \"@/config\";\nimport { ControlsPlugin } from \"@/plugin\";\nimport { createElement } from \"@/utils\";\n\nconst templateHTML = /*html*/ `\n  <div class=\"\">\n    <div class=\"${classPrefix}-controls-button-icon\">\n      <div class=\"${classPrefix}-controls-button-text\">弹幕列表</div>\n    </div>\n    <div class=\"mpui-tooltip\">弹幕列表</div>\n  </div>\n`;\n\nexport default class ButtonDanmakulist extends ControlsPlugin {\n  static pluginName = \"buttonDanmakuList\";\n\n  $icon: HTMLElement;\n  $tooltip: HTMLElement;\n  $text: HTMLElement;\n\n  constructor(player: Player) {\n    super(\n      player,\n      createElement(\n        \"div\",\n        { class: `${classPrefix}-controls-button ${classPrefix}-button-danmakulist` },\n        templateHTML\n      )\n    );\n    this.$icon = this.$(`.${classPrefix}-controls-button-icon`)!;\n    this.$text = this.$(`.${classPrefix}-controls-button-text`)!;\n    this.$tooltip = this.$(\".mpui-tooltip\")!;\n  }\n\n  init() {\n    this.$icon.addEventListener(\"click\", () => {\n      (this.plugins as any).danmakuList?.toggle();\n    });\n  }\n}\n","import { BasePlugin } from \"@/plugin\";\r\n\r\ndeclare module \"@core\" {\r\n  interface Player {\r\n    quality?: Quality;\r\n  }\r\n}\r\n\r\ndeclare module \"@core\" {\r\n  export interface PlayerEventMap {\r\n    /** 视频质量切换 */\r\n    qualityChanging: (quality: QualityItem) => void;\r\n    /** 视频质量切换完毕 */\r\n    qualityChanged: (quality: QualityItem) => void;\r\n    /** 视频质量切换失败 */\r\n    qualityChangeFailed: (quality: QualityItem) => void;\r\n    /** 视频质量列表更新 */\r\n    qualityListUpdate: (quality: QualityItem[]) => void;\r\n  }\r\n}\r\n\r\nexport interface VideoSource {\r\n  url: string;\r\n  type: string;\r\n  label?: string;\r\n  quality?: string;\r\n}\r\nexport interface QualityItem {\r\n  /** 宽度 */\r\n  width?: number;\r\n  /** 高度 */\r\n  height?: number;\r\n  /** 帧率 */\r\n  frameRate?: number;\r\n  /** 码率 */\r\n  bitRate?: number;\r\n  /** 视频源url */\r\n  url?: string;\r\n  /** 视频类型 */\r\n  type?: string;\r\n  /** 视频质量描述 */\r\n  quality?: string;\r\n  /** 视频质量切换逻辑 */\r\n  change?: (url?: string) => Promise<void>;\r\n}\r\n\r\nexport default class Quality extends BasePlugin {\r\n  static pluginName = \"quality\";\r\n  /** 当前视频质量 */\r\n  current: QualityItem | null = null;\r\n  /** 目标切换视频质量 */\r\n  target: QualityItem | null = null;\r\n  /** 视频质量列表 */\r\n  list: QualityItem[] = [];\r\n  init() {\r\n    this.player.hook.register(\"video.set\", () => {\r\n      this.current = null;\r\n      this.target = null;\r\n      this.list = [];\r\n    });\r\n  }\r\n  apply(): void {\r\n    this.player.define(\"quality\", { value: this });\r\n  }\r\n  /** 切换视频质量 */\r\n  set(item: string | QualityItem) {\r\n    let quality: QualityItem;\r\n    if (typeof item == \"string\") {\r\n      const result = this.list.find((item) => quality === item.quality);\r\n      if (!result) {\r\n        this._emitChangeFailed({});\r\n        return;\r\n      }\r\n      quality = result;\r\n    } else {\r\n      quality = item;\r\n    }\r\n    if (quality.change) {\r\n      quality.change(quality.url).then(\r\n        () => {\r\n          this.updateCurrent(quality);\r\n        },\r\n        () => {\r\n          this._emitChangeFailed(quality);\r\n        }\r\n      );\r\n    } else if (quality.url) {\r\n      this.player.loadVideo({ url: quality.url, type: quality.type, play: true, time: true });\r\n      this.player.once(\"canplay\", () => {\r\n        this.updateCurrent(quality);\r\n      });\r\n    }\r\n  }\r\n  private _emitChangeFailed(quality: QualityItem) {\r\n    this.target = null;\r\n    this.player.emit(\"qualityChangeFailed\", quality);\r\n  }\r\n  /** 更新当前视频质量 */\r\n  async updateCurrent(quality: QualityItem) {\r\n    this.current = quality;\r\n    this.target = null;\r\n    this.player.emit(\"qualityChanged\", quality);\r\n  }\r\n  /** 更新视频质量列表 */\r\n  async updateList(list: QualityItem[]) {\r\n    this.list = list;\r\n    this.player.emit(\"qualityListUpdate\", list);\r\n  }\r\n}\r\n","import { Player } from \"@/player\";\r\nimport { classPrefix } from \"@/config\";\r\nimport { ControlsPlugin } from \"@/plugin\";\r\nimport { QualityItem } from \"@plugins/quality\";\r\nimport { createElement } from \"@/utils\";\r\n\r\nconst templateHTML = /*html*/ `\r\n  <div class=\"${classPrefix}-controls-button-icon\">\r\n    <div class=\"${classPrefix}-controls-button-text\">自动</div>\r\n  </div>\r\n  <div class=\"${classPrefix}-controls-panel-wrap\">\r\n    <div class=\"${classPrefix}-controls-panel\">\r\n      <ul class=\"${classPrefix}-button-quality-list\"></ul>\r\n    </div>\r\n  </div>\r\n`;\r\n\r\ndeclare module \"@plugins/quality\" {\r\n  interface QualityItem {\r\n    label?: string | HTMLElement;\r\n    buttonLabel?: string | HTMLElement;\r\n  }\r\n}\r\n\r\nexport default class ButtonQuality extends ControlsPlugin {\r\n  static pluginName = \"buttonQuality\";\r\n\r\n  $icon: HTMLElement;\r\n  $text: HTMLElement;\r\n  $panel: HTMLElement;\r\n\r\n  $list: HTMLElement;\r\n\r\n  private _itemMap = new Map<QualityItem, HTMLElement>();\r\n\r\n  /** 获取label */\r\n  getLabel?: (quality: QualityItem) => string | HTMLElement;\r\n  /** 获取按钮label */\r\n  getButtonLabel?: (quality: QualityItem) => string | HTMLElement;\r\n\r\n  constructor(player: Player) {\r\n    super(\r\n      player,\r\n      createElement(\r\n        \"div\",\r\n        { class: `${classPrefix}-controls-button ${classPrefix}-button-quality` },\r\n        templateHTML\r\n      )\r\n    );\r\n    this.$icon = this.$(`.${classPrefix}-controls-button-icon`)!;\r\n    this.$text = this.$(`.${classPrefix}-controls-button-text`)!;\r\n    this.$panel = this.$(`.${classPrefix}-controls-panel`)!;\r\n\r\n    this.$list = this.$(`.${classPrefix}-button-quality-list`)!;\r\n  }\r\n\r\n  init() {\r\n    this.player.on(\"qualityListUpdate\", (list) => {\r\n      this._updateList(list);\r\n    });\r\n    this.player.on(\"qualityChanging\", (quality) => {\r\n      this._updateItem(quality);\r\n    });\r\n    this.player.on(\"qualityChanged\", (quality) => {\r\n      this._updateItem(quality);\r\n    });\r\n    this.player.on(\"qualityChangeFailed\", () => {\r\n      this._updateItem(this.player.quality!.current || {});\r\n    });\r\n  }\r\n\r\n  private _updateList(list: QualityItem[]) {\r\n    this._itemMap = new Map();\r\n    if (!list.length) {\r\n      this.$panel.style.display = \"none\";\r\n      this.$icon.style.cursor = \"default\";\r\n    } else {\r\n      this.$panel.style.display = \"\";\r\n      this.$icon.style.cursor = \"\";\r\n    }\r\n    this.$list.innerHTML = \"\";\r\n    const fragment = new DocumentFragment();\r\n    list?.forEach((quality) => {\r\n      const label = quality.label || this.getLabel?.(quality) || quality.quality;\r\n      if (label) {\r\n        const item = createElement(\r\n          \"li\",\r\n          {\r\n            class: `${classPrefix}-button-quality-item`,\r\n            \"data-value\": quality.quality || \"\",\r\n          },\r\n          typeof label == \"string\" ? new Text(label) : label\r\n        );\r\n        item.onclick = () => {\r\n          this.player.quality?.set(quality);\r\n        };\r\n        this._itemMap.set(quality, item);\r\n        fragment.appendChild(item);\r\n      }\r\n    });\r\n    this.$list.appendChild(fragment);\r\n  }\r\n\r\n  private _updateItem(quality: QualityItem) {\r\n    // 更新label内容\r\n    const label =\r\n      quality.buttonLabel ||\r\n      this.getButtonLabel?.(quality) ||\r\n      (typeof quality.label == \"object\" ? quality.label.cloneNode(true) : quality.label) ||\r\n      this.getLabel?.(quality) ||\r\n      quality.quality;\r\n\r\n    if (!label) {\r\n      this.hide();\r\n    } else {\r\n      this.show();\r\n      if (typeof label == \"string\") {\r\n        this.$text.innerText = label;\r\n      } else {\r\n        this.$text.innerHTML = \"\";\r\n        this.$text.appendChild(label);\r\n      }\r\n    }\r\n    // 更新列表checked\r\n    this.$list.querySelectorAll(\"li\").forEach((item) => {\r\n      item.classList.toggle(\"is-checked\", item == this._itemMap.get(quality));\r\n    });\r\n  }\r\n  get ignored() {\r\n    return !this.player.quality;\r\n  }\r\n}\r\n","import { classPrefix } from \"@/config\";\nimport { UIPlugin } from \"@/plugin\";\nimport { createElement } from \"@/utils\";\nimport { Player } from \"@/player\";\n\nconst templateHTML = /*html*/ `\n  <div class=\"${classPrefix}-videostatus-paused\"></div>\n  <div class=\"${classPrefix}-videostatus-loading\">\n    <div class=\"${classPrefix}-videostatus-loading-icon\">\n      <span>L</span>\n      <span>O</span>\n      <span>A</span>\n      <span>D</span>\n      <span>I</span>\n      <span>N</span>\n      <span>G</span>\n    </div>\n    <div class=\"${classPrefix}-videostatus-loading-content\">正在缓冲</div>\n    <div class=\"${classPrefix}-videostatus-loading-speed\"></div>\n  </div>\n  <div class=\"${classPrefix}-videostatus-volume\"></div>\n`;\n\n/** 视频状态显示 */\n\nexport default class VideoStatus extends UIPlugin {\n  static pluginName = \"videoStatus\";\n  $paused: HTMLElement;\n  $loading: HTMLElement;\n  $volume: HTMLElement;\n  constructor(player: Player) {\n    super(player, createElement(\"div\", { class: `${classPrefix}-videostatus` }, templateHTML));\n    this.$paused = this.$(`.${classPrefix}-videostatus-paused`)!;\n    this.$loading = this.$(`.${classPrefix}-videostatus-loading`)!;\n    this.$volume = this.$(`.${classPrefix}-videostatus-volume`)!;\n\n    this.player.$area.appendChild(this.$el);\n  }\n}\n","import { classPrefix } from \"@/config\";\nimport { UIPlugin } from \"@/plugin\";\nimport { PlayerOptions } from \"@/types\";\nimport { createElement } from \"@/utils\";\nimport { Player } from \"@/player\";\n\ndeclare module \"@core\" {\n  interface PlayerOptions {\n    loadingMask?: {\n      delay?: number;\n      getTips?: () => Promise<string | Node>;\n    };\n  }\n}\n\nconst templateHTML = /*html*/ `\n  <div class=\"${classPrefix}-loadingmask-icon\">\n    <div class=\"${classPrefix}-loadingmask-image\"></div>\n  </div>\n  <div class=\"${classPrefix}-loadingmask-info\"></div>\n  <div class=\"${classPrefix}-loadingmask-tips\">Loading...</div>\n`;\n\n/** 加载画面 */\n\nexport default class LoadingMask extends UIPlugin {\n  static pluginName = \"loadingMask\";\n  $info: HTMLElement;\n  $tips: HTMLElement;\n  getTips?: () => Promise<string | Node>;\n  delay: number = 0;\n\n  constructor(player: Player) {\n    super(player, createElement(\"div\", { class: `${classPrefix}-loadingmask` }, templateHTML));\n    this.$info = this.$(`.${classPrefix}-loadingmask-info`)!;\n    this.$tips = this.$(`.${classPrefix}-loadingmask-tips`)!;\n\n    this.player.$main.appendChild(this.$el);\n    /* if (!this.api?.loadingTips) {\n      this.$tips.style.display = \"none\";\n    } */\n  }\n  apply(player: Player, options: PlayerOptions): void {\n    this.getTips = options.loadingMask?.getTips;\n    this.delay = options.loadingMask?.delay || 0;\n  }\n  init() {\n    this._toggle(true);\n    this._add(\"init\", \"播放器初始化…\");\n    this.player.on(\"danmaku:loading\", () => {\n      this._add(\"danmaku\", \"请求弹幕数据中…\");\n    });\n    this.player.on(\"danmaku:loaded\", (dan, err) => {\n      this._change(\"danmaku\", (line) => {\n        if (!err) {\n          line.innerText = \"请求弹幕数据中… [完成]\";\n        } else {\n          line.innerText = `请求弹幕数据中… [失败] ${err}`;\n        }\n      });\n    });\n    this.player.on(\"videoChange\", async () => {\n      this._toggle(true);\n      this._tips(await this.getTips?.());\n    });\n    this.player.on(\"videoLoad\", () => {\n      this._add(\"video\", \"请求视频数据中…\");\n\n      this.player.once(\"canplay\", () => {\n        this._change(\"video\", (line) => {\n          line.innerText = \"请求视频数据中… [完成]\";\n          let timer = 0;\n          const handler = () => {\n            this._toggle(false);\n            this._tips(\"Loading...\");\n            this._clear();\n            window.clearTimeout(timer);\n          };\n          if (this.delay) {\n            timer = window.setTimeout(handler, this.delay);\n          } else {\n            handler();\n          }\n        });\n      });\n      this.player.$video.addEventListener(\n        \"error\",\n        (err) => {\n          this._change(\"video\", (line) => {\n            line.innerText = `请求视频数据中… [失败] ${err}`;\n          });\n        },\n        { once: true }\n      );\n    });\n    this.player.on(\"error\", (err) => {\n      this._add(\"error\", `${err}`);\n    });\n  }\n  ready() {\n    this._change(\"init\", (line) => {\n      line.innerText = \"播放器初始化… [完成]\";\n    });\n  }\n  private _clear() {\n    this.$info.innerHTML = \"\";\n  }\n  private _add(id: string, content: string | Node) {\n    const item = createElement(\"div\", { class: `${classPrefix}-loadingmask-info-item` });\n    item.dataset.id = id;\n    item.append(content);\n    this.$info.appendChild(item);\n  }\n  private _change(id: string, func: (line: HTMLElement) => void) {\n    const item: HTMLElement | null = this.$info.querySelector(`[data-id=\"${id}\"]`);\n    item && func(item);\n  }\n  private _toggle(flag: boolean) {\n    this.$el.classList.toggle(\"is-show\", flag);\n  }\n  private _tips(content?: string | Node) {\n    this.$tips.innerHTML = \"\";\n    content && this.$tips.append(content);\n  }\n}\n","import { classPrefix } from \"@/config\";\nimport { Player } from \"@/player\";\nimport { createElement } from \"@/utils\";\nimport { PlayerOptions } from \"@/types\";\nimport { ControlsPlugin } from \"@/plugin\";\n\nexport default class VideoTitle extends ControlsPlugin {\n  static pluginName = \"videoTitle\";\n\n  constructor(player: Player) {\n    super(player, createElement(\"div\", { class: `${classPrefix}-videotitle` }));\n  }\n\n  init() {\n    this.player.on(\"videoChange\", (info) => {\n      console.log(info.title);\n      this.$el.innerText = info.title || \"\";\n    });\n  }\n}\n","import { classPrefix } from \"@/config\";\r\nimport { Player } from \"@/player\";\r\n\r\nimport { BasePlugin } from \"@/plugin\";\r\nimport { createElement } from \"@/utils\";\r\n\r\nconst templateHTML = /*html*/ `\r\n  <div class=\"${classPrefix}-header-mask\"></div>\r\n  <div class=\"${classPrefix}-header-main mpui-crystal\">\r\n    <div class=\"${classPrefix}-header-left\"></div>\r\n    <div class=\"${classPrefix}-header-center\"></div>\r\n    <div class=\"${classPrefix}-header-right\"></div>\r\n  </div>\r\n`;\r\n\r\ndeclare module \"@core\" {\r\n  interface PlayerPlugins {\r\n    header?: Header;\r\n  }\r\n}\r\n\r\n/** 控制栏 */\r\nexport default class Header extends BasePlugin {\r\n  static pluginName = \"header\";\r\n  player: Player;\r\n  $el: HTMLElement;\r\n  $main: HTMLElement;\r\n  $left: HTMLElement;\r\n  $center: HTMLElement;\r\n  $right: HTMLElement;\r\n\r\n  isHover = false;\r\n\r\n  protected inactiveHook: () => boolean;\r\n  protected mouseEnterHandler: () => void;\r\n  protected mouseLeaveHandler: () => void;\r\n\r\n  constructor(player: Player) {\r\n    super(player);\r\n    this.player = player;\r\n    this.$el = createElement(\"div\", { class: `${classPrefix}-header` }, templateHTML);\r\n    this.$main = this.$el.querySelector(`.${classPrefix}-header-main`)!;\r\n    this.$left = this.$el.querySelector(`.${classPrefix}-header-left`)!;\r\n    this.$center = this.$el.querySelector(`.${classPrefix}-header-center`)!;\r\n    this.$right = this.$el.querySelector(`.${classPrefix}-header-right`)!;\r\n    this.player.$main.append(this.$el);\r\n\r\n    this.inactiveHook = () => !this.isHover;\r\n    this.mouseEnterHandler = () => {\r\n      this.isHover = true;\r\n    };\r\n    this.mouseLeaveHandler = () => {\r\n      this.isHover = false;\r\n    };\r\n  }\r\n  init() {\r\n    this.player.hook.register(\"inactive\", this.inactiveHook);\r\n    this.$el.addEventListener(\"mouseenter\", this.mouseEnterHandler);\r\n    this.$el.addEventListener(\"mouseleave\", this.mouseLeaveHandler);\r\n  }\r\n  destroy() {\r\n    this.player.hook.unregister(\"inactive\", this.inactiveHook);\r\n    this.$el.removeEventListener(\"mouseenter\", this.mouseEnterHandler);\r\n    this.$el.removeEventListener(\"mouseleave\", this.mouseLeaveHandler);\r\n  }\r\n}\r\n","import { PlayerOptions } from \"@/types\";\r\nimport { Player } from \"@/player\";\r\nimport { BasePlugin } from \"@/plugin\";\r\nimport { createElement } from \"@/utils\";\r\nimport { classPrefix } from \"@/config\";\r\nimport { Checkbox } from \"@/components\";\r\n\r\ndeclare module \"@core\" {\r\n  interface PlayerOptions {\r\n    mini?: boolean;\r\n  }\r\n  interface PlayerEventMap {\r\n    miniChange: (flag: boolean) => void;\r\n  }\r\n}\r\n\r\n/** 小窗播放器 */\r\n\r\nexport default class Mini extends BasePlugin {\r\n  static readonly pluginName = \"mini\";\r\n  /** 播放器小窗显示状态 */\r\n  #shown = false;\r\n  /** 播放器小窗拖动状态 */\r\n  #dragging = false;\r\n  /** 播放器小窗启用状态 */\r\n  #enabled = false;\r\n\r\n  $el: HTMLElement;\r\n  checkbox?: Checkbox;\r\n  constructor(player: Player) {\r\n    super(player);\r\n    this.$el = createElement(\"div\", { class: `${classPrefix}-mini` });\r\n    this.player.$el.appendChild(this.$el);\r\n    this.player.on(\"intersection\", (isIntersecting) => {\r\n      const disabled = !this.#enabled || this.player.isPip;\r\n      if (isIntersecting) {\r\n        !disabled && this._hide();\r\n      } else {\r\n        !disabled && this._show();\r\n      }\r\n      console.log(isIntersecting);\r\n    });\r\n    if (player.plugins.buttonSettings) {\r\n      const container = document.createElement(\"div\");\r\n      this.checkbox = new Checkbox({\r\n        container,\r\n        value: this.enabled,\r\n        onToggle: (val) => {\r\n          this.toggle(val);\r\n        },\r\n        label: \"小窗模式\",\r\n      });\r\n      player.plugins.settings?.$others.appendChild(container);\r\n      player.on(\"miniChange\", (flag) => this.checkbox?.setValue(flag));\r\n    }\r\n  }\r\n\r\n  apply(player: Player, options: PlayerOptions): void {\r\n    if (options.mini) this.#enabled = true;\r\n  }\r\n\r\n  init() {\r\n    this.$el.addEventListener(\"click\", () => {\r\n      !this.#dragging && (this.player.paused ? this.player.play : this.player.pause());\r\n    });\r\n    // 拖动操作\r\n    this.$el.addEventListener(\"mousedown\", (e) => {\r\n      const { clientX, clientY } = e;\r\n      const { offsetLeft, offsetTop } = this.$el;\r\n      console.log([offsetLeft, offsetTop]);\r\n      const mLeft = clientX - offsetLeft;\r\n      const mTop = clientY - offsetTop;\r\n      const mousemoveHandler = (e: MouseEvent) => {\r\n        this.#dragging = true;\r\n        const { clientX, clientY } = e;\r\n        this.$el.style.left = `${clientX - mLeft}px`;\r\n        this.$el.style.top = `${clientY - mTop}px`;\r\n      };\r\n      const mouseupHandler = () => {\r\n        this.$el.removeEventListener(\"mousemove\", mousemoveHandler);\r\n        document.removeEventListener(\"mouseup\", mouseupHandler);\r\n        requestAnimationFrame(() => {\r\n          this.#dragging = false;\r\n        });\r\n      };\r\n      this.$el.addEventListener(\"mousemove\", mousemoveHandler);\r\n      document.addEventListener(\"mouseup\", mouseupHandler);\r\n    });\r\n\r\n    this.player.on(\"enterpictureinpicture\", () => this._hide());\r\n    this.player.on(\"leavepictureinpicture\", () => !this.player.isIntersecting && this._show());\r\n  }\r\n\r\n  ready() {\r\n    this.enabled && this.toggle(true);\r\n  }\r\n\r\n  private _show() {\r\n    if (this.#shown) return;\r\n    this.player.$area.style.height = `${this.player.$area.clientHeight}px`;\r\n    this.$el.append(...this.player.$area.children);\r\n    this.$el.classList.add(\"is-show\");\r\n    this.#shown = true;\r\n  }\r\n  private _hide() {\r\n    if (!this.#shown) return;\r\n    this.player.$area.style.height = \"\";\r\n    this.player.$area.append(...this.$el.children);\r\n    this.$el.classList.remove(\"is-show\");\r\n    this.#shown = false;\r\n  }\r\n  /** 播放器小窗启用状态 */\r\n  get enabled() {\r\n    return this.#enabled;\r\n  }\r\n  /** 播放器小窗显示状态 */\r\n  get shown() {\r\n    return this.#shown;\r\n  }\r\n  toggle(flag: boolean) {\r\n    if (flag) {\r\n      if (this.enabled) return;\r\n      this.player.isIntersecting == false && this._show();\r\n      this.player.emit(\"miniChange\", true);\r\n    } else {\r\n      if (!this.enabled) return;\r\n      this._hide();\r\n      this.player.emit(\"miniChange\", false);\r\n    }\r\n\r\n    this.#enabled = flag;\r\n  }\r\n}\r\n","import { Checkbox } from \"@/components\";\r\nimport { Player } from \"@/player\";\r\nimport { PlayerOptions } from \"@/types\";\r\nimport { BasePlugin } from \"@/plugin\";\r\nimport { createElement } from \"@/utils\";\r\nimport { classPrefix } from \"@/config\";\r\n\r\ndeclare module \"@core\" {\r\n  interface PlayerEventMap {\r\n    /** 关灯模式 */\r\n    lightOffChange: (flag: boolean) => void;\r\n  }\r\n}\r\n\r\n/** 关灯模式 */\r\n\r\nexport default class LightOff extends BasePlugin {\r\n  static pluginName = \"lightOff\";\r\n  status = false;\r\n  checkbox?: Checkbox;\r\n  $mask: HTMLElement;\r\n  constructor(player: Player) {\r\n    super(player);\r\n    this.$mask = createElement(\"div\", { class: `${classPrefix}-lightoff-mask` });\r\n    if (player.plugins.buttonSettings) {\r\n      const container = document.createElement(\"div\");\r\n      this.checkbox = new Checkbox({\r\n        container,\r\n        value: this.status,\r\n        onToggle: (val) => {\r\n          this.toggle(val);\r\n        },\r\n        label: \"关灯模式\",\r\n      });\r\n      player.plugins.settings?.$others.appendChild(container);\r\n      player.on(\"lightOffChange\", (flag) => this.checkbox?.setValue(flag));\r\n    }\r\n  }\r\n  ready() {\r\n    this.player.$el.append(this.$mask);\r\n  }\r\n  toggle(v: boolean) {\r\n    if (v) {\r\n      this.player.$el.classList.add(\"is-lightoff\");\r\n    } else {\r\n      this.player.$el.classList.remove(\"is-lightoff\");\r\n    }\r\n    this.player.emit(\"lightOffChange\", v);\r\n  }\r\n}\r\n","import { Player } from \"@/player\";\r\nimport { BasePlugin } from \"@/plugin\";\r\n\r\ndeclare module \"@core\" {\r\n  interface Player {\r\n    /** 是否为网页全屏模式 */\r\n    isWebscreen?: boolean;\r\n    /** 进入网页全屏模式 */\r\n    enterWebscreen?: () => void;\r\n    /** 退出网页全屏模式 */\r\n    exitWebscreen?: () => void;\r\n  }\r\n  interface PlayerEventMap {\r\n    /** 进入网页全屏模式 */\r\n    webscreenEnter: () => void;\r\n    /** 退出网页全屏模式 */\r\n    webscreenExit: () => void;\r\n  }\r\n}\r\n\r\nexport default class Webscreen extends BasePlugin {\r\n  static pluginName = \"webscreen\";\r\n  init() {\r\n    // --- 绑定属性 --- //\r\n\r\n    this.player.define(\"isWebscreen\", {\r\n      get: () => this.status,\r\n    });\r\n    this.player.define(\"enterWebscreen\", () => this.enter());\r\n    this.player.define(\"exitWebscreen\", () => this.exit());\r\n\r\n    // --- 绑定事件 --- //\r\n\r\n    // 进入全屏模式时，退出网页全屏模式\r\n    this.player.on(\"fullscreenEnter\", () => {\r\n      this.exit();\r\n    });\r\n    // 进入网页全屏模式时，退出全屏模式\r\n    this.player.on(\"webscreenEnter\", () => {\r\n      this.player.exitFullscreen?.();\r\n    });\r\n  }\r\n\r\n  // --- 内置方法 --- //\r\n  /** 进入网页全屏 */\r\n  enter() {\r\n    if (this.status) return;\r\n    this.player.$el.classList.add(\"is-webscreen\");\r\n    this.player.emit(\"webscreenEnter\");\r\n  }\r\n  /** 退出网页全屏 */\r\n  exit() {\r\n    if (!this.status) return;\r\n    this.player.$el.classList.remove(\"is-webscreen\");\r\n    this.player.emit(\"webscreenExit\");\r\n  }\r\n  /** 当前状态 */\r\n  get status(): boolean {\r\n    return this.player.$el.classList.contains(\"is-webscreen\");\r\n  }\r\n}\r\n","import { DanmakuInvokes, DanmakuItem } from \"./types\";\r\nimport { PlayerOptions } from \"@/types\";\r\nimport { Player } from \"@/player\";\r\nimport { classPrefix } from \"@/config\";\r\nimport { BasePlugin } from \"@/plugin\";\r\nimport { createElement } from \"@/utils\";\r\n\r\ndeclare module \"@core\" {\r\n  interface Player {\r\n    danmaku?: Danmaku;\r\n  }\r\n}\r\n\r\ndeclare module \"@core\" {\r\n  interface PlayerValueMap {\r\n    /** 弹幕不透明度 */\r\n    \"danmaku.opacity\": number;\r\n    /** 弹幕移动速度 */\r\n    \"danmaku.speed\": number;\r\n    /** 弹幕显示区域 */\r\n    \"danmaku.area\": number;\r\n    /** 弹幕大小 */\r\n    \"danmaku.scale\": number;\r\n    /** 弹幕字体 */\r\n    \"danmaku.font\": string;\r\n    /** 弹幕加粗 */\r\n    \"danmaku.bold\": boolean;\r\n  }\r\n  interface PlayerPlugins {\r\n    danmaku?: Danmaku;\r\n  }\r\n}\r\n\r\n/** 弹幕模块\r\n *\r\n * 负责控制弹幕添加、移除、播放等基本操作\r\n */\r\nexport default class Danmaku extends BasePlugin {\r\n  static readonly pluginName = \"danmaku\";\r\n\r\n  $el: HTMLDivElement;\r\n\r\n  handler: Record<string, (dan: DanmakuItem[]) => void> = {};\r\n\r\n  private _status = true;\r\n\r\n  get status() {\r\n    return this._status;\r\n  }\r\n\r\n  invoke: DanmakuInvokes = {};\r\n\r\n  constructor(player: Player) {\r\n    super(player);\r\n\r\n    this.$el = createElement(\"div\", { class: `${classPrefix}-danmaku-wrap` });\r\n\r\n    this.player.$content.after(this.$el);\r\n  }\r\n  init() {\r\n    this.player.define(\"danmaku\", { value: this });\r\n  }\r\n\r\n  apply(player: Player, options: PlayerOptions): void {\r\n    this.invoke = options.danmakuInvoke || {};\r\n  }\r\n\r\n  /**\r\n   * 添加弹幕到弹幕池\r\n   * @param dan 要添加的弹幕\r\n   * @param play 是否播放超时弹幕\r\n   * */\r\n  add(dan: DanmakuItem[], play?: boolean) {\r\n    this.player.emit(\"danmaku:add\", dan, play || false);\r\n  }\r\n\r\n  /**\r\n   * 绘制一条弹幕\r\n   * @param dm 要绘制的弹幕\r\n   * */\r\n  draw(dm: DanmakuItem) {\r\n    this.player.emit(\"danmaku:draw\", dm);\r\n  }\r\n\r\n  /**\r\n   * 从弹幕池中移除弹幕\r\n   * @param ids 要移除的弹幕id\r\n   * */\r\n  remove(dan: DanmakuItem[]) {\r\n    this.player.emit(\"danmaku:remove\", dan);\r\n  }\r\n\r\n  /** 清空弹幕池 */\r\n  clear() {\r\n    this.player.emit(\"danmaku:clear\");\r\n  }\r\n\r\n  /** 切换弹幕显示 */\r\n  toggle(flag?: boolean) {\r\n    if (flag) {\r\n      this._status = true;\r\n      this.player.emit(\"danmaku:on\");\r\n    } else if (flag != null) {\r\n      this._status = false;\r\n      this.player.emit(\"danmaku:off\");\r\n    } else {\r\n      this.toggle(!this._status);\r\n    }\r\n  }\r\n\r\n  // 弹幕屏蔽\r\n\r\n  /**\r\n   * 弹幕类型屏蔽\r\n   * @param type 类型\r\n   * @param flag 设置是否屏蔽\r\n   */\r\n  filterType(type: string, flag: boolean) {\r\n    this.player.emit(\"danmaku:filter\", type, flag);\r\n  }\r\n}\r\n","import { VideoInfo } from \"@/types\";\r\n\r\n/** 弹幕模式 */\r\nexport enum DanmakuMode {\r\n  roll = 1,\r\n  bottom = 4,\r\n  top = 5,\r\n  reverse = 6,\r\n  special = 7,\r\n  advanced = 9,\r\n}\r\n\r\n/** 弹幕对象接口 */\r\nexport interface DanmakuItem {\r\n  /** 弹幕id */\r\n  id: number | string;\r\n  /** 发送时间 */\r\n  time: number;\r\n  /** 弹幕内容 */\r\n  content: string;\r\n  /** 弹幕模式 */\r\n  mode: DanmakuMode;\r\n  /** 颜色 */\r\n  color: number | string;\r\n  /** 弹幕文字大小 */\r\n  size: number;\r\n  /** 日期 */\r\n  date: number;\r\n  /** 发送用户 */\r\n  user: string | number;\r\n  /** 弹幕是否在此播放器上发送 */\r\n  fromHere?: boolean;\r\n}\r\n\r\n/** 弹幕发送对象接口 */\r\nexport type DanmakuSendItem = Omit<DanmakuItem, \"id\" | \"date\" | \"user\">;\r\n\r\n/** 弹幕源 */\r\nexport interface DanmakuSource {\r\n  /** 弹幕来源url */\r\n  url: string;\r\n  /** 弹幕格式 */\r\n  type: string;\r\n  /** 获取弹幕数据 */\r\n  data?: (data: unknown) => unknown;\r\n  // platform?: string // 平台名称，用于标记平台信息\r\n  // name?: string // 弹幕来源名称\r\n}\r\n\r\nexport interface DanmakuInvokes {\r\n  /** 获取弹幕 */\r\n  get?: (info: VideoInfo) => Promise<unknown>;\r\n  /** 发送弹幕 */\r\n  send?: (danmaku: DanmakuSendItem, info: VideoInfo) => Promise<void>;\r\n  /** 举报弹幕 */\r\n  report?: (danmaku: DanmakuItem, info: VideoInfo) => Promise<void>;\r\n  /** 视频作者删除弹幕 */\r\n  delete?: (danmaku: DanmakuItem[], info: VideoInfo) => Promise<void>;\r\n  /** 撤回自己发送的弹幕 */\r\n  recall?: (danmaku: DanmakuItem, info: VideoInfo) => Promise<void>;\r\n  /** 添加内容屏蔽 */\r\n  blockContent?: (content: string, flag: boolean) => Promise<void>;\r\n  /** 添加用户屏蔽 */\r\n  blockUser?: (user: string | number, flag: boolean) => Promise<void>;\r\n}\r\n\r\nexport interface XMLDanmakuParser {\r\n  type: \"xml\";\r\n  parse: (raw: XMLDocument) => DanmakuItem[];\r\n}\r\nexport interface JSONDanmakuParser {\r\n  type: \"json\";\r\n  parse: (raw: any) => DanmakuItem[];\r\n}\r\nexport interface TextDanmakuParser {\r\n  type: \"text\";\r\n  parse: (raw: string) => DanmakuItem[];\r\n}\r\nexport type DanmakuParser = XMLDanmakuParser | JSONDanmakuParser | TextDanmakuParser;\r\n\r\ndeclare module \"@core\" {\r\n  interface PlayerOptions {\r\n    /** 弹幕设置 */\r\n    danmaku?: {\r\n      /** 弹幕格式类型 */\r\n      type?: string;\r\n      /** 类型屏蔽 */\r\n      filter?: string[];\r\n      /** 弹幕不透明度 */\r\n      opacity?: number;\r\n      /** 弹幕速度 */\r\n      speed?: number;\r\n      /** 弹幕显示区域 */\r\n      area?: number;\r\n      /** 弹幕大小 */\r\n      scale?: number;\r\n      /** 弹幕字体 */\r\n      font?: string;\r\n      /** 字体加粗 */\r\n      bold?: boolean;\r\n      /** 用户屏蔽 */\r\n      blockUser: (string | number)[];\r\n      /** 内容屏蔽 */\r\n      blockContent: (string | RegExp)[];\r\n    };\r\n    danmakuInvoke?: DanmakuInvokes;\r\n  }\r\n\r\n  interface VideoInfo {\r\n    danmaku?: DanmakuSource[];\r\n  }\r\n}\r\n\r\ndeclare module \"@core\" {\r\n  interface PlayerEventMap {\r\n    // --- 弹幕事件 --- //\r\n\r\n    // 弹幕加载\r\n    /** 弹幕开始加载 */\r\n    \"danmaku:loading\": () => void;\r\n    /** 弹幕加载完毕 */\r\n    \"danmaku:loaded\": (dan: DanmakuItem[], from: { url?: string; id?: string | number }) => void;\r\n    /** 弹幕加载失败 */\r\n    \"danmaku:loadFailed\": (err: any, from: { url?: string; id?: string | number }) => void;\r\n\r\n    // --- 弹幕事件 --- //\r\n    /** 开启弹幕 */\r\n    \"danmaku:on\": () => void;\r\n    /** 关闭弹幕 */\r\n    \"danmaku:off\": () => void;\r\n    /** 弹幕池新增弹幕 */\r\n    \"danmaku:add\": (dan: DanmakuItem[], play: boolean) => void;\r\n    /** 弹幕池新增弹幕 */\r\n    \"danmaku:draw\": (dm: DanmakuItem) => void;\r\n    /** 弹幕池移除弹幕 */\r\n    \"danmaku:remove\": (dan: DanmakuItem[]) => void;\r\n    /** 弹幕池清空 */\r\n    \"danmaku:clear\": () => void;\r\n    /** 弹幕类型屏蔽 */\r\n    \"danmaku:filter\": (type: string, flag: boolean) => void;\r\n\r\n    // --- 弹幕操作 --- //\r\n    /** 发送弹幕 */\r\n    \"danmaku:send\": () => void;\r\n    /** 选中指定弹幕 */\r\n    \"danmaku:select\": (dm: DanmakuItem) => void;\r\n    /** 屏蔽用户弹幕 */\r\n    \"danmaku:blockUser\": (user: number | string, flag: boolean) => void;\r\n    /** 屏蔽弹幕内容 */\r\n    \"danmaku:blockContent\": (content: string, flag: boolean) => void;\r\n\r\n    // --- 弹幕播放属性 --- //\r\n    /** 弹幕不透明度更改 */\r\n    \"danmaku:opacityChange\": (value: number) => void;\r\n    /** 弹幕速度更改 */\r\n    \"danmaku:speedChange\": (value: number) => void;\r\n    /** 弹幕区域更改 */\r\n    \"danmaku:areaChange\": (value: number) => void;\r\n    /** 弹幕大小更改 */\r\n    \"danmaku:scaleChange\": (value: number) => void;\r\n    /** 弹幕字体更改 */\r\n    \"danmaku:fontChange\": (value: string) => void;\r\n    /** 弹幕粗体更改 */\r\n    \"danmaku:boldChange\": (value: boolean) => void;\r\n  }\r\n}\r\n","import { DanmakuMode } from \"../types\";\r\n/** 播放器弹幕引擎 */\r\n\r\nimport { DanmakuItem } from \"../types\";\r\nimport { numberToHexColor } from \"@/utils\";\r\n\r\nexport type TrackType = \"roll\" | \"reverse\" | \"top\" | \"bottom\";\r\n\r\nexport interface DanmakuEngineOptions {\r\n  fontScale?: number;\r\n  fontFamily?: string;\r\n  fontWeight?: string;\r\n  speed?: number;\r\n  opacity?: number;\r\n  limitArea?: number;\r\n  classPrefix?: string;\r\n  /** 颜色限制 */\r\n  colorFilter?: boolean;\r\n  /** 用户屏蔽 */\r\n  userFilter?: (string | number)[];\r\n  /** 内容屏蔽 */\r\n  contentFilter?: (string | RegExp)[];\r\n  /** 轨道屏蔽 */\r\n  trackFilter?: Record<TrackType, boolean>;\r\n  /** 获取当前时间函数 */\r\n  getTime: () => number;\r\n}\r\n\r\nexport default class MeonDanmakuEngine {\r\n  /** 暂停状态 */\r\n  public paused = false;\r\n\r\n  /** 隐藏状态 */\r\n  public hidden = false;\r\n\r\n  /** 弹幕容器 */\r\n  public readonly container: HTMLDivElement;\r\n\r\n  /** 弹幕不透明度 */\r\n  public opacity: number;\r\n  /** 弹幕移动速度 */\r\n  public speed: number;\r\n  /** 限制区域 */\r\n  public limitArea: number;\r\n  /** 弹幕字号缩放 */\r\n  public fontScale: number;\r\n  /** 字体 */\r\n  public fontFamily: string;\r\n  /** 字重 */\r\n  public fontWeight: string;\r\n\r\n  /** 基准轨道高度 */\r\n  public baseTrackHeight: number;\r\n  /** 轨道边距 */\r\n  public trackPadding: number;\r\n  /** 颜色屏蔽 */\r\n  public colorFilter: boolean;\r\n  /** 轨道屏蔽 */\r\n  public trackFilter: Record<TrackType, boolean>;\r\n  public userFilter: (string | number)[];\r\n  public contentFilter: (string | RegExp)[];\r\n  /** 允许重叠 */\r\n  public overlap: boolean;\r\n  /** 类名前缀 */\r\n  public classPrefix: string;\r\n  /** 获取当前时间函数 */\r\n  public getTime: () => number;\r\n  /** 当前时间 */\r\n  private time = 0;\r\n\r\n  /** 弹幕池 */\r\n  private list: DanmakuItem[] = [];\r\n  /** 待添加弹幕索引 */\r\n  private currentIndex = 0;\r\n  /** 文字测量上下文 */\r\n  private measureContext: CanvasRenderingContext2D | null = null;\r\n\r\n  /** 弹幕发射位置与播放器边界的距离 */\r\n  public startDistance = 2;\r\n  /** 时间偏移 */\r\n  public timeOffset = 0;\r\n  /** 滚动弹幕基准速度 */\r\n  public baseSpeed = 100;\r\n  /** 静止弹幕基准持续时间 */\r\n  public baseDuration = 5;\r\n  /** 弹幕速度增加率k值\r\n   * 弹幕速度 = baseSpeed * (1 + deltaSpeed * 弹幕宽度)\r\n   */\r\n  public deltaSpeed = 0.002;\r\n\r\n  /** 弹幕轨道高度 */\r\n  private trackHeights: Record<TrackType, number[]> = {\r\n    roll: [],\r\n    reverse: [],\r\n    top: [],\r\n    bottom: [],\r\n  };\r\n\r\n  /** 弹幕轨道 */\r\n  private danmakuTracks: Record<TrackType, HTMLElement[][]> = {\r\n    roll: [],\r\n    reverse: [],\r\n    top: [],\r\n    bottom: [],\r\n  };\r\n\r\n  constructor(container: HTMLDivElement, options: DanmakuEngineOptions) {\r\n    this.container = container;\r\n    this.fontScale = options.fontScale ?? 1;\r\n    this.baseTrackHeight = 28;\r\n    this.trackPadding = 6;\r\n    this.speed = options.speed ?? 1;\r\n    this.opacity = options.opacity ?? 1;\r\n    this.limitArea = 1;\r\n    this.overlap = false;\r\n    this.fontFamily = options.fontFamily ?? \"SimHei\";\r\n    this.fontWeight = options.fontWeight ?? \"bold\";\r\n    this.classPrefix = options.classPrefix ?? \"meon\";\r\n    this.colorFilter = options.colorFilter || false;\r\n    this.trackFilter = Object.assign(\r\n      {\r\n        roll: false,\r\n        reverse: false,\r\n        top: false,\r\n        bottom: false,\r\n      },\r\n      options.trackFilter\r\n    );\r\n    this.userFilter = options.userFilter || [];\r\n    this.contentFilter = options.contentFilter || [];\r\n    this.getTime = options.getTime;\r\n\r\n    this.container.classList.add(`${this.classPrefix}-danmaku`);\r\n    this.checkDanmaku();\r\n  }\r\n\r\n  play() {\r\n    this.paused = false;\r\n    this.container.classList.remove(\"is-paused\");\r\n  }\r\n\r\n  pause() {\r\n    this.paused = true;\r\n    this.container.classList.add(\"is-paused\");\r\n  }\r\n\r\n  /** 发生跳转 */\r\n  seek() {\r\n    // 清屏\r\n    this.clear();\r\n    // 重新获取当前时间及待添加弹幕索引\r\n    this.time = this.getTime();\r\n    const index = this.list.findIndex((d) => this.time <= d.time);\r\n    this.currentIndex = index === -1 ? this.list.length : index;\r\n  }\r\n\r\n  /** 设置弹幕池 */\r\n  setPool(dan: DanmakuItem[]) {\r\n    // 直接设置弹幕池并排序\r\n    this.list = [...dan];\r\n    this.list.sort((a, b) => a.time - b.time);\r\n    const index = this.list.findIndex((d) => this.time <= d.time);\r\n    this.currentIndex = index === -1 ? this.list.length : index;\r\n  }\r\n\r\n  /** 重置弹幕池 */\r\n  reset() {\r\n    this.clear();\r\n    this.list = [];\r\n    this.currentIndex = 0;\r\n  }\r\n\r\n  /** 弹幕池添加弹幕 */\r\n  add(dan: DanmakuItem[], play?: boolean) {\r\n    dan.forEach((dm) => {\r\n      /** 按时间顺序插入弹幕 */\r\n      const index = this.list.findIndex((d) => dm.time <= d.time);\r\n      this.list.splice(index === -1 ? this.list.length : index, 0, dm);\r\n      // 若插入弹幕的时间小于当前时间，则待添加弹幕索引+1\r\n      if (dm.time < this.time) {\r\n        this.currentIndex += 1;\r\n        play && this.draw(dan);\r\n      }\r\n    });\r\n  }\r\n\r\n  /** 弹幕池移除弹幕 */\r\n  remove(dan: DanmakuItem[]) {\r\n    const displayed = [\r\n      ...this.container.querySelectorAll<HTMLElement>(`.${this.classPrefix}-danmaku-item`),\r\n    ];\r\n    dan.forEach((dm) => {\r\n      const index = this.list.indexOf(dm);\r\n      if (index === -1) return;\r\n      this.list.splice(index, 1);\r\n      // 移除位置若小于当前待添加弹幕位置，则待添加弹幕索引-1\r\n      if (index < this.currentIndex) this.currentIndex -= 1;\r\n      // 从DOM中移除弹幕\r\n      const el = displayed.find((d) => d.dataset.id === dm.id.toString());\r\n      if (el) {\r\n        // 此处不移除DOM是为了使弹幕顺利完成动画，以便轨道自动清除弹幕DOM\r\n        el.innerHTML = \"\";\r\n      }\r\n    });\r\n  }\r\n\r\n  /** 弹幕清屏 */\r\n  clear(type?: TrackType) {\r\n    if (type) {\r\n      this.danmakuTracks[type] = [];\r\n      return;\r\n    }\r\n    this.danmakuTracks = {\r\n      roll: [],\r\n      reverse: [],\r\n      top: [],\r\n      bottom: [],\r\n    };\r\n    this.trackHeights = {\r\n      roll: [],\r\n      reverse: [],\r\n      top: [],\r\n      bottom: [],\r\n    };\r\n    this.container.innerHTML = \"\";\r\n  }\r\n\r\n  /** 检查弹幕是否需要进入弹幕池 */\r\n  checkDanmaku() {\r\n    if (this.list.length && !this.paused && !this.hidden) {\r\n      let item = this.list[this.currentIndex];\r\n      const dan = [];\r\n      // 刷新当前时间\r\n      this.time = this.getTime();\r\n      // 若待添加弹幕时间小于当前时间，则持续添加弹幕直到下一条弹幕的时间不小于当前时间为止\r\n      while (item && item.time < this.time) {\r\n        if (\r\n          this.checkTrackFilter(item) &&\r\n          this.checkColorFilter(item) &&\r\n          this.checkUserFilter(item) &&\r\n          this.checkContentFilter(item)\r\n        ) {\r\n          dan.push(item);\r\n        }\r\n        this.currentIndex += 1;\r\n        item = this.list[this.currentIndex];\r\n      }\r\n      // console.log(this.currentIndex)\r\n      this.draw(dan);\r\n    }\r\n    window.requestAnimationFrame(() => {\r\n      this.checkDanmaku();\r\n    });\r\n  }\r\n\r\n  /** 设置弹幕类型过滤 */\r\n  setTrackFilter(type: TrackType, value: boolean) {\r\n    this.trackFilter[type] = value;\r\n    if (value) {\r\n      this.container\r\n        .querySelectorAll<HTMLElement>(`.${this.classPrefix}-danmaku-${type}`)\r\n        .forEach((el) => {\r\n          el.innerHTML = \"\";\r\n        });\r\n    }\r\n  }\r\n\r\n  /** 检查弹幕类型过滤 */\r\n  checkTrackFilter(dm: DanmakuItem) {\r\n    return !this.trackFilter[DanmakuMode[dm.mode] as TrackType];\r\n  }\r\n\r\n  /** 设置弹幕颜色过滤 */\r\n  setColorFilter(value: boolean) {\r\n    this.colorFilter = value;\r\n    if (value) {\r\n      const items = this.container.querySelectorAll<HTMLElement>(\r\n        `.${this.classPrefix}-danmaku-item`\r\n      );\r\n      items.forEach((el) => {\r\n        if (el.style.color !== \"rgb(255, 255, 255)\") {\r\n          el.innerHTML = \"\";\r\n        }\r\n      });\r\n    }\r\n  }\r\n\r\n  /** 检查弹幕颜色过滤 */\r\n  checkColorFilter(dm: DanmakuItem) {\r\n    return !this.colorFilter || dm.color === 16777215;\r\n  }\r\n\r\n  /** 设置内容过滤 */\r\n  setContentFilter(content: string | RegExp, value: boolean) {\r\n    const contentIndex = this.contentFilter.indexOf(content);\r\n    if (value) {\r\n      if (contentIndex > -1) {\r\n        return;\r\n      }\r\n      this.contentFilter.push(content);\r\n      const items = this.container.querySelectorAll<HTMLElement>(\r\n        `.${this.classPrefix}-danmaku-item`\r\n      );\r\n      if (typeof content == \"string\") {\r\n        items.forEach((el) => {\r\n          if (el.innerText.includes(content)) {\r\n            el.innerHTML = \"\";\r\n          }\r\n        });\r\n      } else {\r\n        items.forEach((el) => {\r\n          if (content.test(el.innerText)) {\r\n            el.innerHTML = \"\";\r\n          }\r\n        });\r\n      }\r\n    } else {\r\n      contentIndex > -1 && this.contentFilter.splice(contentIndex, 1);\r\n    }\r\n  }\r\n  /** 检查弹幕内容过滤 */\r\n  checkContentFilter(dm: DanmakuItem) {\r\n    for (const keyword of this.contentFilter) {\r\n      if (typeof keyword == \"string\") {\r\n        if (dm.content.search(keyword)) return false;\r\n      } else if (keyword.test(dm.content)) {\r\n        return false;\r\n      }\r\n    }\r\n    return true;\r\n  }\r\n\r\n  /** 设置用户过滤 */\r\n  setUserFilter(user: string | number, value: boolean) {\r\n    const contentIndex = this.userFilter.indexOf(user);\r\n    if (value) {\r\n      if (contentIndex > -1) {\r\n        return;\r\n      }\r\n      this.userFilter.push(user);\r\n      const items = this.container.querySelectorAll<HTMLElement>(\r\n        `.${this.classPrefix}-danmaku-item`\r\n      );\r\n      items.forEach((el) => {\r\n        if (el.dataset.user == user) {\r\n          el.innerHTML = \"\";\r\n        }\r\n      });\r\n    } else {\r\n      contentIndex > -1 && this.userFilter.splice(contentIndex, 1);\r\n    }\r\n  }\r\n  /** 检查用户过滤 */\r\n  checkUserFilter(dm: DanmakuItem) {\r\n    return this.userFilter.indexOf(dm.user) == -1;\r\n  }\r\n\r\n  /** 绘制弹幕 */\r\n  draw(dan: DanmakuItem[]) {\r\n    /** 弹幕轨道高度 */\r\n    const itemHeight = this.baseTrackHeight * this.fontScale;\r\n    /** 弹幕容器宽度 */\r\n    const containerWidth = this.container.offsetWidth;\r\n    /** 弹幕区域高度 */\r\n    const containerHeight = this.container.offsetHeight * this.limitArea;\r\n    /** 轨道数量 */\r\n    const itemY = Math.floor(containerHeight / itemHeight);\r\n    // console.log(itemY);\r\n    if (this.trackHeights.roll.length !== itemY) {\r\n      this.trackHeights.roll = new Array(itemY).fill(itemHeight);\r\n    }\r\n    if (this.trackHeights.reverse.length !== itemY) {\r\n      this.trackHeights.reverse = new Array(itemY).fill(itemHeight);\r\n    }\r\n    if (this.trackHeights.top.length !== itemY) {\r\n      this.trackHeights.top = new Array(itemY).fill(itemHeight);\r\n    }\r\n    if (this.trackHeights.bottom.length !== itemY) {\r\n      this.trackHeights.bottom = new Array(itemY).fill(itemHeight);\r\n    }\r\n    /** 弹幕与弹幕容器右侧的距离(滚动弹幕) */\r\n    const danItemRight = (el: HTMLElement) => {\r\n      const containerRight = this.container.getBoundingClientRect().right;\r\n      const elRight = el.getBoundingClientRect().right;\r\n      return containerRight - elRight;\r\n    };\r\n    /** 弹幕与弹幕容器左侧的距离(逆向弹幕) */\r\n    const danItemLeft = (el: HTMLElement) => {\r\n      const containerLeft = this.container.getBoundingClientRect().left;\r\n      const elLeft = el.getBoundingClientRect().left;\r\n      return elLeft - containerLeft;\r\n    };\r\n    /** 获取弹幕速度 */\r\n    const getSpeed = (width: number) => this.baseSpeed * (1 + this.deltaSpeed * width) * this.speed;\r\n    /** 获取单个轨道内所有弹幕 */\r\n    const getDOMTrack = (type: string, i: number) => {\r\n      return [\r\n        ...this.container.querySelectorAll<HTMLElement>(`.${this.classPrefix}-danmaku-${type}`),\r\n      ].filter((el: HTMLElement) => el.dataset.track === `${i}`);\r\n    };\r\n    /** 获取弹幕可进入的轨道 */\r\n    const getTrack = (ele: HTMLElement, type: TrackType, width: number) => {\r\n      // 对可用范围内的轨道进行一次遍历\r\n      forTrack: for (let i = 0; this.overlap || i < itemY; i++) {\r\n        const DOMTrack = getDOMTrack(type, i);\r\n        /** 该轨道内的所有弹幕 */\r\n        let track = this.danmakuTracks[type][i];\r\n        this.danmakuTracks[type][i] = DOMTrack;\r\n        if (track && track.length) {\r\n          // 如果该轨道存在弹幕\r\n          if (type === \"roll\") {\r\n            /** 弹幕从发射到触碰另一边边界到所需要的时间 */\r\n            const enterTime = containerWidth / getSpeed(width);\r\n            if (track.length !== DOMTrack.length) {\r\n              //\r\n              track = DOMTrack;\r\n            }\r\n            for (const dm of track) {\r\n              const danRight = danItemRight(dm) - 10;\r\n              this.trackHeights[type][i] = parseInt(dm.style.fontSize) + this.trackPadding;\r\n              // 如果滚动弹幕存在同一轨道碰撞的可能，则该轨道不可装填弹幕\r\n              if (\r\n                danRight <=\r\n                  containerWidth - enterTime * getSpeed(dm.getBoundingClientRect().width) ||\r\n                danRight <= 0\r\n              ) {\r\n                // 轨道高度设置为该条弹幕的高度\r\n                continue forTrack;\r\n              }\r\n            }\r\n          } else if (type === \"reverse\") {\r\n            /** 弹幕从发射到触碰另一边边界到所需要的时间 */\r\n            const enterTime = containerWidth / getSpeed(width);\r\n            if (track.length !== DOMTrack.length) {\r\n              //\r\n              track = DOMTrack;\r\n            }\r\n            for (const dm of track) {\r\n              const danLeft = danItemLeft(dm) - 10;\r\n              this.trackHeights[type][i] = parseInt(dm.style.fontSize) + this.trackPadding;\r\n              // 如果逆向弹幕存在同一轨道碰撞的可能，则该轨道不可装填弹幕\r\n              if (\r\n                danLeft <=\r\n                  containerWidth - enterTime * getSpeed(dm.getBoundingClientRect().width) ||\r\n                danLeft <= 0\r\n              ) {\r\n                continue forTrack;\r\n              }\r\n            }\r\n          } else {\r\n            // 非滚动弹幕该轨道不可装填\r\n            continue forTrack;\r\n          }\r\n          // 轨道弹幕组遍历完毕，组内所有弹幕均完全进入容器，可以向该轨道装填弹幕\r\n          this.danmakuTracks[type][i].push(ele);\r\n          // 动画结束后，需从轨道弹幕组中移除该弹幕\r\n          ele.addEventListener(\"animationend\", () => {\r\n            const index = this.danmakuTracks[type][i]?.indexOf(ele);\r\n            index && this.danmakuTracks[type][i]?.splice(index, 1);\r\n          });\r\n          return i;\r\n        } else {\r\n          // 如果该轨道没有弹幕，可以向该轨道装填弹幕\r\n          if (Array.isArray(this.danmakuTracks[type][i])) {\r\n            this.danmakuTracks[type][i].push(ele);\r\n          } else {\r\n            this.danmakuTracks[type][i] = [ele];\r\n          }\r\n\r\n          ele.addEventListener(\"animationend\", () => {\r\n            const index = this.danmakuTracks[type][i]?.indexOf(ele);\r\n            index && this.danmakuTracks[type][i]?.splice(index, 1);\r\n          });\r\n          return i;\r\n        }\r\n      }\r\n      // 遍历完毕，所有轨道都不可用，返回-1\r\n      return -1;\r\n    };\r\n\r\n    const docFragment = document.createDocumentFragment();\r\n\r\n    for (let i = 0; i < dan.length; i++) {\r\n      const dm = dan[i];\r\n      /** 忽略非普通弹幕 */\r\n      if (dm.mode >= 7) {\r\n        continue;\r\n      }\r\n      /** 弹幕DOM */\r\n      const item = document.createElement(\"div\");\r\n      item.classList.add(`${this.classPrefix}-danmaku-item`);\r\n      item.classList.add(`${this.classPrefix}-danmaku-${DanmakuMode[dm.mode]}`);\r\n      item.innerHTML = `${dm.content.replace(/(\\\\n)/g, \"\\n\")}`;\r\n      if (typeof dm.color == \"number\") {\r\n        item.style.color = numberToHexColor(dm.color);\r\n      } else {\r\n        item.style.color = dm.color;\r\n      }\r\n      item.style.opacity = this.opacity.toString();\r\n      item.style.fontSize = +dm.size * this.fontScale + \"px\";\r\n      if (dm.fromHere) {\r\n        item.style.border = \"2px solid white\";\r\n      }\r\n      /** 弹幕运动结束后，从DOM中移除该弹幕 */\r\n      item.addEventListener(\"animationend\", () => {\r\n        if ([...this.container.children].indexOf(item) > -1) this.container.removeChild(item);\r\n      });\r\n\r\n      /** 弹幕内容宽度 */\r\n      const itemWidth = this.measureTextWidth(\r\n        dm.content,\r\n        `${this.fontWeight} ${+dm.size * this.fontScale}px ${this.fontFamily}`\r\n      );\r\n\r\n      /** 轨道类型 */\r\n      let trackType = DanmakuMode[dm.mode] as TrackType;\r\n      /** 轨道位置 */\r\n      let track: number;\r\n      /** 轨道序号 */\r\n      let trackIndex;\r\n      // adjust\r\n      switch (trackType) {\r\n        case \"roll\":\r\n        case \"reverse\":\r\n          // 无限弹幕模式下轨道序号可能大于itemY，可通过取余得到实际轨道位置\r\n          trackIndex = getTrack(item, trackType, itemWidth);\r\n          track = trackIndex % itemY;\r\n          // console.log(track);\r\n          if (track >= 0) {\r\n            const maxTop = this.trackHeights[trackType]\r\n              .slice(0, itemY)\r\n              .reduce((prev, cur) => prev + cur, 0);\r\n            const top =\r\n              this.trackHeights[trackType].slice(0, track).reduce((prev, cur) => prev + cur, 0) %\r\n              maxTop;\r\n            // console.log(top, track);\r\n            if (top + parseInt(item.style.fontSize) + this.trackPadding > containerHeight) {\r\n              this.danmakuTracks[trackType][i]?.pop();\r\n              return;\r\n            }\r\n            const speed = getSpeed(itemWidth);\r\n            const distance = itemWidth + containerWidth + this.startDistance * 2;\r\n            item.dataset.track = trackIndex.toString();\r\n            item.style.width = itemWidth + 1 + \"px\";\r\n            item.style.top = top + \"px\";\r\n            item.style.fontFamily = this.fontFamily;\r\n            item.style.fontWeight = this.fontWeight;\r\n            item.style.setProperty(\"--duration\", `${distance / speed}s`); // 持续时间\r\n            item.style.setProperty(\"--offset\", `${containerWidth + this.startDistance}px`); // 起始位置\r\n            item.style.setProperty(\"--translateX\", `${-distance}px`); // 位移距离\r\n          }\r\n          break;\r\n        case \"top\":\r\n          track = getTrack(item, trackType, 0) % itemY;\r\n          if (track >= 0) {\r\n            const topArr: HTMLElement[] = [];\r\n            const topDan = this.danmakuTracks.top;\r\n            for (const t of topDan) {\r\n              topArr.push(...t);\r\n            }\r\n            const top = topArr\r\n              .map((el) => {\r\n                return parseInt(el.style.fontSize) + this.trackPadding;\r\n              })\r\n              .slice(0, track)\r\n              .reduce((prev, cur) => prev + cur, 0);\r\n\r\n            if (top + parseInt(item.style.fontSize) + this.trackPadding > containerHeight) {\r\n              this.danmakuTracks[trackType][i]?.pop();\r\n              return;\r\n            }\r\n            item.dataset.track = track.toString();\r\n            item.style.width = itemWidth + 1 + \"px\";\r\n            item.style.marginLeft = `-${(itemWidth + 1) * 0.5}px`;\r\n            item.style.top = top + \"px\";\r\n            item.style.fontFamily = this.fontFamily;\r\n            item.style.fontWeight = this.fontWeight;\r\n            item.style.setProperty(\"--duration\", `${this.baseDuration / this.speed}s`); // 持续时间\r\n          }\r\n          break;\r\n        case \"bottom\":\r\n          trackType = \"bottom\";\r\n          track = getTrack(item, trackType, 0) % itemY;\r\n          if (track >= 0) {\r\n            const bottomArr: HTMLElement[] = [];\r\n            const bottomDan = this.danmakuTracks.bottom;\r\n            for (const t of bottomDan) {\r\n              bottomArr.push(...t);\r\n            }\r\n            const bottom = bottomArr\r\n              .map((el) => {\r\n                return parseInt(el.style.fontSize) + this.trackPadding;\r\n              })\r\n              .slice(0, track)\r\n              .reduce((prev, cur) => prev + cur, 0);\r\n\r\n            if (bottom + parseInt(item.style.fontSize) + this.trackPadding > containerHeight) {\r\n              this.danmakuTracks[trackType][i]?.pop();\r\n              return;\r\n            }\r\n            item.dataset.track = track.toString();\r\n            item.style.width = itemWidth + 1 + \"px\";\r\n            item.style.marginLeft = `-${(itemWidth + 1) * 0.5}px`;\r\n            item.style.bottom = bottom + \"px\";\r\n            item.style.fontFamily = this.fontFamily;\r\n            item.style.fontWeight = this.fontWeight;\r\n            item.style.setProperty(\"--duration\", `${this.baseDuration / this.speed}s`); // 持续时间\r\n          }\r\n          break;\r\n        default:\r\n          track = -1;\r\n          console.error(`无法处理的弹幕模式: ${dm.mode}`);\r\n      }\r\n      if (track >= 0) {\r\n        item.dataset.id = dm.id.toString();\r\n        item.dataset.user = dm.user.toString();\r\n        // 添加弹幕到容器\r\n        this.container.appendChild(item);\r\n      }\r\n    }\r\n    return docFragment;\r\n  }\r\n  /** 测量字体宽度 */\r\n  measureTextWidth(text: string, font: string) {\r\n    if (!this.measureContext) {\r\n      this.measureContext = document.createElement(\"canvas\").getContext(\"2d\")!;\r\n    }\r\n    this.measureContext.font = font;\r\n    return this.measureContext.measureText(text).width;\r\n  }\r\n  /** 根据某一坐标捕获弹幕DOM */\r\n  captureDanmakuDOM(x: number, y: number, range: number, single = false) {\r\n    const result: HTMLElement[] = [];\r\n    // 遍历所有在屏上的弹幕\r\n    const items = this.container.querySelectorAll<HTMLElement>(`.${this.classPrefix}-danmaku-item`);\r\n    for (const el of items) {\r\n      if (el.innerHTML) {\r\n        // 获取检测边界\r\n        const elRect = el.getBoundingClientRect();\r\n        const containerRect = this.container.getBoundingClientRect();\r\n        const edgeLeft = elRect.left - containerRect.left;\r\n        const edgeRight = elRect.right - containerRect.left;\r\n        const edgeTop = elRect.top - containerRect.top;\r\n        const edgeBottom = elRect.bottom - containerRect.top;\r\n        if (\r\n          x >= edgeLeft - range &&\r\n          x <= edgeRight + range &&\r\n          y >= edgeTop - range &&\r\n          y <= edgeBottom + range\r\n        ) {\r\n          result.push(el);\r\n          // 如果只要求获取一个元素，则停止遍历以优化性能\r\n          if (single) return result;\r\n        }\r\n      }\r\n    }\r\n    return result;\r\n  }\r\n  /** 根据某一坐标捕获弹幕 */\r\n  captureDanmaku(x: number, y: number, range: number, single = false) {\r\n    const resultDOM = this.captureDanmakuDOM(x, y, range, single);\r\n    const result: DanmakuItem[] = [];\r\n    for (const el of resultDOM) {\r\n      const dm = this.getDanmakuById(el.dataset.id!);\r\n      if (dm) {\r\n        result.push(dm);\r\n      }\r\n    }\r\n    return result;\r\n  }\r\n  /** 根据id获取弹幕 */\r\n  getDanmakuById(id: string | number) {\r\n    return this.list.find((dm) => dm.id.toString() === id.toString());\r\n  }\r\n\r\n  /** 显示弹幕 */\r\n  show() {\r\n    this.hidden = false;\r\n  }\r\n\r\n  /** 隐藏弹幕 */\r\n  hide() {\r\n    this.hidden = true;\r\n    this.clear();\r\n  }\r\n}\r\n","import { Player } from \"@/player\";\r\nimport MeonDanmakuEngine from \"./MeonDanmakuEngine\";\r\nimport { PlayerOptions } from \"@/types\";\r\nimport { BasePlugin } from \"@/plugin\";\r\nimport { classPrefix } from \"@/config\";\r\nimport { createElement } from \"@/utils\";\r\n\r\ndeclare module \"@core\" {\r\n  interface PlayerPlugins {\r\n    danmakuEngine?: DanmakuEngine;\r\n  }\r\n}\r\n\r\n/** css弹幕引擎\r\n *\r\n * 负责弹幕播放与绘制\r\n *\r\n * 前置插件: `danmaku`\r\n */\r\n\r\nexport default class DanmakuEngine extends BasePlugin {\r\n  static readonly pluginName = \"danmakuEngine\";\r\n  core: MeonDanmakuEngine;\r\n  $el: HTMLDivElement;\r\n  constructor(player: Player) {\r\n    super(player);\r\n    this.$el = this.plugins.danmaku!.$el.appendChild(\r\n      createElement(\"div\", { class: `${classPrefix}-rowdanmaku` })\r\n    );\r\n    this.core = new MeonDanmakuEngine(this.$el, {\r\n      getTime: () => this.player.currentTime,\r\n      classPrefix: classPrefix,\r\n    });\r\n  }\r\n  init() {\r\n    this.player.on(\"play\", () => {\r\n      this.core.play();\r\n    });\r\n    this.player.on(\"pause\", () => {\r\n      this.core.pause();\r\n    });\r\n    this.player.on(\"seeking\", () => {\r\n      this.core.pause();\r\n      this.core.seek();\r\n    });\r\n    this.player.on(\"seeked\", () => {\r\n      !this.player.paused && this.core.play();\r\n    });\r\n    this.player.on(\"danmaku:filter\", (type, flag) => {\r\n      switch (type) {\r\n        case \"top\":\r\n        case \"bottom\":\r\n        case \"roll\":\r\n        case \"reverse\":\r\n          this.core.setTrackFilter(type, flag);\r\n          return;\r\n        case \"color\":\r\n          this.core.setColorFilter(flag);\r\n      }\r\n    });\r\n    this.player.on(\"danmaku:add\", (dan, play) => {\r\n      this.core.add(dan, play);\r\n    });\r\n    this.player.on(\"danmaku:remove\", (dan) => {\r\n      this.core.remove(dan);\r\n    });\r\n    this.player.on(\"danmaku:draw\", (dm) => {\r\n      this.core.draw([dm]);\r\n    });\r\n    this.player.on(\"danmaku:blockUser\", (user, flag) => {\r\n      this.core.setUserFilter(user, flag);\r\n    });\r\n    this.player.on(\"danmaku:blockContent\", (content, flag) => {\r\n      this.core.setContentFilter(content, flag);\r\n    });\r\n    this.player.on(\"danmaku:clear\", () => {\r\n      this.core.clear();\r\n    });\r\n    this.player.on(\"danmaku:on\", () => {\r\n      this.core.show();\r\n    });\r\n    this.player.on(\"danmaku:off\", () => {\r\n      this.core.hide();\r\n    });\r\n  }\r\n\r\n  apply(player: Player, options: PlayerOptions): void {\r\n    if (options.danmaku) {\r\n      const { scale, font, bold, speed, opacity } = options.danmaku;\r\n      scale && this.setScale(scale);\r\n      font && this.setFont(font);\r\n      bold != null && this.setBold(bold);\r\n      speed && this.setSpeed(speed);\r\n      opacity && this.setOpacity(opacity);\r\n    }\r\n  }\r\n  // 弹幕播放属性设置\r\n\r\n  /** 设置弹幕不透明度 */\r\n  setOpacity(value: number) {\r\n    this.core.opacity = value;\r\n    this.player.emit(\"danmaku:opacityChange\", value);\r\n  }\r\n  /** 设置弹幕速度 */\r\n  setSpeed(value: number) {\r\n    this.core.speed = value;\r\n    this.player.emit(\"danmaku:speedChange\", value);\r\n  }\r\n  /** 设置弹幕区域 */\r\n  setArea(value: number) {\r\n    this.core.limitArea = value;\r\n    this.player.emit(\"danmaku:areaChange\", value);\r\n  }\r\n  /** 设置弹幕大小 */\r\n  setScale(value: number) {\r\n    this.core.fontScale = value;\r\n    this.player.emit(\"danmaku:scaleChange\", value);\r\n  }\r\n  /** 设置弹幕字体 */\r\n  setFont(value: string) {\r\n    this.core.fontFamily = value;\r\n    this.player.emit(\"danmaku:fontChange\", value);\r\n  }\r\n  /** 设置弹幕加粗 */\r\n  setBold(value: boolean) {\r\n    this.core.fontWeight = value ? \"bold\" : \"\";\r\n    this.player.emit(\"danmaku:boldChange\", value);\r\n  }\r\n  /** 根据坐标捕获弹幕 */\r\n  capture(x: number, y: number, r: number) {\r\n    return this.core.captureDanmaku(x, y, r);\r\n  }\r\n}\r\n","let count = 1000;\r\nconst ar = [\r\n  \"1\",\r\n  \"2\",\r\n  \"3\",\r\n  \"4\",\r\n  \"5\",\r\n  \"6\",\r\n  \"7\",\r\n  \"8\",\r\n  \"9\",\r\n  \"0\",\r\n  \"a\",\r\n  \"b\",\r\n  \"c\",\r\n  \"d\",\r\n  \"e\",\r\n  \"f\",\r\n  \"g\",\r\n  \"h\",\r\n  \"i\",\r\n  \"j\",\r\n  \"k\",\r\n  \"l\",\r\n  \"m\",\r\n  \"n\",\r\n  \"o\",\r\n  \"p\",\r\n  \"q\",\r\n  \"r\",\r\n  \"s\",\r\n  \"t\",\r\n  \"u\",\r\n  \"v\",\r\n  \"w\",\r\n  \"x\",\r\n  \"y\",\r\n  \"z\",\r\n];\r\n\r\nexport function randomId() {\r\n  const hs = [];\r\n  const al = ar.length;\r\n  for (let i = 0; i < 8; i++) {\r\n    hs.push(ar[Math.floor(Math.random() * al)]);\r\n  }\r\n  count++;\r\n  return hs.join(\"\") + `${count}`;\r\n}\r\n","import { DanmakuItem, DanmakuParser, DanmakuSource } from \"./types\";\r\nimport { PlayerOptions, VideoInfo } from \"@/types\";\r\nimport { Player } from \"@/player\";\r\nimport { BasePlugin } from \"@/plugin\";\r\nimport { randomId } from \"@/utils/randomId\";\r\n\r\ndeclare module \"@core\" {\r\n  interface PlayerPlugins {\r\n    danmakuLoader?: DanmakuLoader;\r\n  }\r\n  interface PlayerOptions {\r\n    danmakuParser?: Record<string, DanmakuParser>;\r\n  }\r\n}\r\n\r\n/** 弹幕加载器\r\n *\r\n * 负责弹幕加载及格式转换\r\n *\r\n * 前置插件: `danmaku`\r\n */\r\nexport default class DanmakuLoader extends BasePlugin {\r\n  static readonly pluginName = \"danmakuLoader\";\r\n\r\n  /** 默认弹幕类型 */\r\n  public type: string = \"\";\r\n\r\n  public parser: Record<string, DanmakuParser> = defaultParsers;\r\n\r\n  get danmaku() {\r\n    return this.player.danmaku;\r\n  }\r\n\r\n  init() {\r\n    this.player.on(\"videoChange\", (info) => {\r\n      this.reload(info);\r\n    });\r\n  }\r\n\r\n  apply(player: Player, options: PlayerOptions): void {\r\n    this.type = options.danmaku?.type || \"\";\r\n    this.parser = Object.assign(this.parser, options.danmakuParser);\r\n  }\r\n\r\n  /** 从响应中获取数据 */\r\n  protected async getResponseData<T extends DanmakuParser[\"type\"]>(\r\n    response: Response,\r\n    type: T\r\n  ): Promise<Parameters<DanmakuParser[\"parse\"]>[0]> {\r\n    if (type == \"json\") {\r\n      return await response.json();\r\n    } else if (type == \"xml\") {\r\n      return new DOMParser().parseFromString(await response.text(), \"text/xml\");\r\n    } else {\r\n      return await response.text();\r\n    }\r\n  }\r\n\r\n  parse(raw: any, type: string) {\r\n    if (!type) {\r\n      return raw as DanmakuItem[];\r\n    } else {\r\n      const parser = this.parser[type];\r\n      if (!parser) throw \"未知弹幕格式\";\r\n      try {\r\n        return parser.parse(raw);\r\n      } catch {\r\n        throw \"无法正确解析弹幕格式\";\r\n      }\r\n    }\r\n  }\r\n\r\n  /** 加载附加弹幕文件 */\r\n  loadSource({ url, type }: DanmakuSource) {\r\n    fetch(url)\r\n      .then((data) => this.getResponseData(data, this.parser[type].type))\r\n      .then((data) => this.parse(data, type))\r\n      .then((dan) => {\r\n        dan && this.add(dan);\r\n        this.player.emit(\"danmaku:loaded\", dan, { url });\r\n      })\r\n      .catch((err) => {\r\n        this.player.emit(\"danmaku:loadFailed\", err, { url });\r\n        console.error(err);\r\n      });\r\n  }\r\n\r\n  /** 加载弹幕 */\r\n  private load(info: VideoInfo) {\r\n    this.danmaku!.invoke.get?.(info)\r\n      .then((data) => this.parse(data as any, this.type))\r\n      .then((dan) => {\r\n        dan && this.add(dan);\r\n        this.player.emit(\"danmaku:loaded\", dan, info);\r\n      })\r\n      .catch((err) => {\r\n        this.player.emit(\"danmaku:loadFailed\", err, info);\r\n      });\r\n  }\r\n\r\n  private add(dan: DanmakuItem[]) {\r\n    this.danmaku!.add(dan);\r\n  }\r\n\r\n  /** 重载弹幕 */\r\n  public async reload(info: VideoInfo) {\r\n    // 清空弹幕池\r\n    this.danmaku!.clear();\r\n    this.player.emit(\"danmaku:loading\");\r\n    this.load(info);\r\n    info.danmaku?.forEach((source) => {\r\n      this.loadSource(source);\r\n    });\r\n  }\r\n}\r\n\r\nconst defaultParsers: Record<string, DanmakuParser> = {\r\n  \"bilibili-xml\": {\r\n    type: \"xml\",\r\n    parse: (xmlDoc: XMLDocument) => {\r\n      const dan: [string, any][] = [];\r\n      // 获取xml文档的所有子节点\r\n      const nodeList = xmlDoc.childNodes;\r\n      const generate = (nodeList: any) => {\r\n        for (let i = 0; i < nodeList.length; i++) {\r\n          const currentNode = nodeList[i];\r\n          if (currentNode?.attributes?.length && i > 0) {\r\n            const m = currentNode.attributes[0].nodeValue.split(\",\");\r\n            const c = currentNode.innerHTML;\r\n            dan.push([c, m]);\r\n          } else if (currentNode.childNodes.length > 0) {\r\n            generate(currentNode.childNodes);\r\n          }\r\n        }\r\n      };\r\n      generate(nodeList);\r\n      return dan.map(([c, m]) => ({\r\n        time: +m[0],\r\n        mode: +m[1],\r\n        color: +m[3],\r\n        user: m[6],\r\n        content: c,\r\n        size: +m[2] || 25,\r\n        date: +m[4] || 0,\r\n        id: +m[7],\r\n      }));\r\n    },\r\n  },\r\n  dplayer: {\r\n    type: \"json\",\r\n    parse: (data: [number, number, number, number | string, string, number, number][]) =>\r\n      data.map((item, i) => ({\r\n        time: item[0],\r\n        mode: [1, 5, 4, 6][item[1]],\r\n        color: item[2],\r\n        user: item[3],\r\n        content: item[4],\r\n        size: 25,\r\n        date: 0,\r\n        id: randomId(),\r\n      })),\r\n  },\r\n  mfuns: {\r\n    type: \"json\",\r\n    parse: (data: [number, number, number, string, string, number, number, number][]) =>\r\n      data.map((item) => ({\r\n        time: item[0],\r\n        mode: item[1],\r\n        color: item[2],\r\n        user: item[3],\r\n        content: item[4],\r\n        size: item[5],\r\n        date: item[6] > 1 ? item[6] : 0,\r\n        id: item[7],\r\n      })),\r\n  },\r\n};\r\n","import { DanmakuItem, DanmakuSendItem } from \"./types\";\r\nimport { BasePlugin } from \"@/plugin\";\r\n\r\ndeclare module \"@core\" {\r\n  interface PlayerPlugins {\r\n    danmakuOperate?: DanmakuOperate;\r\n  }\r\n}\r\n\r\n/** 弹幕操作\r\n *\r\n * 负责对弹幕进行api相关操作\r\n *\r\n * 前置插件: `danmaku`\r\n */\r\n\r\nexport default class DanmakuOperate extends BasePlugin {\r\n  static readonly pluginName = \"danmakuOperate\";\r\n\r\n  get danmaku() {\r\n    return this.player.danmaku;\r\n  }\r\n  get invoke() {\r\n    return this.player.danmaku?.invoke || {};\r\n  }\r\n\r\n  /**\r\n   * 发送弹幕\r\n   * @param danmaku 要发送的弹幕\r\n   * @return 操作结果\r\n   * */\r\n  async send(danmaku: DanmakuSendItem): Promise<void> {\r\n    if (!this.invoke.send) throw \"发送失败\";\r\n    return await this.invoke\r\n      .send(danmaku, this.player.getVideoInfo())\r\n      .then((res) => {\r\n        this.danmaku!.add(\r\n          [\r\n            Object.assign(\r\n              {\r\n                id: `send:${Date.now()}`,\r\n                date: Math.floor(Date.now() / 1000),\r\n                user: this.player.userId || 0,\r\n                fromHere: true,\r\n              },\r\n              danmaku\r\n            ),\r\n          ],\r\n          true\r\n        );\r\n        return res;\r\n      })\r\n      .catch((e) => {\r\n        throw e;\r\n      });\r\n  }\r\n\r\n  /**\r\n   * 举报弹幕\r\n   * @param danmaku 要举报的弹幕\r\n   * @return 操作结果\r\n   * */\r\n  async report(danmaku: DanmakuItem): Promise<void> {\r\n    if (!this.invoke.report) throw \"操作失败\";\r\n    return await this.invoke\r\n      .report(danmaku, this.player.getVideoInfo())\r\n      .then((res) => {\r\n        // 操作成功后从弹幕池移除该弹幕\r\n        this.danmaku!.remove([danmaku]);\r\n        return res;\r\n      })\r\n      .catch((e) => {\r\n        throw e;\r\n      });\r\n  }\r\n\r\n  /**\r\n   * 删除弹幕\r\n   * @param danmaku 要删除的弹幕\r\n   * @return 操作结果\r\n   * */\r\n  async delete(danmaku: DanmakuItem[]): Promise<void> {\r\n    if (!this.invoke.delete) throw \"操作失败\";\r\n    return await this.invoke\r\n      .delete(danmaku, this.player.getVideoInfo())\r\n      .then((res) => {\r\n        // 操作成功后从弹幕池移除该弹幕\r\n        this.danmaku!.remove(danmaku);\r\n        return res;\r\n      })\r\n      .catch((e) => {\r\n        throw e;\r\n      });\r\n  }\r\n\r\n  /**\r\n   * 删除自己发送的弹幕\r\n   * @param danmaku 要删除的弹幕\r\n   * @return 操作结果\r\n   * */\r\n  async recall(danmaku: DanmakuItem): Promise<void> {\r\n    if (!this.invoke.recall) throw \"操作失败\";\r\n    return await this.invoke\r\n      .recall(danmaku, this.player.getVideoInfo())\r\n      .then((res) => {\r\n        // 操作成功后从弹幕池移除该弹幕\r\n        this.danmaku!.remove([danmaku]);\r\n        return res;\r\n      })\r\n      .catch((e) => {\r\n        throw e;\r\n      });\r\n  }\r\n\r\n  /**\r\n   * 屏蔽用户\r\n   * @param user 用户id\r\n   * @param flag 设置屏蔽状态\r\n   * @return 操作结果\r\n   * */\r\n  async blockUser(user: string | number, flag: boolean): Promise<void> {\r\n    if (!this.invoke.blockUser) throw \"操作失败\";\r\n    return await this.invoke\r\n      .blockUser(user, flag)\r\n      .then(() => {\r\n        this.player.emit(\"danmaku:blockUser\", user, flag);\r\n      })\r\n      .catch((e) => {\r\n        throw e;\r\n      });\r\n  }\r\n\r\n  /**\r\n   * 屏蔽关键词\r\n   * @param content 关键词内容\r\n   * @param flag 设置屏蔽状态\r\n   * @return 操作结果\r\n   * */\r\n  async blockContent(content: string, flag: boolean): Promise<void> {\r\n    if (!this.invoke.blockContent) throw \"操作失败\";\r\n    return await this.invoke\r\n      .blockContent(content, flag)\r\n      .then((res) => {\r\n        this.player.emit(\"danmaku:blockContent\", content, flag);\r\n      })\r\n      .catch((e) => {\r\n        throw e;\r\n      });\r\n  }\r\n}\r\n","import { Player } from \"@/player\";\r\nimport { classPrefix } from \"@/config\";\r\nimport { ControlsPlugin } from \"@/plugin\";\r\nimport { createElement } from \"@/utils\";\r\n\r\nconst templateHTML = /*html*/ `\r\n  <div class=\"${classPrefix}-controls-button-icon\">\r\n    <i class=\"mpicon-danmaku-off\"></i>\r\n    <i class=\"mpicon-danmaku\"></i>\r\n  </div>\r\n  <div class=\"mpui-tooltip\">关闭弹幕</div>\r\n`;\r\n\r\nexport default class ButtonDanmakuToggle extends ControlsPlugin {\r\n  static pluginName = \"buttonDanmakuToggle\";\r\n\r\n  $icon: HTMLElement;\r\n  $tooltip: HTMLElement;\r\n\r\n  constructor(player: Player) {\r\n    super(\r\n      player,\r\n      createElement(\r\n        \"div\",\r\n        { class: `${classPrefix}-controls-button ${classPrefix}-button-danmakutoggle is-on` },\r\n        templateHTML\r\n      )\r\n    );\r\n    this.$icon = this.$(`.${classPrefix}-controls-button-icon`)!;\r\n    this.$tooltip = this.$(\".mpui-tooltip\")!;\r\n  }\r\n\r\n  init() {\r\n    this.player.on(\"danmaku:on\", () => {\r\n      this._change(true);\r\n    });\r\n    this.player.on(\"danmaku:off\", () => {\r\n      this._change(false);\r\n    });\r\n    this.$icon.addEventListener(\"click\", () => {\r\n      this.plugins.danmaku?.toggle();\r\n    });\r\n  }\r\n\r\n  /** 设置按钮状态 */\r\n  private _change(flag: boolean) {\r\n    this.$el.classList.toggle(\"is-on\", flag);\r\n    this.$tooltip.innerText = flag ? \"关闭弹幕\" : \"开启弹幕\";\r\n  }\r\n}\r\n","import type { DanmakuSendItem } from \"@plugins/danmaku/types\";\nimport { keyCode } from \"@/utils/KeyCode.enum\";\nimport { PlayerOptions } from \"@/types\";\nimport { Player } from \"@/player\";\nimport { classPrefix } from \"@/config\";\nimport Controller from \"../ui/controller\";\nimport { ControlsPlugin, ControlsItem, PluginFrom } from \"@/plugin\";\nimport Danmaku from \"./danmaku\";\nimport { createElement } from \"@/utils\";\n\nconst templateHTML = /*html*/ `\n  <div class=\"${classPrefix}-danmakubar-outer\"></div>\n  <div class=\"${classPrefix}-danmakubar-input-wrap\">\n    <div class=\"${classPrefix}-danmakubar-left\"></div>\n    <input type=\"text\" autocompleted=\"new-password\" class=\"${classPrefix}-danmakubar-input\" />\n    <div class=\"${classPrefix}-danmakubar-status-loading\">弹幕功能加载中...</div>\n    <div class=\"${classPrefix}-danmakubar-status-login\">需要<a>登录</a>后才能发送弹幕哦~</div>\n    <div class=\"${classPrefix}-danmakubar-right\"></div>\n    <div class=\"${classPrefix}-danmakubar-send\">发送</div>\n  </div>\n`;\n\ndeclare module \"@core\" {\n  interface PlayerOptions {\n    /** 弹幕栏设置 */\n    danmakuBar?: {\n      controls?: DanmakuBarControls;\n      /** 占位文本 */\n      placeholder?: string;\n      /** 需要登录 */\n      loginRequired?: boolean;\n    };\n    danmakuStyle?: {\n      /** 选色列表 */\n      colorList?: string[];\n      /** 字号列表 */\n      sizeList?: [number, string?][];\n      /** 弹幕模式列表 */\n      modeList?: number[];\n      /** 默认弹幕字号 */\n      defaultSize?: number;\n      /** 默认弹幕模式 */\n      defaultMode?: number;\n      /** 默认弹幕模式 */\n      defaultColor?: number;\n    };\n  }\n  interface PlayerPlugins {\n    danmakuBar?: DanmakuBar;\n  }\n}\n\nexport interface DanmakuBarControls {\n  outer?: PluginFrom<ControlsItem>[];\n  left?: PluginFrom<ControlsItem>[];\n  right?: PluginFrom<ControlsItem>[];\n}\n\n/** 弹幕栏\n *\n * 前置插件: `danmaku`\n */\nexport default class DanmakuBar extends ControlsPlugin {\n  static pluginName = \"danmakuBar\";\n\n  $send: HTMLElement;\n  $input: HTMLInputElement;\n  $outer: HTMLElement;\n  $left: HTMLElement;\n  $right: HTMLElement;\n\n  $logina: HTMLElement;\n\n  controller: Controller;\n  danmaku: Danmaku;\n\n  danmakuColor = 0xffffff;\n  danmakuMode = 1;\n  danmakuSize = 25;\n\n  /** 是否需要登录 */\n  get loginRequired() {\n    return this.$el.classList.contains(\"is-login\");\n  }\n\n  /** 冷却计时器 */\n  coolDownTimer = 0;\n\n  protected controls: DanmakuBarControls = {};\n\n  constructor(player: Player) {\n    super(player, createElement(\"div\", { class: `${classPrefix}-danmakubar` }, templateHTML));\n\n    this.controller = this.plugins.controller!;\n    this.danmaku = this.plugins.danmaku!;\n\n    this.$send = this.$el.querySelector(`.${classPrefix}-danmakubar-send`)!;\n    this.$input = this.$el.querySelector(`.${classPrefix}-danmakubar-input`)!;\n    this.$outer = this.$el.querySelector(`.${classPrefix}-danmakubar-outer`)!;\n    this.$left = this.$el.querySelector(`.${classPrefix}-danmakubar-left`)!;\n    this.$right = this.$el.querySelector(`.${classPrefix}-danmakubar-right`)!;\n\n    this.$logina = this.$el.querySelector(`.${classPrefix}-danmakubar-status-login a`)!;\n    this.$logina.onclick = () => this.player.login?.();\n\n    this.player.on(\"videoChange\", () => {\n      this.setLoading(true);\n    });\n    this.player.on(\"loadeddata\", () => {\n      this.setLoading(false);\n    });\n\n    this.$input.addEventListener(\"keydown\", (e) => {\n      if (e.keyCode == keyCode.Enter) {\n        this.send();\n      }\n    });\n    this.$send.onclick = () => {\n      this.send();\n    };\n  }\n\n  apply(player: Player, options: PlayerOptions): void {\n    if (options.danmakuBar?.loginRequired) {\n      this.setLoginRequired(true);\n    }\n    this.setPlaceHolder(options.danmakuBar?.placeholder || defaultPlaceholder);\n    this.controls = options.danmakuBar?.controls || {};\n  }\n  ready() {\n    this.setControls(this.controls);\n  }\n  /** 更新控制组件 */\n  setControls(controls: DanmakuBarControls) {\n    this.controls = controls;\n    const { outer, left, right } = controls;\n    this.build(this.$outer, outer);\n    this.build(this.$left, left);\n    this.build(this.$right, right);\n  }\n  setPlaceHolder(placeholder: string) {\n    this.$input.placeholder = placeholder;\n  }\n  protected build(container: HTMLElement, list?: PluginFrom<ControlsItem>[]) {\n    container.innerHTML = \"\";\n    const fragment = new DocumentFragment();\n    list?.forEach((item) => {\n      const el = this.player.plugin.from(item)?.$el;\n      if (el) fragment.appendChild(el);\n    });\n    container.appendChild(fragment);\n  }\n  /** 执行弹幕发送操作 */\n  private send() {\n    // 如果内容为空或只有空格，则不进行发送操作\n    if (!this.$input.value.trim() || this.coolDownTimer) return;\n    this.plugins.danmakuOperate?.send(this.generateDanmaku());\n    this.$input.value = \"\";\n  }\n  /** 设置弹幕发送冷却 */\n  public setCoolDown(time: number) {\n    if (this.coolDownTimer) {\n      window.clearInterval(this.coolDownTimer);\n    }\n    let t = Math.round(time);\n    this.$send.classList.add(\"is-disabled\");\n    this.$send.innerText = `${t}秒`;\n    this.coolDownTimer = window.setInterval(() => {\n      t -= 1;\n      if (t) {\n        this.$send.innerText = `${t}秒`;\n      } else {\n        this.$send.innerText = \"发送\";\n        this.$send.classList.remove(\"is-disabled\");\n        window.clearInterval(this.coolDownTimer);\n        this.coolDownTimer = 0;\n      }\n    }, 1000);\n  }\n  generateDanmaku(): DanmakuSendItem {\n    return {\n      time: this.player.currentTime,\n      content: this.$input.value,\n      mode: this.danmakuMode,\n      color: this.danmakuColor,\n      size: this.danmakuSize,\n    };\n  }\n  /** 设置登录限制 */\n  private setLoginRequired(flag: boolean) {\n    if (flag) {\n      this.$el.classList.add(\"is-login\");\n    } else {\n      this.$el.classList.remove(\"is-login\");\n    }\n  }\n  /** 设置加载状态 */\n  private setLoading(flag: boolean) {\n    if (flag) {\n      this.$el.classList.add(\"is-loading\");\n    } else {\n      this.$el.classList.remove(\"is-loading\");\n    }\n  }\n}\n\nconst defaultPlaceholder = \"发条弹幕吧~\";\n","import { MultiPicker, Slider } from \"@/components\";\r\nimport { Player } from \"@/player\";\r\nimport { classPrefix } from \"@/config\";\r\nimport { ControlsPlugin } from \"@/plugin\";\r\nimport { createElement } from \"@/utils\";\r\n\r\nconst templateHTML = /*html*/ `\r\n  <div class=\"${classPrefix}-controls-button-icon\">\r\n    <i class=\"mpicon-danmaku-settings\"></i>\r\n  </div>\r\n  <div class=\"${classPrefix}-controls-panel-wrap\">\r\n    <div class=\"${classPrefix}-controls-panel ${classPrefix}-controls-panel-danmaku-settings\">\r\n      <div class=\"${classPrefix}-panel-row\">\r\n        <div class=\"${classPrefix}-row-label\">类型屏蔽</div>\r\n        <div class=\"${classPrefix}-danmaku-settings-filter-picker\"></div>\r\n      </div>\r\n      <div class=\"${classPrefix}-panel-row\">\r\n        <div class=\"${classPrefix}-row-label\">不透明度</div>\r\n        <div\r\n          class=\"${classPrefix}-danmaku-settings-opacity-slider ${classPrefix}-slider-wrap\"\r\n        ></div>\r\n        <div class=\"${classPrefix}-danmaku-settings-opacity-value ${classPrefix}-row-value\"></div>\r\n      </div>\r\n      <div class=\"${classPrefix}-panel-row\">\r\n        <div class=\"${classPrefix}-row-label\">显示区域</div>\r\n        <div class=\"${classPrefix}-danmaku-settings-area-slider ${classPrefix}-slider-wrap\"></div>\r\n        <div class=\"${classPrefix}-danmaku-settings-area-value ${classPrefix}-row-value\"></div>\r\n      </div>\r\n      <div class=\"${classPrefix}-panel-row\">\r\n        <div class=\"${classPrefix}-row-label\">文字大小</div>\r\n        <div class=\"${classPrefix}-danmaku-settings-size-slider ${classPrefix}-slider-wrap\"></div>\r\n        <div class=\"${classPrefix}-danmaku-settings-size-value ${classPrefix}-row-value\"></div>\r\n      </div>\r\n      <div class=\"${classPrefix}-panel-row\">\r\n        <div class=\"${classPrefix}-row-label\">弹幕速度</div>\r\n        <div\r\n          class=\"${classPrefix}-danmaku-settings-speed-slider  ${classPrefix}-slider-wrap\"\r\n        ></div>\r\n        <div class=\"${classPrefix}-danmaku-settings-speed-value ${classPrefix}-row-value\"></div>\r\n      </div>\r\n    </div>\r\n  </div>\r\n`;\r\n\r\nexport default class ButtonDanmakuSettings extends ControlsPlugin {\r\n  static pluginName = \"buttonDanmakuSettings\";\r\n\r\n  $icon: HTMLElement;\r\n\r\n  $filterPicker: HTMLElement;\r\n  $opacitySlider: HTMLElement;\r\n  $areaSlider: HTMLElement;\r\n  $sizeSlider: HTMLElement;\r\n  $speedSlider: HTMLElement;\r\n\r\n  $opacityValue: HTMLElement;\r\n  $areaValue: HTMLElement;\r\n  $sizeValue: HTMLElement;\r\n  $speedValue: HTMLElement;\r\n\r\n  pickerFilter!: MultiPicker;\r\n  sliderOpacity!: Slider;\r\n  sliderArea!: Slider;\r\n  sliderSize!: Slider;\r\n  sliderSpeed!: Slider;\r\n\r\n  get danmaku() {\r\n    return this.plugins.danmaku!;\r\n  }\r\n  get danmakuEngine() {\r\n    return this.plugins.danmakuEngine!;\r\n  }\r\n\r\n  constructor(player: Player) {\r\n    super(\r\n      player,\r\n      createElement(\r\n        \"div\",\r\n        { class: `${classPrefix}-controls-button ${classPrefix}-button-danmakusettings` },\r\n        templateHTML\r\n      )\r\n    );\r\n\r\n    this.$icon = this.$(`.${classPrefix}-controls-button-icon`)!;\r\n\r\n    this.$filterPicker = this.$(`.${classPrefix}-danmaku-settings-filter-picker`)!;\r\n    this.$opacitySlider = this.$(`.${classPrefix}-danmaku-settings-opacity-slider`)!;\r\n    this.$areaSlider = this.$(`.${classPrefix}-danmaku-settings-area-slider`)!;\r\n    this.$sizeSlider = this.$(`.${classPrefix}-danmaku-settings-size-slider`)!;\r\n    this.$speedSlider = this.$(`.${classPrefix}-danmaku-settings-speed-slider`)!;\r\n\r\n    this.$opacityValue = this.$(`.${classPrefix}-danmaku-settings-opacity-value`)!;\r\n    this.$areaValue = this.$(`.${classPrefix}-danmaku-settings-area-value`)!;\r\n    this.$sizeValue = this.$(`.${classPrefix}-danmaku-settings-size-value`)!;\r\n    this.$speedValue = this.$(`.${classPrefix}-danmaku-settings-speed-value`)!;\r\n  }\r\n\r\n  init() {\r\n    // 弹幕类型屏蔽\r\n    this.pickerFilter = new MultiPicker({\r\n      container: this.$filterPicker,\r\n      value: [],\r\n      list: [\r\n        { value: \"roll\", label: \"滚动\" },\r\n        { value: \"top\", label: \"顶部\" },\r\n        { value: \"bottom\", label: \"底部\" },\r\n        { value: \"color\", label: \"彩色\" },\r\n        { value: \"special\", label: \"特殊\" },\r\n      ],\r\n      onToggle: (value, flag) => {\r\n        this.danmaku.filterType(value, flag);\r\n      },\r\n    });\r\n    // 不透明度\r\n    this.sliderOpacity = new Slider({\r\n      container: this.$opacitySlider,\r\n      min: 10,\r\n      max: 100,\r\n      step: 1,\r\n      value: 100,\r\n      onDrag: (value) => {\r\n        this.danmakuEngine.setOpacity(value / 100);\r\n      },\r\n      onChange: (value) => {\r\n        this.$opacityValue.innerText = `${value}%`;\r\n      },\r\n    });\r\n    // 显示区域\r\n    this.sliderArea = new Slider({\r\n      container: this.$areaSlider,\r\n      min: 20,\r\n      max: 105,\r\n      step: 5,\r\n      value: 25,\r\n      onDrag: (value) => {\r\n        const area = value / 100;\r\n        this.danmakuEngine.setArea(area > 100 ? 0 : area);\r\n      },\r\n      onChange: (value) => {\r\n        this.$areaValue.innerText = value < 100 ? `${value}%` : value == 100 ? \"不重叠\" : \"无限\";\r\n      },\r\n    });\r\n    this.sliderArea.drag(25);\r\n    // 文字大小\r\n    this.sliderSize = new Slider({\r\n      container: this.$sizeSlider,\r\n      min: 50,\r\n      max: 200,\r\n      step: 1,\r\n      value: 100,\r\n      onDrag: (value) => {\r\n        this.danmakuEngine.setScale(value / 100);\r\n      },\r\n      onChange: (value) => {\r\n        this.$sizeValue.innerText = `${value}%`;\r\n      },\r\n    });\r\n    // 弹幕速度\r\n    this.sliderSpeed = new Slider({\r\n      container: this.$speedSlider,\r\n      min: 20,\r\n      max: 180,\r\n      step: 10,\r\n      value: 100,\r\n      divider: 5,\r\n      onDrag: (value) => {\r\n        this.danmakuEngine.setSpeed(value / 100);\r\n      },\r\n      onChange: (value) => {\r\n        this.$speedValue.innerText = `${value}%`;\r\n      },\r\n    });\r\n  }\r\n}\r\n","import { classPrefix } from \"@/config\";\r\nimport { Player } from \"@/player\";\r\nimport { BasePlugin } from \"@/plugin\";\r\nimport { createElement } from \"@/utils\";\r\nimport { html, render } from \"lit-html\";\r\nimport { DanmakuItem } from \"./types\";\r\n\r\nconst templateDanmaku = (\r\n  danmaku: DanmakuItem[],\r\n  operation: (dm: DanmakuItem) => [string, (dm: DanmakuItem) => void, unknown][],\r\n  onClick: (dm: DanmakuItem) => void,\r\n  hide: () => void\r\n) => html`\r\n  ${danmaku.map(\r\n    (dm) => html`\r\n      <li\r\n        class=\"${classPrefix}-contextmenu-danmaku-item\"\r\n        @click=${() => {\r\n          onClick(dm);\r\n        }}\r\n      >\r\n        <div class=\"${classPrefix}-contextmenu-danmaku-item-content\">${dm.content}</div>\r\n        <div class=\"${classPrefix}-contextmenu-danmaku-item-operate\">\r\n          ${operation(dm).map(\r\n            ([label, onClick]) =>\r\n              html`<div\r\n                class=\"${classPrefix}-contextmenu-danmaku-item-operate-btn\"\r\n                @click=${(e: MouseEvent) => {\r\n                  e.stopPropagation();\r\n                  onClick(dm);\r\n                  hide();\r\n                }}\r\n              >\r\n                ${label}\r\n              </div>`\r\n          )}\r\n        </div>\r\n      </li>\r\n    `\r\n  )}\r\n`;\r\n\r\nconst copyClip = (content: string) => navigator.clipboard.writeText(content);\r\n\r\n/** 弹幕菜单\r\n *\r\n * 前置插件: `danmaku` `contextMenu`\r\n */\r\nexport default class DanmakuMenu extends BasePlugin {\r\n  static pluginName = \"danmakuMenu\";\r\n  $el: HTMLElement;\r\n  constructor(player: Player) {\r\n    super(player);\r\n    this.$el = createElement(\"ul\", { class: `${classPrefix}-contextmenu-danmaku mpui-black` });\r\n  }\r\n  init() {\r\n    this.player.on(\"contextMenuShow\", (x, y) => {\r\n      const captured = this.plugins.danmakuEngine?.capture(x, y, 4);\r\n      this.update(captured || []);\r\n    });\r\n  }\r\n  ready() {\r\n    this.plugins.contextMenu?.$list.before(this.$el);\r\n  }\r\n  update(danmaku: DanmakuItem[]) {\r\n    const api = this.plugins.danmaku?.invoke;\r\n    const operate = this.plugins.danmakuOperate;\r\n    if (danmaku?.length) {\r\n      this.$el.style.display = \"\";\r\n    } else {\r\n      this.$el.style.display = \"none\";\r\n    }\r\n    render(\r\n      templateDanmaku(\r\n        danmaku,\r\n        (dm) => {\r\n          const myDanmaku = this.player.userId && dm.user == this.player.userId;\r\n          return [\r\n            [\r\n              \"举报\",\r\n              (dm: DanmakuItem) => {\r\n                operate?.report(dm);\r\n              },\r\n              !myDanmaku && api?.report,\r\n            ],\r\n            [\r\n              \"屏蔽\",\r\n              (dm: DanmakuItem) => {\r\n                operate?.blockUser(dm.user, true);\r\n              },\r\n              !myDanmaku && api?.blockUser,\r\n            ],\r\n            [\r\n              \"撤回\",\r\n              (dm: DanmakuItem) => {\r\n                operate?.recall(dm);\r\n              },\r\n              myDanmaku && api?.recall,\r\n            ],\r\n            [\r\n              \"复制\",\r\n              (dm: DanmakuItem) => {\r\n                copyClip(dm.content);\r\n              },\r\n              true,\r\n            ],\r\n          ].filter((v) => v[2]) as [string, (dm: DanmakuItem) => void, unknown][];\r\n        },\r\n        (dm) => {\r\n          this.player.emit(\"danmaku:select\", dm);\r\n        },\r\n        () => {\r\n          this.plugins.contextMenu?.hide();\r\n        }\r\n      ),\r\n      this.$el\r\n    );\r\n  }\r\n}\r\n","import { PlayerOptions } from \"@/types\";\r\nimport { html, render } from \"lit-html\";\r\nimport { classPrefix } from \"@/config\";\r\nimport { Picker } from \"@/components\";\r\nimport { HexColorToNumber } from \"@/utils\";\r\nimport { ControlsPlugin } from \"@/plugin\";\r\nimport { Player } from \"@core\";\r\n\r\ndeclare global {\r\n  interface Window {\r\n    EyeDropper: {\r\n      new (): {\r\n        open: () => Promise<{ sRGBHex: string }>;\r\n      };\r\n    };\r\n  }\r\n}\r\n\r\nconst template = () => html`\r\n  <div class=\"${classPrefix}-controls-button ${classPrefix}-button-danmakustyle\">\r\n    <div class=\"${classPrefix}-controls-button-icon\">\r\n      <i class=\"mpicon-text\"></i>\r\n    </div>\r\n    <div class=\"${classPrefix}-controls-panel-wrap\">\r\n      <div class=\"${classPrefix}-controls-panel ${classPrefix}-controls-panel-danmaku-style\">\r\n        <div class=\"${classPrefix}-panel-row\">\r\n          <div class=\"${classPrefix}-row-label\">字号</div>\r\n          <div class=\"${classPrefix}-danmaku-style-fontsize-picker\"></div>\r\n        </div>\r\n        <div class=\"${classPrefix}-panel-row\">\r\n          <div class=\"${classPrefix}-row-label\">模式</div>\r\n          <div class=\"${classPrefix}-danmaku-style-mode-picker\"></div>\r\n        </div>\r\n        <div class=\"${classPrefix}-panel-row\">\r\n          <div class=\"${classPrefix}-row-label\">颜色</div>\r\n          <input\r\n            class=\"${classPrefix}-danmaku-style-color-input mpui-input\"\r\n            type=\"text\"\r\n            value=\"#\"\r\n          />\r\n          <div class=\"${classPrefix}-danmaku-style-color-preview\"></div>\r\n          ${window.EyeDropper\r\n            ? html`<button class=\"${classPrefix}-danmaku-style-color-dropper mpui-button\">\r\n                拾取\r\n              </button>`\r\n            : \"\"}\r\n        </div>\r\n        <div class=\"${classPrefix}-danmaku-style-color-picker\"></div>\r\n      </div>\r\n    </div>\r\n  </div>\r\n`;\r\n\r\nexport default class ButtonDanmakuStyle extends ControlsPlugin {\r\n  static pluginName = \"buttonDanmakuStyle\";\r\n\r\n  $icon: HTMLElement;\r\n  $tooltip: HTMLElement;\r\n\r\n  $sizePicker: HTMLElement;\r\n  $modePicker: HTMLElement;\r\n  $colorPicker: HTMLElement;\r\n  $colorInput: HTMLInputElement;\r\n  $colorPreview: HTMLElement;\r\n  $colorDropper: HTMLElement | null;\r\n\r\n  pickerSize!: Picker;\r\n  pickerMode!: Picker;\r\n  pickerColor!: Picker;\r\n\r\n  colorList: number[] = [];\r\n  sizeList: [number, string][] = [];\r\n  modeList: number[] = [];\r\n\r\n  get danmakuBar() {\r\n    return this.player.plugins.danmakuBar;\r\n  }\r\n  constructor(player: Player) {\r\n    const fragment = new DocumentFragment();\r\n    render(template(), fragment);\r\n    super(player, fragment.querySelector(`.${classPrefix}-controls-button`)!);\r\n    this.$icon = this.$(`.${classPrefix}-controls-button-icon`)!;\r\n    this.$tooltip = this.$(\".mpui-tooltip\")!;\r\n\r\n    this.$sizePicker = this.$(`.${classPrefix}-danmaku-style-fontsize-picker`)!;\r\n    this.$modePicker = this.$(`.${classPrefix}-danmaku-style-mode-picker`)!;\r\n    this.$colorPicker = this.$(`.${classPrefix}-danmaku-style-color-picker`)!;\r\n    this.$colorInput = this.$(`.${classPrefix}-danmaku-style-color-input`)!;\r\n    this.$colorPreview = this.$(`.${classPrefix}-danmaku-style-color-preview`)!;\r\n    this.$colorDropper = this.$(`.${classPrefix}-danmaku-style-color-dropper`);\r\n  }\r\n\r\n  apply(player: Player, options: PlayerOptions): void {\r\n    if (options.danmakuStyle) {\r\n      const { sizeList, colorList, modeList, defaultSize, defaultColor, defaultMode } =\r\n        options.danmakuStyle;\r\n      if (sizeList) {\r\n        this.pickerSize.list = sizeList.map(([value, label]) => ({ value, label }));\r\n        this.pickerSize.reload(defaultSize);\r\n      }\r\n      if (colorList) {\r\n        this.pickerSize.list = colorList.map((value) => ({ value }));\r\n        this.pickerSize.reload(defaultColor);\r\n      }\r\n      if (modeList) {\r\n        this.pickerMode.list = [\r\n          { value: 1, label: \"滚动\" },\r\n          { value: 5, label: \"顶部\" },\r\n          { value: 4, label: \"底部\" },\r\n          { value: 6, label: \"逆向\" },\r\n        ].filter((item) => modeList.indexOf(item.value) > -1);\r\n        this.pickerMode.reload(defaultMode);\r\n      }\r\n    }\r\n  }\r\n\r\n  init(player: Player) {\r\n    this.pickerSize = new Picker({\r\n      container: this.$sizePicker,\r\n      value: 25,\r\n      list: defaultSizeList.map(([value, label]) => ({\r\n        value,\r\n        label,\r\n      })),\r\n      onPick: (value) => {\r\n        this.danmakuBar!.danmakuSize = Number(value);\r\n      },\r\n    });\r\n    this.pickerMode = new Picker({\r\n      container: this.$modePicker,\r\n      value: 1,\r\n      list: [\r\n        { value: 1, label: \"滚动\" },\r\n        { value: 5, label: \"顶部\" },\r\n        { value: 4, label: \"底部\" },\r\n        { value: 6, label: \"逆向\" },\r\n      ].filter((item) => defaultModeList.indexOf(item.value) > -1),\r\n      onChange: (value) => {\r\n        this.danmakuBar!.danmakuMode = Number(value) || 1;\r\n      },\r\n    });\r\n    this.pickerColor = new Picker({\r\n      container: this.$colorPicker,\r\n      value: \"#FFFFFF\",\r\n      list: defaultColorList.map((item) => ({ value: item })),\r\n      onPick: (value) => {\r\n        this.danmakuBar!.danmakuColor = HexColorToNumber(value as string);\r\n      },\r\n      onChange: (value) => {\r\n        this.$colorInput.value = value as string;\r\n        this.$colorPreview.style.backgroundColor = value as string;\r\n      },\r\n      template: (item) => html` <div style=\"background-color: ${item.value}\"></div> `,\r\n      condition: (item, value) => {\r\n        return item.toLowerCase() == (value as string).toLowerCase();\r\n      },\r\n    });\r\n    this.$colorInput.addEventListener(\"input\", () => {\r\n      const value = this.$colorInput.value;\r\n      this.$colorInput.value = \"#\" + value.replace(/[^0-9A-Fa-f]/g, \"\").slice(0, 6);\r\n      if (/^#([0-9A-Fa-f]{6}|[0-9A-Fa-f]{3})$/.test(value)) {\r\n        this.pickerColor.pick(value);\r\n      }\r\n    });\r\n    if (this.$colorDropper) {\r\n      this.$colorDropper.onclick = () => {\r\n        if (window.EyeDropper) {\r\n          const dropper = new window.EyeDropper();\r\n          dropper.open().then(({ sRGBHex }) => {\r\n            this.pickerColor.pick(sRGBHex);\r\n          });\r\n        }\r\n      };\r\n    }\r\n  }\r\n}\r\n\r\nconst defaultSizeList: [number, string][] = [\r\n  [18, \"小\"],\r\n  [25, \"中\"],\r\n  [36, \"大\"],\r\n];\r\n\r\nconst defaultModeList = [1, 5, 4];\r\n\r\nconst defaultColorList = [\r\n  \"#FE0302\",\r\n  \"#FFFF00\",\r\n  \"#00CD00\",\r\n  \"#00FF00\",\r\n  \"#4E6EF2\",\r\n  \"#89D5FF\",\r\n  \"#7B7FF7\",\r\n  \"#757575\",\r\n  \"#FFFFFF\",\r\n  \"#FB7229\",\r\n];\r\n","import { PlayerOptions } from \"@/types\";\r\nimport Danmaku from \"../danmaku/danmaku\";\r\nimport DanmakuEngine from \"../danmaku/danmakuEngine\";\r\nimport DanmakuLoader from \"../danmaku/danmakuLoader\";\r\nimport DanmakuOperate from \"../danmaku/danmakuOperate\";\r\nimport ButtonDanmakuToggle from \"../danmaku/controls/ButtonDanmakuToggle\";\r\nimport DanmakuBar from \"../danmaku/danmakuBar\";\r\nimport ButtonDanmakuSettings from \"../danmaku/controls/ButtonDanmakuSettings\";\r\nimport DanmakuMenu from \"../danmaku/danmakuMenu\";\r\nimport ButtonDanmakuStyle from \"../danmaku/controls/ButtonDanmakuStyle\";\r\n\r\nconst danmakuPlugins = [\r\n  Danmaku,\r\n  DanmakuEngine,\r\n  DanmakuLoader,\r\n  DanmakuOperate,\r\n  DanmakuBar,\r\n  DanmakuMenu,\r\n];\r\nconst danmakuControls = [ButtonDanmakuToggle, ButtonDanmakuSettings, ButtonDanmakuStyle];\r\n\r\nexport const presetDanmaku = [...danmakuPlugins, ...danmakuControls];\r\n","import { BasePlugin } from \"@/plugin\";\nimport { QualityItem } from \"@plugins/quality\";\n\ndeclare module \"@core\" {\n  interface VideoInfo {\n    qualities?: QualityItem[];\n  }\n}\n/** 将视频质量列表作为视频参数传入 */\nexport default class Qualities extends BasePlugin {\n  /** 比较函数，若设置则根据该函数对清晰度列表排序 */\n  compare?: (a: QualityItem, b: QualityItem) => number;\n  /** 优先选择函数，默认情况下选择列表第一个值 */\n  prior?: (list: QualityItem[]) => QualityItem;\n  init() {\n    this.player.on(\"videoChange\", (info) => {\n      if (info.qualities) {\n        this.compare && info.qualities.sort((a, b) => this.compare!(a, b));\n        this.player.quality?.updateList(info.qualities);\n      }\n    });\n    this.player.hook.register(\"video.beforeLoad\", (info) => {\n      const list = this.player.getVideoInfo().qualities;\n      let quality: QualityItem = {};\n      if (!info.url && list) {\n        quality = this.prior ? this.prior(list) : list[0];\n        info.url = quality.url;\n        info.type = quality.type;\n      }\n      this.player.quality?.updateCurrent(quality);\n    });\n  }\n}\n","import { Player } from \"@/player\";\r\nimport { BasePlugin } from \"@/plugin\";\r\nimport { LoadInfo, MediaController, PlayerOptions } from \"@/types\";\r\nimport type Hls from \"hls.js\";\r\n\r\ndeclare module \"@core\" {\r\n  interface PlayerExternals {\r\n    hlsjs: () => Promise<typeof Hls>;\r\n  }\r\n}\r\ndeclare global {\r\n  interface Window {\r\n    Hls?: typeof Hls;\r\n  }\r\n}\r\n\r\nexport interface HlsMediaController extends MediaController {\r\n  kernel: Hls | null;\r\n}\r\n\r\nexport default class HlsLoader extends BasePlugin {\r\n  static pluginName = \"hlsLoader\";\r\n  private Hls?: typeof Hls;\r\n  private _getHlsjs?: () => Promise<typeof Hls>;\r\n  private _supported?: boolean;\r\n  constructor(player: Player) {\r\n    super(player);\r\n  }\r\n  apply(player: Player, options: PlayerOptions): void {\r\n    this._getHlsjs = options.externals?.hlsjs;\r\n    this.player.loader.register(\"hls\", this);\r\n  }\r\n  check(info: LoadInfo) {\r\n    return info.type == \"hls\" || info.type == \"m3u8\";\r\n  }\r\n  create(info: LoadInfo, video: HTMLVideoElement): HlsMediaController {\r\n    const { type, url, live, play, time } = info;\r\n    const controller: HlsMediaController = {\r\n      kernel: null,\r\n      type: type || \"\",\r\n      url: url,\r\n      live: live || false,\r\n      mediaElement: video,\r\n      destroy() {\r\n        this.kernel?.destroy();\r\n        this.kernel = null;\r\n      },\r\n    };\r\n    this.initHls().then(() => {\r\n      const hlsPlayer = new this.Hls!();\r\n      controller.kernel = hlsPlayer;\r\n      const t = time === true ? this.player.currentTime : time;\r\n      hlsPlayer.attachMedia(video);\r\n      hlsPlayer.on(this.Hls!.Events.MEDIA_ATTACHED, () => {\r\n        hlsPlayer.loadSource(url);\r\n      });\r\n      this.player.once(\"loadedmetadata\", () => {\r\n        if (t) {\r\n          this.player.seek(t);\r\n        }\r\n        if (play) {\r\n          this.player.play();\r\n        }\r\n      });\r\n      return true;\r\n    });\r\n    return controller;\r\n  }\r\n\r\n  /** 初始化hls.js */\r\n  async initHls() {\r\n    if (this._supported == true) {\r\n      return;\r\n    } else if (this._supported == false) {\r\n      throw new Error(\"播放器不支持hls加载\");\r\n    } else {\r\n      this.Hls ??= window.Hls;\r\n      if (!this.Hls) {\r\n        if (!this._getHlsjs) {\r\n          this.throw(new Error(\"hls.js初始化失败: 播放器未引入hls.js\"));\r\n        } else {\r\n          this.Hls =\r\n            (await this._getHlsjs().catch((e) => {\r\n              this.throw(new Error(`hls.js初始化失败: ${e}`));\r\n            })) || void 0;\r\n          this._supported = this.Hls?.isSupported() || false;\r\n          if (this._supported == false) throw new Error(\"播放器不支持hls加载\");\r\n        }\r\n      }\r\n    }\r\n  }\r\n}\r\n","/* eslint-disable new-cap */\r\nimport { Player } from \"@/player\";\r\nimport { BasePlugin } from \"@/plugin\";\r\nimport { LoadInfo, MediaController, MediaLoader, PlayerOptions } from \"@/types\";\r\nimport type dashjs from \"dashjs\";\r\n\r\ndeclare module \"@core\" {\r\n  interface PlayerExternals {\r\n    dashjs: () => Promise<typeof dashjs>;\r\n  }\r\n}\r\ndeclare global {\r\n  interface Window {\r\n    dashjs?: typeof dashjs;\r\n  }\r\n}\r\n\r\nexport interface DashMediaController extends MediaController {\r\n  kernel: dashjs.MediaPlayerClass | null;\r\n}\r\n\r\nexport default class DashLoader extends BasePlugin implements MediaLoader {\r\n  static pluginName = \"dashLoader\";\r\n  private dashjs?: typeof dashjs;\r\n  private _getDashjs?: () => Promise<typeof dashjs>;\r\n  private _supported?: boolean;\r\n  constructor(player: Player) {\r\n    super(player);\r\n  }\r\n  apply(player: Player, options: PlayerOptions): void {\r\n    this._getDashjs = options.externals?.dashjs;\r\n    this.player.loader.register(\"dash\", this);\r\n  }\r\n  check(info: LoadInfo) {\r\n    return info.type == \"dash\" || info.type == \"m3u8\";\r\n  }\r\n  create(info: LoadInfo, video: HTMLVideoElement): DashMediaController {\r\n    const { type, url, live, play, time } = info;\r\n    const controller: DashMediaController = {\r\n      kernel: null,\r\n      type: type || \"\",\r\n      url: url,\r\n      live: live || false,\r\n      mediaElement: video,\r\n      destroy() {\r\n        this.kernel?.destroy();\r\n        this.kernel = null;\r\n      },\r\n    };\r\n    this.initDash().then(() => {\r\n      const dashPlayer = this.dashjs!.MediaPlayer().create();\r\n      controller.kernel = dashPlayer;\r\n      const t = time === true ? this.player.currentTime : time === false ? 0 : time;\r\n      dashPlayer.initialize(video, url, play, t);\r\n    });\r\n    return controller;\r\n  }\r\n\r\n  /** 初始化dash.js */\r\n  async initDash() {\r\n    if (this._supported == true) {\r\n      return;\r\n    } else if (this._supported == false) {\r\n      throw new Error(\"播放器不支持dash加载\");\r\n    } else {\r\n      this.dashjs ??= window.dashjs;\r\n      if (!this.dashjs) {\r\n        if (!this._getDashjs) {\r\n          throw new Error(\"dash.js初始化失败: 播放器未引入dash.js\");\r\n        } else {\r\n          this.dashjs =\r\n            (await this._getDashjs().catch((e) => {\r\n              throw new Error(`dash.js初始化失败: ${e}`);\r\n            })) || undefined;\r\n          this._supported = this.dashjs?.supportsMediaSource() || false;\r\n          if (this._supported == false) throw new Error(\"播放器不支持dash加载\");\r\n        }\r\n      }\r\n    }\r\n  }\r\n}\r\n","import { Player } from \"@/player\";\r\nimport { BasePlugin } from \"@/plugin\";\r\nimport { LoadInfo, MediaController, MediaLoader, PlayerOptions } from \"@/types\";\r\nimport type FlvJs from \"flv.js\";\r\n\r\ndeclare module \"@core\" {\r\n  interface PlayerExternals {\r\n    flvjs: () => Promise<typeof FlvJs>;\r\n  }\r\n}\r\ndeclare global {\r\n  interface Window {\r\n    flvjs?: typeof FlvJs;\r\n  }\r\n}\r\n\r\nexport interface FlvMediaController extends MediaController {\r\n  kernel: FlvJs.Player | null;\r\n}\r\n\r\nexport default class FlvLoader extends BasePlugin implements MediaLoader {\r\n  static pluginName = \"flvLoader\";\r\n  private flvjs?: typeof FlvJs;\r\n  private _getFlvjs?: () => Promise<typeof FlvJs>;\r\n  private _supported?: boolean;\r\n  constructor(player: Player) {\r\n    super(player);\r\n  }\r\n  apply(player: Player, options: PlayerOptions): void {\r\n    this._getFlvjs = options.externals?.flvjs;\r\n    this.player.loader.register(\"flv\", this);\r\n  }\r\n  check(info: LoadInfo) {\r\n    return info.type == \"flv\";\r\n  }\r\n  create(info: LoadInfo, video: HTMLVideoElement): FlvMediaController {\r\n    const { type, url, live, play, time } = info;\r\n    const controller: FlvMediaController = {\r\n      kernel: null,\r\n      type: type || \"\",\r\n      url: url,\r\n      live: live || false,\r\n      mediaElement: video,\r\n      destroy() {\r\n        this.kernel?.destroy();\r\n        this.kernel = null;\r\n      },\r\n    };\r\n    this.initFlv().then(() => {\r\n      const flvPlayer = this.flvjs!.createPlayer({\r\n        type: type || \"flv\",\r\n        url: url,\r\n        cors: true,\r\n        isLive: live,\r\n      });\r\n      controller.kernel = flvPlayer;\r\n      const t = time === true ? this.player.currentTime : time === false ? 0 : time;\r\n      flvPlayer.attachMediaElement(video);\r\n      flvPlayer.load();\r\n      t && (flvPlayer.currentTime = t);\r\n      play && flvPlayer.play();\r\n    });\r\n    return controller;\r\n  }\r\n  /** 初始化flvjs */\r\n  async initFlv() {\r\n    if (this._supported == true) {\r\n      return;\r\n    } else if (this._supported == false) {\r\n      throw new Error(\"播放器不支持flv加载\");\r\n    } else {\r\n      this.flvjs ??= window.flvjs;\r\n      if (!this.flvjs) {\r\n        if (!this._getFlvjs) {\r\n          throw new Error(\"flv.js初始化失败: 播放器未引入flv.js\");\r\n        } else {\r\n          this.flvjs =\r\n            (await this._getFlvjs().catch((e) => {\r\n              throw new Error(`flv.js初始化失败: ${e}`);\r\n            })) || void 0;\r\n          this._supported = this.flvjs?.isSupported() || false;\r\n          if (this._supported == false) throw new Error(\"播放器不支持flv加载\");\r\n        }\r\n      }\r\n    }\r\n  }\r\n}\r\n","import { Checkbox } from \"@/components\";\r\nimport { Player } from \"@/player\";\r\nimport { PlayerOptions } from \"@/types\";\r\nimport { BasePlugin } from \"@/plugin\";\r\nimport { ResizeObserver as ResizeObserverPonyfill } from \"@juggle/resize-observer\";\r\n\r\ndeclare module \"@core\" {\r\n  interface Player {\r\n    aspectRatio?: string;\r\n    setAspectRatio?: (value: string) => void;\r\n  }\r\n  interface PlayerEventMap {\r\n    /** 视频比例 */\r\n    aspectRatioChange: (value: string) => void;\r\n  }\r\n  interface PlayerOptions {\r\n    /** 视频比例 */\r\n    aspectRatio?: string;\r\n  }\r\n}\r\n\r\n/** 视频比例 */\r\n\r\nexport default class AspectRatio extends BasePlugin {\r\n  static pluginName = \"aspectRatio\";\r\n  #ratio: [number, number] | null = null;\r\n  private readonly observer?: ResizeObserver;\r\n  constructor(player: Player) {\r\n    super(player);\r\n\r\n    // --- 初始化observer --- //\r\n    const Observer = window.ResizeObserver || ResizeObserverPonyfill;\r\n    if (Observer) {\r\n      this.observer = new Observer(([item]) => {\r\n        const { width, height } = item.contentRect;\r\n        this._keepRatio(width, height);\r\n      });\r\n    }\r\n  }\r\n  apply(player: Player, options: PlayerOptions): void {\r\n    this.#ratio = this._parse(options.aspectRatio || \"\");\r\n  }\r\n  init() {\r\n    this.player.define(\"aspectRatio\", { get: () => this._stringify(this.#ratio) });\r\n    this.player.define(\"setAspectRatio\", (value: string) => {\r\n      this.set(value);\r\n    });\r\n  }\r\n  mounted(): void {\r\n    console.log(\"233333311111111\");\r\n    this.observer?.observe(this.player.$area);\r\n    this._setRatio(this.#ratio);\r\n  }\r\n  set(value: string) {\r\n    const ratio = this._parse(value);\r\n    this.#ratio = ratio;\r\n    this._setRatio(ratio);\r\n    this.player.emit(\"aspectRatioChange\", this._stringify(ratio));\r\n  }\r\n  /** 设置视频比例 */\r\n  private _setRatio(ratio: [number, number] | null) {\r\n    const video = this.player.$video;\r\n    video.style.width = \"\";\r\n    video.style.height = \"\";\r\n    if (ratio) {\r\n      const [ratioW, ratioH] = ratio;\r\n      video.style.aspectRatio = `${ratioW}/${ratioH}`;\r\n      video.style.objectFit = \"fill\";\r\n      const { width, height } = video.getBoundingClientRect();\r\n      const { width: cWidth, height: cHeight } = this.player.$area.getBoundingClientRect();\r\n      if (width == cWidth && height == cHeight) {\r\n        this._rescale(width, height, ratioW, ratioH);\r\n      }\r\n    } else {\r\n      video.style.aspectRatio = \"\";\r\n      video.style.objectFit = \"\";\r\n    }\r\n  }\r\n  /** 保持视频比例 */\r\n  private _keepRatio(cWidth: number, cHeight: number) {\r\n    if (this.#ratio) {\r\n      const video = this.player.$video;\r\n      video.style.width = \"\";\r\n      video.style.height = \"\";\r\n      const [ratioW, ratioH] = this.#ratio;\r\n      const { width, height } = video.getBoundingClientRect();\r\n      console.log(`${width} x ${height} -- ${cWidth} x ${cHeight}`);\r\n      if (Math.abs(width - cWidth) < 1 && Math.abs(height - cHeight) < 1) {\r\n        // 该情况表示播放器大小可能已被固定，需要重新计算宽高\r\n        this._rescale(cWidth, cHeight, ratioW, ratioH);\r\n      }\r\n    }\r\n  }\r\n  /** 根据当前视频宽高重新维持视频比例 */\r\n  private _rescale(width: number, height: number, ratioW: number, ratioH: number) {\r\n    const rwxh = ratioW * height;\r\n    const rhxw = ratioH * width;\r\n    const video = this.player.$video;\r\n    if (rwxh < rhxw) {\r\n      video.style.width = `${(rwxh / rhxw) * 100}%`;\r\n      video.style.height = \"100%\";\r\n    } else {\r\n      video.style.width = \"100%\";\r\n      video.style.height = `${(rhxw / rwxh) * 100}%`;\r\n    }\r\n  }\r\n  private _parse(value: string): [number, number] | null {\r\n    const [x, y] = value.split(\"/\").map((n) => parseFloat(n));\r\n    return x && y && isFinite(x) && isFinite(y) ? [x, y] : null;\r\n  }\r\n  private _stringify(ratio: [number, number] | null) {\r\n    return ratio ? ratio.join(\"/\") : \"\";\r\n  }\r\n}\r\n","import { classPrefix } from \"@/config\";\nimport { Player } from \"@/player\";\n\nimport { ControlsItem, PluginFrom, UIPlugin } from \"@/plugin\";\nimport { createElement } from \"@/utils\";\nimport { PlayerOptions } from \"@core\";\n\nconst templateHTML = /*html*/ `\n    <div class=\"${classPrefix}-footbar-left\"></div>\n    <div class=\"${classPrefix}-footbar-right\"></div>\n`;\n\ndeclare module \"@core\" {\n  interface PlayerPlugins {\n    footbar?: Footbar;\n  }\n  interface PlayerOptions {\n    /** 弹幕栏设置 */\n    footbar?: {\n      controls?: FootbarControls;\n    };\n  }\n}\n\nexport interface FootbarControls {\n  left?: PluginFrom<ControlsItem>[];\n  right?: PluginFrom<ControlsItem>[];\n}\n\n/** 底栏 */\nexport default class Footbar extends UIPlugin {\n  static pluginName = \"footbar\";\n  $left: HTMLElement;\n  $right: HTMLElement;\n\n  controls: FootbarControls = {};\n\n  constructor(player: Player) {\n    super(player, createElement(\"div\", { class: `${classPrefix}-footbar` }, templateHTML));\n    this.$left = this.$(`.${classPrefix}-footbar-left`)!;\n    this.$right = this.$(`.${classPrefix}-footbar-right`)!;\n  }\n  apply(player: Player, options: PlayerOptions) {\n    this.controls = options.footbar?.controls || {};\n    this.player.$el.append(this.$el);\n  }\n  ready() {\n    this.setControls(this.controls);\n  }\n  /** 更新控制组件 */\n  setControls(controls: FootbarControls) {\n    this.controls = controls;\n    const { left, right } = controls;\n    this.build(this.$left, left);\n    this.build(this.$right, right);\n  }\n  protected build(container: HTMLElement, list?: PluginFrom<ControlsItem>[]) {\n    container.innerHTML = \"\";\n    const fragment = new DocumentFragment();\n    list?.forEach((item) => {\n      const el = this.player.plugin.from(item)?.$el;\n      if (el) fragment.appendChild(el);\n    });\n    container.appendChild(fragment);\n  }\n}\n","import { Player as CorePlayer } from \"./core-player\";\nimport { PlayerOptions } from \"@/types\";\nimport DanmakuList from \"../mfuns-plugin/danmakuList\";\nimport BlackBorder from \"@plugins/enhance/video/blackBorder\";\nimport Widescreen from \"@plugins/screen/widescreen\";\nimport { ButtonWebscreen, ButtonWidescreen } from \"@plugins/controls\";\nimport About from \"@plugins/panels/about\";\nimport Hotkeys from \"@plugins/panels/hotkeyInfo\";\nimport { presetBasic } from \"@plugins/presets/basic\";\nimport AutoPart from \"@plugins/enhance/playback/autoPart\";\nimport AutoPlay from \"@plugins/enhance/playback/autoPlay\";\nimport AutoSeek from \"@plugins/enhance/playback/autoSeek\";\nimport Theme from \"@plugins/theme\";\nimport Part from \"@plugins/videoOptions/part\";\nimport Seamless from \"@plugins/patch/seamless\";\nimport PartList from \"@plugins/panels/partList\";\nimport ButtonDanmakulist from \"@plugins/controls/button/ButtonDanmakulist\";\nimport Quality from \"@plugins/quality\";\nimport ButtonQuality from \"@plugins/controls/button/ButtonQuality\";\nimport VideoStatus from \"@plugins/enhance/ui/videoStatus\";\nimport LoadingMask from \"@plugins/enhance/ui/loadingMask\";\nimport VideoTitle from \"@plugins/controls/videoTitle\";\nimport Header from \"@plugins/ui/header\";\nimport Mini from \"@plugins/enhance/ui/mini\";\nimport LightOff from \"@plugins/enhance/ui/lightOff\";\nimport Webscreen from \"@plugins/screen/webscreen\";\nimport { presetDanmaku } from \"@plugins/presets/danmaku\";\nimport VideoQuality from \"@plugins/videoOptions/qualities\";\nimport HlsLoader from \"@plugins/videoLoader/hlsLoader\";\nimport DashLoader from \"@plugins/videoLoader/dashLoader\";\nimport FlvLoader from \"@plugins/videoLoader/flvLoader\";\nimport AspectRatio from \"@plugins/enhance/video/aspectRatio\";\nimport Footbar from \"@plugins/ui/footbar\";\n\n/** 内置插件 */\nconst plugins = [\n  Quality,\n  VideoQuality,\n  Header,\n  Part,\n  Seamless,\n  DanmakuList,\n  BlackBorder,\n  AspectRatio,\n  Webscreen,\n  Widescreen,\n  AutoPlay,\n  AutoPart,\n  AutoSeek,\n  Theme,\n  VideoStatus,\n  LoadingMask,\n  Mini,\n  LightOff,\n  Footbar,\n];\n\nconst panels = [About, Hotkeys, PartList];\n\nconst controls = [ButtonWebscreen, ButtonWidescreen, ButtonDanmakulist, ButtonQuality, VideoTitle];\n\nconst loaders = [FlvLoader, HlsLoader, DashLoader];\n\n/** MfunsPlayer 播放页版播放器\n *\n * 插件功能：快捷键、右键菜单、弹幕栏、弹幕列表、视频黑边、宽屏模式、关灯模式\n */\nexport class Player extends CorePlayer {\n  constructor(options: PlayerOptions) {\n    super({\n      autoPart: true,\n      controller: {\n        controls: {\n          top: [\"progress\"],\n          center: [],\n          left: [\"buttonPrev\", \"buttonPlay\", \"buttonNext\", \"videoTime\", \"buttonLoop\"],\n          right: [\n            \"buttonQuality\",\n            \"buttonPart\",\n            \"buttonVolume\",\n            \"buttonSettings\",\n            \"buttonPip\",\n            \"buttonWidescreen\",\n            \"buttonWebscreen\",\n            \"buttonFullscreen\",\n          ],\n        },\n      },\n      danmakuBar: {\n        controls: {\n          outer: [\"buttonDanmakuToggle\", \"buttonDanmakuSettings\"],\n          left: [\"buttonDanmakuStyle\"],\n        },\n      },\n      footbar: {\n        controls: {\n          right: [\"danmakuBar\"],\n        },\n      },\n      ...options,\n      plugins: [\n        ...presetBasic,\n        ...presetDanmaku,\n        ...plugins,\n        ...panels,\n        ...controls,\n        ...loaders,\n        ...(options.plugins || []),\n      ],\n    });\n  }\n}\n\nexport * from \"@/plugin\";\nexport * from \"@/config\";\nexport * as Utils from \"@/utils\";\nexport * as Components from \"@/components\";\n"],"names":["isMobile","fullScreenEnabled","pictureInPictureEnabled","createElement","tagName","attributes","children","el","name","replaceChildren","element","debounce","fn","delay","immediate","timer","isInvoke","args","throttle","wait","random","lower","upper","clamp","number","timeToSecond","time","arr","sec","min","hour","day","secondToTime","second","level","join","num","minute","HexColorToNumber","color","numberToHexColor","dateFormatMap","d","dateFormat","date","format","match","_a","classPrefix","version","gitHash","repositoryLink","developers","videoEventMap","v","VideoController","player","options","res","info","play","_b","url","type","live","loadInfo","video","eventName","values","_c","PluginManager","pluginItem","plugin","_d","item","HookManager","func","before","hook","index","ctx","defaultFunc","f","LoaderManager","loader","controller","t","EventEmitter","listener","i","Player$1","volume","flag","value","err","BasePlugin","UIPlugin","selectors","MountablePlugin","__privateAdd","_onUnmount","opt","__privateSet","__privateGet","ControlsPlugin","PanelPlugin","_onToggle","MenuPlugin","s","e","o","n","l","h","r","u","c","a","_","m","p","g","$","y","w","x","T","A","E","C","P","V","N","H","L","z","k","S","M","R","Z","I","B","D","template","divider","html","Slider","container","max","step","onChange","onDragStart","onDragEnd","onDrag","render","event","clientX","trackLength","nMax","thumbTrackX","nLeft","nLength","mousemoveEvent","removeEvent","per","templateHTML","SliderVertical","clientY","thumbTrackY","nTop","templateWrap","list","Picker","onPick","condition","MultiPicker","onToggle","b","label","Switch","Checkbox","Player","VirtualList","getData","itemHeight","createItem","overflow","clientH","scrollTop","oldRenderStart","oldRenderEnd","beforeItems","addFrom","addTo","removeFrom","removeTo","child","afterItems","top","clearSelect","getDanmakuListItem","danmaku","operation","onClick","onDblclick","selected","focused","title","fragment","_DanmakuList","dm","pos","api","operate","myDanmaku","unFreeze","dan","sortedBy","sortOrder","at","bt","status","viewEnd","selectedIndex","focusedIndex","focusedItem","shift","ctrl","from","to","DanmakuList","_BlackBorder","val","BlackBorder","_Widescreen","Widescreen","_ButtonPlay","ButtonPlay","_ButtonPrev","hasNext","hasPrev","ButtonPrev","_ButtonNext","ButtonNext","_VideoTime","inputVal","VideoTime","_ButtonLoop","ButtonLoop","_ButtonPart","ButtonPart","_ButtonVolume","muted","ButtonVolume","_ButtonSettings","controls","ButtonSettings","_ButtonPip","ButtonPip","_ButtonWidescreen","ButtonWidescreen","_ButtonWebscreen","ButtonWebscreen","_ButtonFullscreen","ButtonFullscreen","link","_about","about","key","description","_HotkeyInfo","hotkeyInfoList","HotkeyInfo","_ContextMenu","content","clientRect","ContextMenu","_Controller","left","center","right","Controller","keyCode","_Hotkey","tag","editable","Hotkey","_Modal","_initPanels","panel","Modal","_Progress","dragMoveEvent","dragEndEvent","buffered","Progress","_Settings","rate","ratio","Settings","_Side","Side","_Pip","Pip","_Fullscreen","fullScreenChangeHandler","doc","Fullscreen","_User","_userId","_authorId","author","userId","User","_StateActive","_status","_mousemove","debounceRemoveActive","StateActive","_StateFocus","StateFocus","resizeObservers","hasActiveObservations","ro","hasSkippedObservations","msg","deliverResizeLoopError","ResizeObserverBoxOptions","freeze","obj","ResizeObserverSize","inlineSize","blockSize","DOMRectReadOnly","width","height","bottom","rectangle","isSVG","target","isHidden","offsetWidth","offsetHeight","isElement","scope","isReplacedElement","global","cache","scrollRegexp","verticalRegexp","IE","parseDimension","pixel","size","switchSizes","zeroBoxes","calculateBoxSizes","forceRecalculation","cs","svg","removePadding","canScrollVertically","canScrollHorizontally","paddingTop","paddingRight","paddingBottom","paddingLeft","borderTop","borderRight","borderBottom","borderLeft","horizontalPadding","verticalPadding","horizontalBorderArea","verticalBorderArea","horizontalScrollbarThickness","verticalScrollbarThickness","widthReduction","heightReduction","contentWidth","contentHeight","borderBoxWidth","borderBoxHeight","boxes","calculateBoxSize","observedBox","borderBoxSize","contentBoxSize","devicePixelContentBoxSize","ResizeObserverEntry","calculateDepthForNode","node","depth","parent","broadcastActiveObservations","shallowestDepth","callbacks","entries","ot","entry","targetDepth","_i","callbacks_1","callback","gatherActiveObservationsAtDepth","process","trigger","notify","cb","queueMicroTask","toggle_1","el_1","config","queueResizeObserver","watching","isWatching","CATCH_PERIOD","observerConfig","events","timeout","scheduled","Scheduler","_this","until","elementsHaveResized","scheduler","updateCount","skipNotifyOnElement","ResizeObservation","ResizeObserverDetail","resizeObserver","observerMap","getObservationIndex","observationTargets","ResizeObserverController","detail","firstObservation","lastObservation","ResizeObserver","_StateResize","Observer","ResizeObserverPonyfill","StateResize","_StateIntersecting","isIntersecting","StateIntersecting","Toast","duration","close","button","closeHandler","corePlugins","basicPlugins","basicControls","LabelTime","presetBasic","_AutoPart","part","AutoPart","_AutoPlay","AutoPlay","_AutoSeek","AutoSeek","themeOptionsVars","_Theme","theme","scheme","Theme","_Part","Part","_Seamless","oldVideo","Seamless","templateList","setPart","_PartList","PartList","_ButtonDanmakulist","ButtonDanmakulist","_Quality","quality","result","Quality","_ButtonQuality","ButtonQuality","_VideoStatus","VideoStatus","_LoadingMask","line","handler","id","LoadingMask","_VideoTitle","VideoTitle","_Header","Header","_Mini","_shown","_dragging","_enabled","disabled","offsetLeft","offsetTop","mLeft","mTop","mousemoveHandler","mouseupHandler","Mini","_LightOff","LightOff","_Webscreen","Webscreen","_Danmaku","Danmaku","DanmakuMode","MeonDanmakuEngine","displayed","contentIndex","items","keyword","user","containerWidth","containerHeight","itemY","danItemRight","containerRight","elRight","danItemLeft","containerLeft","getSpeed","getDOMTrack","getTrack","ele","forTrack","DOMTrack","track","enterTime","danRight","danLeft","docFragment","itemWidth","trackType","trackIndex","maxTop","prev","cur","speed","distance","topArr","topDan","bottomArr","bottomDan","text","font","range","single","elRect","containerRect","edgeLeft","edgeRight","edgeTop","edgeBottom","resultDOM","_DanmakuEngine","scale","bold","opacity","DanmakuEngine","count","ar","randomId","hs","al","_DanmakuLoader","defaultParsers","response","raw","parser","data","source","DanmakuLoader","xmlDoc","nodeList","generate","currentNode","_DanmakuOperate","DanmakuOperate","_ButtonDanmakuToggle","ButtonDanmakuToggle","_DanmakuBar","defaultPlaceholder","outer","placeholder","DanmakuBar","_ButtonDanmakuSettings","area","ButtonDanmakuSettings","templateDanmaku","hide","copyClip","_DanmakuMenu","captured","DanmakuMenu","_ButtonDanmakuStyle","sizeList","colorList","modeList","defaultSize","defaultColor","defaultMode","defaultSizeList","defaultModeList","defaultColorList","sRGBHex","ButtonDanmakuStyle","danmakuPlugins","danmakuControls","presetDanmaku","Qualities","_HlsLoader","hlsPlayer","HlsLoader","_DashLoader","dashPlayer","DashLoader","_FlvLoader","flvPlayer","FlvLoader","_AspectRatio","_ratio","ratioW","ratioH","cWidth","cHeight","rwxh","rhxw","AspectRatio","_Footbar","Footbar","plugins","VideoQuality","panels","About","Hotkeys","loaders","CorePlayer"],"mappings":"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","x_google_ignoreList":[9,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70]}