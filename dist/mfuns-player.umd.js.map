{"version":3,"file":"mfuns-player.umd.js","sources":["../src/js/plugin/PluginManager.ts","../node_modules/lit-html/lit-html.js","../src/js/const.ts","../src/js/utils/index.ts","../src/js/ui/Controller/ProgressBar.ts","../src/js/ui/Controller/button/ButtonFullscreen.ts","../src/js/ui/Controller/button/ButtonPip.ts","../src/js/ui/Controller/button/ButtonPlay.ts","../src/js/ui/Controller/label/LabelTime.ts","../src/js/ui/Controller/button/ButtonLoop.ts","../src/js/ui/components/Slider.ts","../src/js/ui/components/SliderVertical.ts","../src/js/ui/components/Picker.ts","../src/js/ui/components/MultiPicker.ts","../src/js/ui/components/Checkbox.ts","../src/js/ui/Controller/button/ButtonVolume.ts","../src/js/ui/Controller/button/ButtonSettings.ts","../src/js/ui/Controller/button/ButtonPart.ts","../src/js/ui/Controller/button/ButtonWebfull.ts","../src/js/ui/Controller/button/ButtonPrev.ts","../src/js/ui/Controller/button/ButtonNext.ts","../src/js/utils/KeyCode.enum.ts","../src/js/ui/Controller/button/ButtonDanmakuSwitch.ts","../src/js/ui/Controller/button/ButtonDanmakuSettings.ts","../src/js/ui/Controller/button/ButtonDanmakuStyle.ts","../src/js/ui/Controller/DanmakuBar.ts","../src/js/ui/Controller/index.ts","../src/js/Events/index.ts","../src/js/ui/Template.ts","../src/js/Video/Loader.ts","../src/js/Video/index.ts","../src/js/Mode/ModeFullscreen.ts","../src/js/Mode/ModePip.ts","../src/js/Mode/ModeWebfull.ts","../src/js/Mode/index.ts","../src/js/ui/HotKey/index.ts","../src/js/ui/Side/SidePartList.ts","../src/js/ui/Side/index.ts","../src/js/ui/ContextMenu.ts","../src/js/ui/Modal/ModalAbout.ts","../src/js/ui/Modal/ModalHotkey.ts","../src/js/ui/Modal/index.ts","../src/js/ui/Theme.ts","../src/js/ui/State/index.ts","../src/js/enum.ts","../src/js/Danmaku/DanmakuEngine.ts","../src/js/utils/randomId.ts","../src/js/Danmaku/DanmakuParser.ts","../src/js/Danmaku/DanmakuOperate.ts","../src/js/Danmaku/index.ts","../src/js/player.ts","../src/js/index.ts"],"sourcesContent":["import MfunsPlayer from \"@/player\"\nimport { PlayerOptions, PlayerPlugin } from \"@/types\"\n\nexport class PluginManager {\n  player: MfunsPlayer\n  list: PlayerPlugin[] = []\n  constructor(player: MfunsPlayer, list?: PlayerPlugin[]) {\n    this.player = player\n    const names: string[] = []\n    list?.forEach((plugin) => {\n      if (names.indexOf(plugin.id) > -1) {\n        return\n      } else {\n        names.push(plugin.id)\n        this.list.push(plugin)\n      }\n    })\n  }\n  /** 创建所有插件 */\n  pluginCreate(options: PlayerOptions<PlayerPlugin>) {\n    this.list.forEach((plugin) => {\n      this.player.plugin[plugin.id] = plugin.create?.(this.player, options) || {}\n    })\n  }\n  /** 初始化所有插件 */\n  pluginInit(options: PlayerOptions<PlayerPlugin>) {\n    this.list.forEach((plugin) => {\n      plugin.init?.(this.player, options)\n    })\n  }\n  /** 销毁所有插件 */\n  pluginDestory() {\n    this.list.forEach((plugin) => {\n      plugin.destroy?.(this.player)\n    })\n  }\n}\n","/**\n * @license\n * Copyright 2017 Google LLC\n * SPDX-License-Identifier: BSD-3-Clause\n */\nvar t;const i=window,s=i.trustedTypes,e=s?s.createPolicy(\"lit-html\",{createHTML:t=>t}):void 0,o=\"$lit$\",n=`lit$${(Math.random()+\"\").slice(9)}$`,l=\"?\"+n,h=`<${l}>`,r=document,u=()=>r.createComment(\"\"),d=t=>null===t||\"object\"!=typeof t&&\"function\"!=typeof t,c=Array.isArray,v=t=>c(t)||\"function\"==typeof(null==t?void 0:t[Symbol.iterator]),a=\"[ \\t\\n\\f\\r]\",f=/<(?:(!--|\\/[^a-zA-Z])|(\\/?[a-zA-Z][^>\\s]*)|(\\/?$))/g,_=/-->/g,m=/>/g,p=RegExp(`>|${a}(?:([^\\\\s\"'>=/]+)(${a}*=${a}*(?:[^ \\t\\n\\f\\r\"'\\`<>=]|(\"|')|))|$)`,\"g\"),g=/'/g,$=/\"/g,y=/^(?:script|style|textarea|title)$/i,w=t=>(i,...s)=>({_$litType$:t,strings:i,values:s}),x=w(1),b=w(2),T=Symbol.for(\"lit-noChange\"),A=Symbol.for(\"lit-nothing\"),E=new WeakMap,C=r.createTreeWalker(r,129,null,!1);function P(t,i){if(!Array.isArray(t)||!t.hasOwnProperty(\"raw\"))throw Error(\"invalid template strings array\");return void 0!==e?e.createHTML(i):i}const V=(t,i)=>{const s=t.length-1,e=[];let l,r=2===i?\"<svg>\":\"\",u=f;for(let i=0;i<s;i++){const s=t[i];let d,c,v=-1,a=0;for(;a<s.length&&(u.lastIndex=a,c=u.exec(s),null!==c);)a=u.lastIndex,u===f?\"!--\"===c[1]?u=_:void 0!==c[1]?u=m:void 0!==c[2]?(y.test(c[2])&&(l=RegExp(\"</\"+c[2],\"g\")),u=p):void 0!==c[3]&&(u=p):u===p?\">\"===c[0]?(u=null!=l?l:f,v=-1):void 0===c[1]?v=-2:(v=u.lastIndex-c[2].length,d=c[1],u=void 0===c[3]?p:'\"'===c[3]?$:g):u===$||u===g?u=p:u===_||u===m?u=f:(u=p,l=void 0);const w=u===p&&t[i+1].startsWith(\"/>\")?\" \":\"\";r+=u===f?s+h:v>=0?(e.push(d),s.slice(0,v)+o+s.slice(v)+n+w):s+n+(-2===v?(e.push(void 0),i):w)}return[P(t,r+(t[s]||\"<?>\")+(2===i?\"</svg>\":\"\")),e]};class N{constructor({strings:t,_$litType$:i},e){let h;this.parts=[];let r=0,d=0;const c=t.length-1,v=this.parts,[a,f]=V(t,i);if(this.el=N.createElement(a,e),C.currentNode=this.el.content,2===i){const t=this.el.content,i=t.firstChild;i.remove(),t.append(...i.childNodes)}for(;null!==(h=C.nextNode())&&v.length<c;){if(1===h.nodeType){if(h.hasAttributes()){const t=[];for(const i of h.getAttributeNames())if(i.endsWith(o)||i.startsWith(n)){const s=f[d++];if(t.push(i),void 0!==s){const t=h.getAttribute(s.toLowerCase()+o).split(n),i=/([.?@])?(.*)/.exec(s);v.push({type:1,index:r,name:i[2],strings:t,ctor:\".\"===i[1]?H:\"?\"===i[1]?L:\"@\"===i[1]?z:k})}else v.push({type:6,index:r})}for(const i of t)h.removeAttribute(i)}if(y.test(h.tagName)){const t=h.textContent.split(n),i=t.length-1;if(i>0){h.textContent=s?s.emptyScript:\"\";for(let s=0;s<i;s++)h.append(t[s],u()),C.nextNode(),v.push({type:2,index:++r});h.append(t[i],u())}}}else if(8===h.nodeType)if(h.data===l)v.push({type:2,index:r});else{let t=-1;for(;-1!==(t=h.data.indexOf(n,t+1));)v.push({type:7,index:r}),t+=n.length-1}r++}}static createElement(t,i){const s=r.createElement(\"template\");return s.innerHTML=t,s}}function S(t,i,s=t,e){var o,n,l,h;if(i===T)return i;let r=void 0!==e?null===(o=s._$Co)||void 0===o?void 0:o[e]:s._$Cl;const u=d(i)?void 0:i._$litDirective$;return(null==r?void 0:r.constructor)!==u&&(null===(n=null==r?void 0:r._$AO)||void 0===n||n.call(r,!1),void 0===u?r=void 0:(r=new u(t),r._$AT(t,s,e)),void 0!==e?(null!==(l=(h=s)._$Co)&&void 0!==l?l:h._$Co=[])[e]=r:s._$Cl=r),void 0!==r&&(i=S(t,r._$AS(t,i.values),r,e)),i}class M{constructor(t,i){this._$AV=[],this._$AN=void 0,this._$AD=t,this._$AM=i}get parentNode(){return this._$AM.parentNode}get _$AU(){return this._$AM._$AU}u(t){var i;const{el:{content:s},parts:e}=this._$AD,o=(null!==(i=null==t?void 0:t.creationScope)&&void 0!==i?i:r).importNode(s,!0);C.currentNode=o;let n=C.nextNode(),l=0,h=0,u=e[0];for(;void 0!==u;){if(l===u.index){let i;2===u.type?i=new R(n,n.nextSibling,this,t):1===u.type?i=new u.ctor(n,u.name,u.strings,this,t):6===u.type&&(i=new Z(n,this,t)),this._$AV.push(i),u=e[++h]}l!==(null==u?void 0:u.index)&&(n=C.nextNode(),l++)}return C.currentNode=r,o}v(t){let i=0;for(const s of this._$AV)void 0!==s&&(void 0!==s.strings?(s._$AI(t,s,i),i+=s.strings.length-2):s._$AI(t[i])),i++}}class R{constructor(t,i,s,e){var o;this.type=2,this._$AH=A,this._$AN=void 0,this._$AA=t,this._$AB=i,this._$AM=s,this.options=e,this._$Cp=null===(o=null==e?void 0:e.isConnected)||void 0===o||o}get _$AU(){var t,i;return null!==(i=null===(t=this._$AM)||void 0===t?void 0:t._$AU)&&void 0!==i?i:this._$Cp}get parentNode(){let t=this._$AA.parentNode;const i=this._$AM;return void 0!==i&&11===(null==t?void 0:t.nodeType)&&(t=i.parentNode),t}get startNode(){return this._$AA}get endNode(){return this._$AB}_$AI(t,i=this){t=S(this,t,i),d(t)?t===A||null==t||\"\"===t?(this._$AH!==A&&this._$AR(),this._$AH=A):t!==this._$AH&&t!==T&&this._(t):void 0!==t._$litType$?this.g(t):void 0!==t.nodeType?this.$(t):v(t)?this.T(t):this._(t)}k(t){return this._$AA.parentNode.insertBefore(t,this._$AB)}$(t){this._$AH!==t&&(this._$AR(),this._$AH=this.k(t))}_(t){this._$AH!==A&&d(this._$AH)?this._$AA.nextSibling.data=t:this.$(r.createTextNode(t)),this._$AH=t}g(t){var i;const{values:s,_$litType$:e}=t,o=\"number\"==typeof e?this._$AC(t):(void 0===e.el&&(e.el=N.createElement(P(e.h,e.h[0]),this.options)),e);if((null===(i=this._$AH)||void 0===i?void 0:i._$AD)===o)this._$AH.v(s);else{const t=new M(o,this),i=t.u(this.options);t.v(s),this.$(i),this._$AH=t}}_$AC(t){let i=E.get(t.strings);return void 0===i&&E.set(t.strings,i=new N(t)),i}T(t){c(this._$AH)||(this._$AH=[],this._$AR());const i=this._$AH;let s,e=0;for(const o of t)e===i.length?i.push(s=new R(this.k(u()),this.k(u()),this,this.options)):s=i[e],s._$AI(o),e++;e<i.length&&(this._$AR(s&&s._$AB.nextSibling,e),i.length=e)}_$AR(t=this._$AA.nextSibling,i){var s;for(null===(s=this._$AP)||void 0===s||s.call(this,!1,!0,i);t&&t!==this._$AB;){const i=t.nextSibling;t.remove(),t=i}}setConnected(t){var i;void 0===this._$AM&&(this._$Cp=t,null===(i=this._$AP)||void 0===i||i.call(this,t))}}class k{constructor(t,i,s,e,o){this.type=1,this._$AH=A,this._$AN=void 0,this.element=t,this.name=i,this._$AM=e,this.options=o,s.length>2||\"\"!==s[0]||\"\"!==s[1]?(this._$AH=Array(s.length-1).fill(new String),this.strings=s):this._$AH=A}get tagName(){return this.element.tagName}get _$AU(){return this._$AM._$AU}_$AI(t,i=this,s,e){const o=this.strings;let n=!1;if(void 0===o)t=S(this,t,i,0),n=!d(t)||t!==this._$AH&&t!==T,n&&(this._$AH=t);else{const e=t;let l,h;for(t=o[0],l=0;l<o.length-1;l++)h=S(this,e[s+l],i,l),h===T&&(h=this._$AH[l]),n||(n=!d(h)||h!==this._$AH[l]),h===A?t=A:t!==A&&(t+=(null!=h?h:\"\")+o[l+1]),this._$AH[l]=h}n&&!e&&this.j(t)}j(t){t===A?this.element.removeAttribute(this.name):this.element.setAttribute(this.name,null!=t?t:\"\")}}class H extends k{constructor(){super(...arguments),this.type=3}j(t){this.element[this.name]=t===A?void 0:t}}const I=s?s.emptyScript:\"\";class L extends k{constructor(){super(...arguments),this.type=4}j(t){t&&t!==A?this.element.setAttribute(this.name,I):this.element.removeAttribute(this.name)}}class z extends k{constructor(t,i,s,e,o){super(t,i,s,e,o),this.type=5}_$AI(t,i=this){var s;if((t=null!==(s=S(this,t,i,0))&&void 0!==s?s:A)===T)return;const e=this._$AH,o=t===A&&e!==A||t.capture!==e.capture||t.once!==e.once||t.passive!==e.passive,n=t!==A&&(e===A||o);o&&this.element.removeEventListener(this.name,this,e),n&&this.element.addEventListener(this.name,this,t),this._$AH=t}handleEvent(t){var i,s;\"function\"==typeof this._$AH?this._$AH.call(null!==(s=null===(i=this.options)||void 0===i?void 0:i.host)&&void 0!==s?s:this.element,t):this._$AH.handleEvent(t)}}class Z{constructor(t,i,s){this.element=t,this.type=6,this._$AN=void 0,this._$AM=i,this.options=s}get _$AU(){return this._$AM._$AU}_$AI(t){S(this,t)}}const j={O:o,P:n,A:l,C:1,M:V,L:M,R:v,D:S,I:R,V:k,H:L,N:z,U:H,F:Z},B=i.litHtmlPolyfillSupport;null==B||B(N,R),(null!==(t=i.litHtmlVersions)&&void 0!==t?t:i.litHtmlVersions=[]).push(\"2.8.0\");const D=(t,i,s)=>{var e,o;const n=null!==(e=null==s?void 0:s.renderBefore)&&void 0!==e?e:i;let l=n._$litPart$;if(void 0===l){const t=null!==(o=null==s?void 0:s.renderBefore)&&void 0!==o?o:null;n._$litPart$=l=new R(i.insertBefore(u(),t),t,void 0,null!=s?s:{})}return l._$AI(t),l};export{j as _$LH,x as html,T as noChange,A as nothing,D as render,b as svg};\n//# sourceMappingURL=lit-html.js.map\n","export const classPrefix = \"mfuns-player\"\n\n/** 项目链接 */\nexport const repositoryLink = \"https://github.com/Mfuns-cn/mfunsPlayer/tree/v3-beta\"\n\n/** 开发者列表 */\nexport const developers = [\n  { name: \"Minteea\", id: \"Minteea\", link: \"https://github.com/Minteea\" },\n  { name: \"鲁迪钨丝\", id: \"Rudiusu\", link: \"https://github.com/Rudiusu\" },\n]\n","const isMobile = /mobile/i.test(window.navigator.userAgent)\n\n/** 创建特定长度的填充数组 */\nexport const createArray = <T>(count: number, val: T) => Array.from({ length: count }, () => val)\n\n/** 获取全屏元素 */\nexport const getFullscreenElement = (): HTMLElement | null =>\n  document.fullscreenElement ||\n  (document as any).mozFullScreenElement ||\n  (document as any).webkitFullscreenElement ||\n  (document as any).msFullscreenElement ||\n  null\n\n/** 是否支持全屏 */\nexport const fullScreenEnabled: boolean =\n  document.fullscreenEnabled ||\n  (document as any).webkitFullscreenEnabled ||\n  (document as any).mozFullScreenEnabled ||\n  (document as any).msFullscreenEnabled ||\n  false\n\n/** 是否支持画中画 */\nexport const pictureInPictureEnabled = document.pictureInPictureEnabled\n\n/**\n * 将时间文本转换为秒数\n *\n * @param {String} str 冒号分隔的时间文本，支持全角冒号\n * @return {Number} second\n */\nexport const timeToSecond = (str: string): number => {\n  const arr = str.split(/[:：]/).slice(-3)\n  const sec = parseInt(arr[arr.length - 1]) || 0\n  const min = parseInt(arr[arr.length - 2]) || 0\n  const hour = parseInt(arr[arr.length - 3]) || 0\n  return sec + min * 60 + hour * 3600\n}\n\n/**\n * 防抖\n * @param {Function} fn 需要防抖处理的函数\n * @param {number} delay 防抖延迟执行时间\n * @param {boolean} immediate 是否立即执行一次\n */\nexport const debounce = (fn: (...args: unknown[]) => void, delay: number, immediate = false) => {\n  let timer: ReturnType<typeof setTimeout> | null = null\n  let isInvoke = false\n  return function (this: unknown, ...args: unknown[]) {\n    if (timer) clearTimeout(timer)\n    if (immediate && !isInvoke) {\n      fn.apply(this, args)\n      isInvoke = true\n    } else {\n      timer = setTimeout(() => {\n        fn.apply(this, args)\n        clearTimeout(timer!)\n        timer = null\n        isInvoke = false\n      }, delay)\n    }\n  }\n}\n\n/**\n * 节流\n * @param {Function} fn 需要节流处理的函数\n * @param {number} wait 执行一次后需要等待的时间\n */\nexport const throttle = (fn: (...args: unknown[]) => void, wait: number) => {\n  let timer: ReturnType<typeof setTimeout> | null = null\n  return function (this: unknown, ...args: unknown[]) {\n    if (!timer) {\n      timer = setTimeout(() => {\n        fn.apply(this, args)\n        clearTimeout(timer!)\n        timer = null\n      }, wait)\n    }\n  }\n}\n\n// === 未完全重构 ==========\n\n/**\n * 将秒数转换为时间文本\n *\n * @param {Number} second\n * @param {Boolean} showHour\n * @return {String} 00:00 or 00:00:00\n */\nexport const secondToTime = (second: number, showHour = true) => {\n  second = second || 0\n  if (second === 0 || second === Infinity || second.toString() === \"NaN\") {\n    return \"00:00\"\n  }\n  const add0 = (num: number) => (num < 10 ? `0${num}` : `${num}`)\n  const hour = Math.floor(second / 3600)\n  const min = Math.floor((second - hour * 3600) / 60)\n  const sec = Math.floor(second - hour * 3600 - min * 60)\n  if (showHour) {\n    return (hour > 0 ? [hour, min, sec] : [min, sec]).map(add0).join(\":\")\n  }\n  return [hour * 60 + min, sec].map(add0).join(\":\")\n}\n\nexport const storage = {\n  set: (key: string, value: any) => {\n    localStorage.setItem(key, value)\n  },\n\n  get: (key: string) => localStorage.getItem(key),\n}\n\nexport const nameMap = {\n  dragStart: isMobile ? \"touchstart\" : \"mousedown\",\n  dragMove: isMobile ? \"touchmove\" : \"mousemove\",\n  dragEnd: isMobile ? \"touchend\" : \"mouseup\",\n}\nexport const colorLuminance = (hex: string, lum: number) => {\n  // validate hex string\n  hex = String(hex).replace(/[^0-9a-f]/gi, \"\")\n  if (hex.length < 6) {\n    hex = hex[0] + hex[0] + hex[1] + hex[1] + hex[2] + hex[2]\n  }\n  lum = lum || 0\n\n  // convert to decimal and change luminosity\n  let rgb = \"#\"\n  let c\n  let i\n  for (i = 0; i < 3; i++) {\n    c = parseInt(hex.substr(i * 2, 2), 16)\n    c = Math.round(Math.min(Math.max(0, c + c * lum), 255)).toString(16)\n    rgb += `00${c}`.substr(c.length)\n  }\n\n  return rgb\n}\n\nexport const hex2Rgb = (str: string, opacity: number) => {\n  // 16进制转rgb\n  const reg = /^#([0-9A-Fa-f]{3}|[0-9A-Fa-f]{6})$/\n  if (!reg.test(str)) {\n    return\n  }\n  let newStr = str.toLowerCase().replace(/#/g, \"\")\n  const len = newStr.length\n  if (len == 3) {\n    let t = \"\"\n    for (let i = 0; i < len; i++) {\n      t += newStr.slice(i, i + 1).concat(newStr.slice(i, i + 1))\n    }\n    newStr = t\n  }\n  const arr = [] // 将字符串分隔，两个两个的分隔\n  for (let i = 0; i < 6; i += 2) {\n    const s = newStr.slice(i, i + 2)\n    arr.push(parseInt(`0x${s}`))\n  }\n  if (opacity) return `rgba(${arr.join(\",\")},${opacity})`\n  return `rgb(${arr.join(\",\")})`\n}\nexport const rgb2Hex = (str: string) => {\n  // rgb转16进制\n  const reg = /^(rgb|RGB)/\n  if (!reg.test(str)) {\n    return\n  }\n  const arr = str.slice(4, str.length - 1).split(\",\")\n  let color = \"#\"\n  for (let i = 0; i < arr.length; i++) {\n    let t = Number(arr[i]).toString(16)\n    if (t == \"0\") {\n      // 如果为“0”的话，需要补0操作,否则只有5位数\n      t += \"0\"\n    }\n    color += t\n  }\n  return color\n}\nexport const color2Number = (color: string) => {\n  if (color[0] === \"#\") {\n    color = color.substr(1)\n  }\n  if (color.length === 3) {\n    color = `${color[0]}${color[0]}${color[1]}${color[1]}${color[2]}${color[2]}`\n  }\n  return (parseInt(color, 16) + 0x000000) & 0xffffff\n}\n\nexport const number2Color = (number: number) => `#${`00000${number.toString(16)}`.slice(-6)}`\nexport const initHash = () => {\n  let count = 100\n\n  return function (hashLength: number) {\n    if (!hashLength || typeof Number(hashLength) !== \"number\") {\n      return\n    }\n    const ar = [\n      \"1\",\n      \"2\",\n      \"3\",\n      \"4\",\n      \"5\",\n      \"6\",\n      \"7\",\n      \"8\",\n      \"9\",\n      \"0\",\n      \"a\",\n      \"b\",\n      \"c\",\n      \"d\",\n      \"e\",\n      \"f\",\n      \"g\",\n      \"h\",\n      \"i\",\n      \"j\",\n      \"k\",\n      \"l\",\n      \"m\",\n      \"n\",\n      \"o\",\n      \"p\",\n      \"q\",\n      \"r\",\n      \"s\",\n      \"t\",\n      \"u\",\n      \"v\",\n      \"w\",\n      \"x\",\n      \"y\",\n      \"z\",\n    ]\n    const hs = []\n    const hl = Number(hashLength)\n    const al = ar.length\n    for (let i = 0; i < hl; i++) {\n      hs.push(ar[Math.floor(Math.random() * al)])\n    }\n    count++\n    return `${hs.join(\"\")}${count}`\n  }\n}\nexport const randomFontsize = (range: number) => {\n  const allSize = [16, 18, 25, 36, 45, 64]\n  const random = Math.floor(Math.random() * range)\n  return allSize[random]\n}\n\nconst dateFormatMap = {\n  yyyy: (d: Date) => d.getFullYear().toString(),\n  yy: (d: Date) => d.getFullYear().toString().slice(-2),\n  MM: (d: Date) => (d.getMonth() + 1).toString().padStart(2, \"0\"),\n  dd: (d: Date) => d.getDate().toString().padStart(2, \"0\"),\n  HH: (d: Date) => d.getHours().toString().padStart(2, \"0\"),\n  mm: (d: Date) => d.getMinutes().toString().padStart(2, \"0\"),\n  ss: (d: Date) => d.getSeconds().toString().padStart(2, \"0\"),\n}\n\n// date: 时间对象, pattern: 日期格式\nexport const dateFormat = (date: Date, format: string) => {\n  return format.replace(/yy|yyyy|MM|dd|HH|mm|ss/g, (match) =>\n    dateFormatMap[match as keyof typeof dateFormatMap]?.(date)\n  )\n}\n","import { html, render } from \"lit-html\"\nimport { PlayerOptions } from \"@/types\"\nimport { classPrefix } from \"@/const\"\nimport MfunsPlayer from \"@/player\"\nimport Controller from \".\"\nimport { secondToTime } from \"@/utils\"\nimport Video from \"@/Video\"\n\nconst template = () => html`\n  <div class=\"${classPrefix}-progress-bar\">\n    <div class=\"${classPrefix}-progress-bar-buffered\"></div>\n    <div class=\"${classPrefix}-progress-bar-played\"></div>\n    <div class=\"${classPrefix}-progress-bar-thumb-track\">\n      <div class=\"${classPrefix}-progress-bar-thumb\"></div>\n    </div>\n    <div class=\"${classPrefix}-progress-bar-preview\">\n      <div class=\"${classPrefix}-progress-bar-thumbnail\"></div>\n      <div class=\"${classPrefix}-progress-bar-time\"></div>\n    </div>\n    <div class=\"${classPrefix}-progress-bar-tip\"></div>\n  </div>\n`\n\n/** 进度条 */\nexport default class ProgressBar {\n  controller: Controller\n  player: MfunsPlayer\n  container: HTMLElement\n  el: HTMLElement\n  $buffered: HTMLElement\n  $played: HTMLElement\n  $thumbTrack: HTMLElement\n  $thumb: HTMLElement\n  $preview: HTMLElement\n  $thumbnail: HTMLElement\n  $time: HTMLElement\n  $tip: HTMLElement\n  video: Video\n  /** 轨道长度 */\n  private trackLength = 0\n  /** 鼠标与轨道距离 */\n  private distance = 0\n  /** 滑块可滑动距离 */\n  private nMax = 0\n  /** 滑块轨道位置 */\n  private nLeft = 0\n  /** 滑动距离 */\n  get nLength(): number {\n    const nLength = this.distance - this.thumbTrackX\n    // 限制滑块移动位置\n    return nLength >= this.nMax ? this.nMax : nLength <= 0 ? 0 : nLength\n  }\n  /** 滑块轨道与总轨道距离差 */\n  get thumbTrackX(): number {\n    return (this.trackLength - this.nMax) / 2\n  }\n  /** 滑动值 */\n  get nValue(): number {\n    return (this.nLength / this.nMax) * this.video.duration\n  }\n  private isDragging = false\n  private isHover = false\n  private isActive = false\n\n  constructor(controller: Controller, options: PlayerOptions) {\n    this.controller = controller\n    this.player = controller.player\n    this.container = controller.$progress\n    render(template(), this.container)\n\n    this.el = this.container.querySelector(`.${classPrefix}-progress-bar`)!\n    this.$buffered = this.el.querySelector(`.${classPrefix}-progress-bar-buffered`)!\n    this.$played = this.el.querySelector(`.${classPrefix}-progress-bar-played`)!\n    this.$thumbTrack = this.el.querySelector(`.${classPrefix}-progress-bar-thumb-track`)!\n    this.$thumb = this.el.querySelector(`.${classPrefix}-progress-bar-thumb`)!\n    this.$preview = this.el.querySelector(`.${classPrefix}-progress-bar-preview`)!\n    this.$thumbnail = this.el.querySelector(`.${classPrefix}-progress-bar-thumbnail`)!\n    this.$time = this.el.querySelector(`.${classPrefix}-progress-bar-time`)!\n    this.$tip = this.el.querySelector(`.${classPrefix}-progress-bar-tip`)!\n\n    this.video = this.player.video\n\n    // 点按进度条事件\n    this.container.addEventListener(\"mousedown\", (e: MouseEvent) => {\n      const { clientX } = e\n      // 更新滑动条位置信息\n      this.trackLength = this.el.offsetWidth\n      this.nMax = this.$thumbTrack.offsetWidth || this.trackLength\n      this.nLeft = this.container.getBoundingClientRect().left\n      // 获取鼠标与轨道距离\n      this.distance = clientX - this.nLeft\n      this.setBarPlayed(this.nValue)\n      this.el.classList.add(`${classPrefix}-progress-bar-dragging`)\n      this.isDragging = true\n      document.addEventListener(\"mousemove\", dragMoveEvent)\n      document.addEventListener(\"mouseup\", dragEndEvent)\n    })\n\n    // 滑动进度条事件\n    const dragMoveEvent = (e: MouseEvent) => {\n      // 鼠标X位置\n      const { clientX } = e\n      // 鼠标移动时取消默认行为，避免选中其他元素或文字\n      e.preventDefault()\n      e.stopPropagation()\n      // 获取鼠标与轨道距离\n      this.distance = clientX - this.nLeft\n      this.setBarPlayed(this.nValue)\n      // 更新指针显示\n      this.updateTip()\n      window.getSelection()?.removeAllRanges()\n    }\n\n    // 松开进度条事件\n    const dragEndEvent = (e: MouseEvent) => {\n      e.stopPropagation()\n      window.getSelection()?.removeAllRanges()\n      document.removeEventListener(\"mousemove\", dragMoveEvent)\n      document.removeEventListener(\"mouseup\", dragEndEvent)\n      this.el.classList.remove(`${classPrefix}-progress-bar-dragging`)\n      this.isDragging = false\n      if (!this.isHover) this.setActive(false)\n      // 跳转\n      this.player.seek(this.nValue)\n      this.player.play()\n    }\n\n    // 鼠标离开进度条区域\n    this.container.addEventListener(\"mouseenter\", () => {\n      this.isHover = true\n      if (!this.isDragging) this.updateTip()\n    })\n    // 鼠标在进度条区域内移动\n    this.container.addEventListener(\"mousemove\", (e: MouseEvent) => {\n      // 如果进度条处于拖动状态，则无需重复显示进度条指针\n      if (this.isDragging) return\n      // 鼠标X位置\n      const { clientX } = e\n      // 更新滑动条位置信息\n      this.trackLength = this.el.offsetWidth\n      this.nMax = this.$thumbTrack.offsetWidth || this.trackLength\n      this.nLeft = this.container.getBoundingClientRect().left\n      // 获取鼠标与轨道距离\n      this.distance = clientX - this.nLeft\n      // 更新指针显示\n      this.updateTip()\n    })\n    // 鼠标离开进度条区域\n    this.container.addEventListener(\"mouseleave\", () => {\n      this.isHover = false\n      if (!this.isDragging) this.setActive(false)\n    })\n\n    // 视频播放时间更新\n    this.player.on(\"timeupdate\", (time) => {\n      if (!this.isDragging) this.setBarPlayed(time)\n    })\n\n    // 视频缓存更新\n    this.player.on(\"progress\", (time) => {\n      this.setBarBuffered(time)\n    })\n  }\n\n  /** 设置已播放进度条位置 */\n  public setBarPlayed(time: number) {\n    // 计算进度比值\n    const per = time / this.video.duration || 0\n    // 修改滑块位置\n    this.$thumb.style.left = `${per * 100}%`\n    // 修改滑动痕迹宽度\n    this.$played.style.width = `${per * 100}%`\n  }\n\n  /** 设置已播放进度条位置 */\n  public setBarBuffered(time: number) {\n    // 计算进度比值\n    const per = time / this.video.duration || 0\n    // 修改滑动痕迹宽度\n    this.$buffered.style.width = `${per * 100}%`\n  }\n\n  /** 设置进度条活跃状态 */\n  private setActive(flag: boolean) {\n    this.isActive = flag\n    this.el.classList.toggle(`${classPrefix}-progress-bar-active`, flag)\n    if (flag) {\n      this.controller.setControl(true)\n    } else {\n      this.controller.setControl(false)\n    }\n  }\n\n  /** 更新指针位置 */\n  public updateTip() {\n    if (!this.isActive) this.setActive(true)\n    let per = this.distance / this.trackLength\n    per = per >= 1 ? 1 : per <= 0 ? 0 : per\n    this.$tip.style.left = `${per * 100}%`\n    this.$preview.style.left = `${per * 100}%`\n    this.$time.innerText = secondToTime(this.nValue)\n  }\n}\n","import { html, render } from \"lit-html\"\nimport MfunsPlayer from \"@/player\"\nimport { classPrefix } from \"@/const\"\n\nconst template = () => html`\n  <div class=\"${classPrefix}-controller-button ${classPrefix}-controller-fullscreen\">\n    <div class=\"${classPrefix}-controller-icon-wrap\">\n      <i class=\"${classPrefix}-controller-icon mp-icon-fullscreen\"></i>\n      <i class=\"${classPrefix}-controller-icon mp-icon-fullscreen-exit\"></i>\n    </div>\n    <div class=\"${classPrefix}-tooltip\">进入全屏</div>\n  </div>\n`\n\nexport default class ButtonFullscreen {\n  player: MfunsPlayer\n  el: HTMLElement\n  $iconWrap: HTMLElement\n  $tooltip: HTMLElement\n\n  constructor(player: MfunsPlayer, container: HTMLElement) {\n    this.player = player\n    const fragment = new DocumentFragment()\n    render(template(), fragment)\n    this.el = fragment.querySelector(`.${classPrefix}-controller-button`)!\n    this.$iconWrap = fragment.querySelector(`.${classPrefix}-controller-icon-wrap`)!\n    this.$tooltip = fragment.querySelector(`.${classPrefix}-tooltip`)!\n    this.init()\n    container.appendChild(fragment)\n  }\n\n  private init() {\n    this.player.on(\"fullscreen\", () => {\n      this.el.classList.add(\"state-fullscreen\")\n      this.$tooltip.innerText = \"退出全屏\"\n    })\n    this.player.on(\"fullscreen_exit\", () => {\n      this.el.classList.remove(\"state-fullscreen\")\n      this.$tooltip.innerText = \"进入全屏\"\n    })\n    this.$iconWrap.addEventListener(\"click\", () => {\n      if (this.player.isFullscreen) {\n        this.player.exitFullscreen()\n      } else {\n        this.player.fullscreen()\n      }\n    })\n  }\n}\n","import { html, render } from \"lit-html\"\nimport MfunsPlayer from \"@/player\"\nimport { classPrefix } from \"@/const\"\n\nconst template = () => html`\n  <div class=\"${classPrefix}-controller-button ${classPrefix}-controller-pip\">\n    <div class=\"${classPrefix}-controller-icon-wrap\">\n      <i class=\"${classPrefix}-controller-icon mp-icon-pip\"></i>\n      <i class=\"${classPrefix}-controller-icon mp-icon-pip-exit\"></i>\n    </div>\n    <div class=\"${classPrefix}-tooltip\">画中画</div>\n  </div>\n`\n\nexport default class ButtonPip {\n  player: MfunsPlayer\n  el: HTMLElement\n  $iconWrap: HTMLElement\n  $tooltip: HTMLElement\n\n  constructor(player: MfunsPlayer, container: HTMLElement) {\n    this.player = player\n    const fragment = new DocumentFragment()\n    render(template(), fragment)\n    this.el = fragment.querySelector(`.${classPrefix}-controller-button`)!\n    this.$iconWrap = fragment.querySelector(`.${classPrefix}-controller-icon-wrap`)!\n    this.$tooltip = fragment.querySelector(`.${classPrefix}-tooltip`)!\n    this.init()\n    container.appendChild(fragment)\n  }\n\n  private init() {\n    this.player.on(\"pip\", () => {\n      this.el.classList.add(\"state-pip\")\n      this.$tooltip.innerText = \"退出画中画\"\n    })\n    this.player.on(\"pip_exit\", () => {\n      this.el.classList.remove(\"state-pip\")\n      this.$tooltip.innerText = \"画中画\"\n    })\n    this.$iconWrap.addEventListener(\"click\", () => {\n      if (this.player.isPip) {\n        this.player.exitPip()\n      } else {\n        this.player.pip()\n      }\n    })\n  }\n}\n","import { html, render } from \"lit-html\"\nimport MfunsPlayer from \"@/player\"\nimport { classPrefix } from \"@/const\"\n\nconst template = () => html`\n  <div class=\"${classPrefix}-controller-button ${classPrefix}-controller-play state-paused\">\n    <div class=\"${classPrefix}-controller-icon-wrap\">\n      <i class=\"${classPrefix}-controller-icon mp-icon-play\"></i>\n      <i class=\"${classPrefix}-controller-icon mp-icon-pause\"></i>\n    </div>\n    <div class=\"${classPrefix}-tooltip\">播放</div>\n  </div>\n`\n\nexport default class ButtonPlay {\n  player: MfunsPlayer\n  el: HTMLElement\n  $iconWrap: HTMLElement\n  $tooltip: HTMLElement\n\n  constructor(player: MfunsPlayer, container: HTMLElement) {\n    this.player = player\n    const fragment = new DocumentFragment()\n    render(template(), fragment)\n    this.el = fragment.querySelector(`.${classPrefix}-controller-button`)!\n    this.$iconWrap = fragment.querySelector(`.${classPrefix}-controller-icon-wrap`)!\n    this.$tooltip = fragment.querySelector(`.${classPrefix}-tooltip`)!\n    this.init()\n    container.appendChild(fragment)\n  }\n\n  private init() {\n    this.player.on(\"pause\", () => {\n      this.el.classList.add(\"state-paused\")\n      this.$tooltip.innerText = \"播放\"\n    })\n    this.player.on(\"play\", () => {\n      this.el.classList.remove(\"state-paused\")\n      this.$tooltip.innerText = \"暂停\"\n    })\n    this.player.on(\"part\", () => {\n      this.el.classList.add(\"state-paused\")\n      this.$tooltip.innerText = \"播放\"\n    })\n    this.$iconWrap.addEventListener(\"click\", () => {\n      this.player.toggle()\n    })\n  }\n}\n","import { html, render } from \"lit-html\"\nimport { classPrefix } from \"@/const\"\nimport MfunsPlayer from \"@/player\"\nimport { secondToTime, timeToSecond } from \"@/utils\"\n\nconst template = () => html`\n  <div class=\"${classPrefix}-controller-time\">\n    <div class=\"${classPrefix}-controller-time-label\">\n      <span class=\"${classPrefix}-controller-time-current\">00:00</span>\n      <span>/</span>\n      <span class=\"${classPrefix}-controller-time-total\">00:00</span>\n    </div>\n    <input class=\"${classPrefix}-controller-time-input mp-input\" />\n  </div>\n`\n\nexport default class LabelTime {\n  player: MfunsPlayer\n  el: HTMLElement\n  $label: HTMLElement\n  $current: HTMLElement\n  $total: HTMLElement\n  $input: HTMLInputElement\n  /** 点按时的值 */\n  private valueBeforeEdited = \"\"\n\n  constructor(player: MfunsPlayer, container: HTMLElement) {\n    this.player = player\n    const fragment = new DocumentFragment()\n    render(template(), fragment)\n    this.el = fragment.querySelector(`.${classPrefix}-controller-time`)!\n    this.$label = fragment.querySelector(`.${classPrefix}-controller-time-label`)!\n    this.$current = fragment.querySelector(`.${classPrefix}-controller-time-current`)!\n    this.$total = fragment.querySelector(`.${classPrefix}-controller-time-total`)!\n    this.$input = fragment.querySelector(`.${classPrefix}-controller-time-input`)!\n    this.init()\n    container.appendChild(fragment)\n  }\n\n  init() {\n    this.player.on(\"timeupdate\", (time) => {\n      this.$current.innerText = secondToTime(time)\n    })\n    this.player.on(\"durationchange\", (time) => {\n      this.$total.innerText = secondToTime(time)\n    })\n    this.$label.addEventListener(\"click\", () => {\n      this.el.classList.add(\"state-input\")\n      this.$input.value = secondToTime(this.player.time)\n      this.valueBeforeEdited = this.$input.value\n      this.$input.focus()\n    })\n    this.$input.addEventListener(\"blur\", () => {\n      const inputVal = this.$input.value\n      if (inputVal != this.valueBeforeEdited) {\n        // 如果输入值有改动，则跳转\n        this.player.seek(timeToSecond(inputVal))\n        this.player.play()\n      }\n      this.exitInput()\n    })\n    this.$input.addEventListener(\"keydown\", (event) => {\n      const e = event || window.event\n      if (e.keyCode == 13) {\n        this.player.seek(timeToSecond(this.$input.value))\n        this.player.play()\n        this.exitInput()\n      }\n      if (e.keyCode == 27) {\n        this.exitInput()\n      }\n    })\n  }\n\n  /** 退出输入模式 */\n  exitInput() {\n    this.el.classList.remove(\"state-input\")\n    this.$input.value = \"\"\n    this.valueBeforeEdited = \"\"\n  }\n}\n","import { html, render } from \"lit-html\"\nimport MfunsPlayer from \"@/player\"\nimport { classPrefix } from \"@/const\"\n\nconst template = () => html`\n  <div class=\"${classPrefix}-controller-button ${classPrefix}-controller-loop\">\n    <div class=\"${classPrefix}-controller-icon-wrap\">\n      <i class=\"${classPrefix}-controller-icon mp-icon-loop\"></i>\n      <i class=\"${classPrefix}-controller-icon mp-icon-loop-off\"></i>\n    </div>\n    <div class=\"${classPrefix}-tooltip\">洗脑循环</div>\n  </div>\n`\n\nexport default class ButtonLoop {\n  player: MfunsPlayer\n  el: HTMLElement\n  $iconWrap: HTMLElement\n  $tooltip: HTMLElement\n\n  constructor(player: MfunsPlayer, container: HTMLElement) {\n    this.player = player\n    const fragment = new DocumentFragment()\n    render(template(), fragment)\n    this.el = fragment.querySelector(`.${classPrefix}-controller-button`)!\n    this.$iconWrap = fragment.querySelector(`.${classPrefix}-controller-icon-wrap`)!\n    this.$tooltip = fragment.querySelector(`.${classPrefix}-tooltip`)!\n    this.init()\n    container.appendChild(fragment)\n  }\n\n  private init() {\n    this.player.on(\"change:loop\", (flag) => {\n      this.el.classList.toggle(\"state-loop\", flag)\n      this.$tooltip.innerText = flag ? \"关闭洗脑循环\" : \"洗脑循环\"\n    })\n    this.$iconWrap.addEventListener(\"click\", () => {\n      if (this.player.video.loop) {\n        this.player.video.setLoop(false)\n      } else {\n        this.player.video.setLoop(true)\n      }\n    })\n  }\n}\n","import { html, render } from \"lit-html\"\nimport { createArray, nameMap } from \"@/utils\"\nimport { classPrefix } from \"@/const\"\n\nconst template = ({ divider }: { divider: number }) => html` <div\n  class=\"${classPrefix}-slider ${classPrefix}-slider-horizontal\"\n  style=\"position: relative; width: 100%; height: 100%\"\n>\n  <div\n    class=\"${classPrefix}-slider-track\"\n    style=\"\n      position: absolute;\n      width: 100%;\n      top: 50%;\n      transform: translateY(-50%);\n      display: flex;\n      justify-content: center;\n      align-items: center;\n    \"\n  >\n    <div class=\"${classPrefix}-slider-bar\" style=\"position: absolute; left: 0; height: 100%\"></div>\n    <div class=\"${classPrefix}-slider-thumb-track\" style=\"height: 0px\">\n      <div\n        class=\"${classPrefix}-slider-thumb\"\n        style=\"position: absolute; transform: translate(-50%, -50%)\"\n      ></div>\n      ${divider\n        ? html`\n            <ul class=\"${classPrefix}-slider-divider\">\n              ${createArray(divider, html`<li class=\"${classPrefix}-slider-divider-dot\"></li>`)}\n            </ul>\n          `\n        : \"\"}\n    </div>\n  </div>\n</div>`\n\ninterface SliderOptions {\n  /** 挂载容器 */\n  container: HTMLElement\n  /** 最小值 */\n  min: number\n  /** 最大值 */\n  max: number\n  /** 步长(若不填或为0，则没有步长限制) */\n  step?: number\n  /** 分割线 */\n  divider?: number | boolean\n  /** 默认值(不填的情况下默认值为0) */\n  value?: number\n  /** 数值更改时触发 */\n  onChange?: (value: number) => void\n  /** 拖动引发数值更改时触发 */\n  onDrag?: (value: number) => void\n  /** 开始拖动时触发 */\n  onDragStart?: (value: number) => void\n  /** 结束拖动时触发 */\n  onDragEnd?: (value: number) => void\n}\n\n/** 横向滑动条 */\nexport class Slider implements SliderOptions {\n  readonly container: HTMLElement\n  readonly min: number\n  readonly max: number\n  /** 步长 */\n  readonly step: number\n  /** 分割线 */\n  readonly divider: number\n  /** 数值 */\n  value: number\n  onChange?: (value: number) => void\n  onDragStart?: (value: number) => void\n  onDragEnd?: (value: number) => void\n  onDrag?: (value: number) => void\n\n  // 部件\n  el: HTMLElement\n\n  $track: HTMLElement\n\n  $bar: HTMLElement\n\n  $thumbTrack: HTMLElement\n\n  $thumb: HTMLElement\n\n  constructor({\n    container,\n    min,\n    max,\n    step,\n    divider = 0,\n    value = 0,\n    onChange,\n    onDragStart,\n    onDragEnd,\n    onDrag,\n  }: SliderOptions) {\n    this.container = container\n    this.min = min\n    this.max = max\n    this.step = step || 0\n    this.divider = divider ? (typeof divider === \"boolean\" ? this.step : divider) : 0\n    this.value = isNaN(value) ? value : Number(value)\n    this.onChange = onChange\n    this.onDragStart = onDragStart\n    this.onDragEnd = onDragEnd\n    this.onDrag = onDrag\n\n    render(template({ divider: this.divider }), container)\n\n    this.el = this.container.querySelector(`.${classPrefix}-slider`)!\n    this.$track = this.el.querySelector(`.${classPrefix}-slider-track`)! // 滑动条轨道\n    this.$bar = this.$track.querySelector(`.${classPrefix}-slider-bar`)! // 滑动条痕迹\n    this.$thumbTrack = this.$track.querySelector(`.${classPrefix}-slider-thumb-track`)! // 滑块轨道\n    this.$thumb = this.$track.querySelector(`.${classPrefix}-slider-thumb`)! // 滑块\n\n    // 滑动条事件\n    this.el.addEventListener(\"mousedown\", (event: MouseEvent) => {\n      const e: MouseEvent = event\n      // 鼠标X位置\n      const { clientX } = e\n      // 滑块长度\n      const trackLength = this.$track.offsetWidth\n      // 滑块可滑动距离\n      let nMax = this.$thumbTrack.offsetWidth\n      nMax = nMax || trackLength\n      // 滑块轨道与总轨道距离差\n      const thumbTrackX = (trackLength - nMax) / 2\n      // 滑动条位置\n      const nLeft = this.el.getBoundingClientRect().left\n      // 计算滑块位置\n      let nLength = clientX - nLeft - thumbTrackX\n      // 限制滑块移动位置\n      nLength = nLength >= nMax ? nMax : nLength <= 0 ? 0 : nLength\n      const value = this.step\n        ? Math.round(((nLength / nMax) * (this.max - this.min)) / this.step) * this.step + this.min\n        : (nLength / nMax) * (this.max - this.min) + this.min\n      // 开始滑动事件\n      this.onDragStart?.(value)\n      // 监测数据更新并执行函数\n      if (this.value != value) {\n        this.drag(value)\n      }\n\n      const mousemoveEvent = (event: MouseEvent) => {\n        const e: MouseEvent = event\n        // 鼠标X位置\n        const { clientX } = e\n        // 鼠标移动时取消默认行为，避免选中其他元素或文字\n        e.preventDefault()\n        e.stopPropagation()\n        // 获取鼠标移动后滑块应该移动到的位置\n        let nLength = clientX - nLeft - thumbTrackX\n        // 限制滑块移动位置\n        nLength = nLength >= nMax ? nMax : nLength <= 0 ? 0 : nLength\n\n        const value = this.step\n          ? Math.round(((nLength / nMax) * (this.max - this.min)) / this.step) * this.step +\n            this.min\n          : (nLength / nMax) * (this.max - this.min) + this.min\n        // 监测数据更新并执行函数\n        if (this.value != value) {\n          this.drag(value)\n        }\n        window.getSelection()?.removeAllRanges()\n      }\n\n      const removeEvent = (event: MouseEvent) => {\n        const e: MouseEvent = event\n        e.stopPropagation()\n        window.getSelection()?.removeAllRanges()\n        document.removeEventListener(\"mousemove\", mousemoveEvent)\n        document.removeEventListener(\"mouseup\", removeEvent)\n        this.onDragEnd?.(value)\n      }\n\n      document.addEventListener(\"mousemove\", mousemoveEvent)\n      document.addEventListener(\"mouseup\", removeEvent)\n    })\n\n    // 设置滑块初始位置\n    this.setValue(this.value)\n  }\n\n  /** 设置滑动条值 */\n  public setValue(value: number) {\n    this.value = value <= this.min ? this.min : value >= this.max ? this.max : value\n    // 计算滑块位置\n    const per = (this.value - this.min) / (this.max - this.min)\n    // 修改滑块位置\n    this.$thumb.style.left = `${per * 100}%`\n    // 修改滑动痕迹高度\n    this.$bar.style.width = `${per * 100}%`\n    // 触发数据更改事件\n    this.onChange?.(this.value)\n  }\n\n  /** 拖动滑动条到特定的值 */\n  public drag(value: number) {\n    this.setValue(value)\n    // 触发拖动事件\n    this.onDrag?.(this.value)\n  }\n}\n","import { html, render } from \"lit-html\"\nimport { classPrefix } from \"@/const\"\n\nconst template = () => html`\n  <div\n    class=\"${classPrefix}-slider ${classPrefix}-slider-vertical\"\n    style=\"position: relative; width: 100%; height: 100%\"\n  >\n    <div\n      class=\"${classPrefix}-slider-track\"\n      style=\"\n        position: absolute;\n        height: 100%;\n        left: 50%;\n        transform: translateX(-50%);\n        display: flex;\n        justify-content: center;\n        align-items: center\n      \"\n    >\n      <div\n        class=\"${classPrefix}-slider-bar\"\n        style=\"position: absolute; bottom: 0; width: 100%\"\n      ></div>\n      <div class=\"${classPrefix}-slider-thumb-track\" style=\"width: 0px\">\n        <div\n          class=\"${classPrefix}-slider-thumb\"\n          style=\"position: absolute; transform: translate(-50%, -50%)\"\n        ></div>\n      </div>\n    </div>\n  </div>\n`\n\ninterface SliderVerticalOptions {\n  /** 挂载容器 */\n  container: HTMLElement\n  /** 最小值 */\n  min: number\n  /** 最大值 */\n  max: number\n  /** 步长(若不填或为0，则没有步长限制) */\n  step?: number\n  /** 默认值(不填的情况下默认值为0) */\n  value?: number\n  /** 数值更改时触发 */\n  onChange?: (value: number) => void\n  /** 拖动引发数值更改时触发 */\n  onDrag?: (value: number) => void\n  /** 开始拖动时触发 */\n  onDragStart?: (value: number) => void\n  /** 结束拖动时触发 */\n  onDragEnd?: (value: number) => void\n}\n\n/** 横向滑动条 */\nexport class SliderVertical implements SliderVerticalOptions {\n  readonly container: HTMLElement\n  readonly min: number\n  readonly max: number\n  /** 步长 */\n  readonly step: number\n  /** 数值 */\n  value: number\n  onChange?: (value: number) => void\n  onDragStart?: (value: number) => void\n  onDragEnd?: (value: number) => void\n  onDrag?: (value: number) => void\n  // 部件\n  el: HTMLElement\n  $track: HTMLElement\n  $bar: HTMLElement\n  $thumbTrack: HTMLElement\n  $thumb: HTMLElement\n\n  constructor({\n    container,\n    min,\n    max,\n    step,\n    value = 0,\n    onChange,\n    onDragStart,\n    onDragEnd,\n    onDrag,\n  }: SliderVerticalOptions) {\n    this.container = container\n    this.min = min\n    this.max = max\n    this.step = step || 0\n    this.value = isNaN(value) ? value : Number(value)\n    this.onChange = onChange\n    this.onDragStart = onDragStart\n    this.onDragEnd = onDragEnd\n    this.onDrag = onDrag\n\n    render(template(), container)\n\n    this.el = this.container.querySelector(`.${classPrefix}-slider`)!\n    this.$track = this.el.querySelector(`.${classPrefix}-slider-track`)! // 滑动条轨道\n    this.$bar = this.$track.querySelector(`.${classPrefix}-slider-bar`)! // 滑动条痕迹\n    this.$thumbTrack = this.$track.querySelector(`.${classPrefix}-slider-thumb-track`)! // 滑块轨道\n    this.$thumb = this.$track.querySelector(`.${classPrefix}-slider-thumb`)! // 滑块\n\n    // 滑动条事件\n    // 点击鼠标事件\n    this.el.addEventListener(\"mousedown\", (event: MouseEvent) => {\n      const e: MouseEvent = event\n      // 鼠标Y位置\n      const { clientY } = e\n      // 滑块长度\n      const trackLength = this.$track.offsetHeight\n      // 滑块可滑动距离\n      let nMax = this.$thumbTrack.offsetHeight\n      nMax = nMax || trackLength\n      // 滑块轨道与总轨道距离差\n      const thumbTrackY = (trackLength - nMax) / 2\n      // 滑动条位置\n      const nTop = this.el.getBoundingClientRect().top\n      // 计算滑块位置\n      let nLength = nMax - (clientY - nTop - thumbTrackY)\n      // 限制滑块移动位置\n      nLength = nLength >= nMax ? nMax : nLength <= 0 ? 0 : nLength\n      const value = this.step\n        ? Math.round(((nLength / nMax) * (this.max - this.min)) / this.step) * this.step + this.min\n        : (nLength / nMax) * (this.max - this.min) + this.min\n      // 开始滑动事件\n      this.onDragStart?.(value)\n      // 监测数据更新并执行函数\n      if (this.value != value) {\n        this.drag(value)\n      }\n\n      const mousemoveEvent = (event: MouseEvent) => {\n        const e: MouseEvent = event\n        // 鼠标X位置\n        const { clientY } = e\n        // 鼠标移动时取消默认行为，避免选中其他元素或文字\n        e.preventDefault()\n        e.stopPropagation()\n        // 获取鼠标移动后滑块应该移动到的位置\n        let nLength = nMax - (clientY - nTop - thumbTrackY)\n        // 限制滑块移动位置\n        nLength = nLength >= nMax ? nMax : nLength <= 0 ? 0 : nLength\n\n        const value = this.step\n          ? Math.round(((nLength / nMax) * (this.max - this.min)) / this.step) * this.step +\n            this.min\n          : (nLength / nMax) * (this.max - this.min) + this.min\n        // 监测数据更新并执行函数\n        if (this.value != value) {\n          this.drag(value)\n        }\n        window.getSelection()?.removeAllRanges()\n      }\n      const removeEvent = (event: MouseEvent) => {\n        const e: MouseEvent = event\n        e.stopPropagation()\n        window.getSelection()?.removeAllRanges()\n        document.removeEventListener(\"mousemove\", mousemoveEvent)\n        document.removeEventListener(\"mouseup\", removeEvent)\n        this.onDragEnd?.(value)\n      }\n\n      document.addEventListener(\"mousemove\", mousemoveEvent)\n      document.addEventListener(\"mouseup\", removeEvent)\n    })\n    // 设置滑块初始位置\n    this.setValue(this.value)\n  }\n\n  /** 设置滑动条值 */\n  setValue(value: number) {\n    // this.value = value <= this.min ? this.min : value >= this.max ? this.max : value;\n    this.value = Math.max(Math.min(value, this.max), this.min)\n    // 计算滑块位置\n    const per = (this.value - this.min) / (this.max - this.min)\n    // 修改滑块位置\n    this.$thumb.style.top = `${(1 - per) * 100}%`\n    // 修改滑动痕迹高度\n    this.$bar.style.height = `${Math.max(Math.min(per, 1), 0) * 100}%`\n    // 执行相应函数\n    this.onChange?.(value)\n  }\n\n  /** 拖动滑动条到特定的值 */\n  private drag(value: number) {\n    this.setValue(value)\n    // 触发拖动事件\n    this.onDrag?.(this.value)\n  }\n}\n","import { html, render, TemplateResult } from \"lit-html\"\nimport { classPrefix } from \"@/const\"\n\nconst templateWrap = ({\n  list,\n  template,\n}: {\n  list: PickerOptionsItem[]\n  template?: PickerItemTemplate\n}) => html`\n  <ul class=\"${classPrefix}-picker\">\n    ${list.map(\n      (item, index) => html`\n        <li class=\"${classPrefix}-picker-item\" data-value=\"${item.value}\">\n          ${template?.(item, index) || item.label || item.value}\n        </li>\n      `\n    )}\n  </ul>\n`\n\n/** 选择器函数 */\ntype PickerItemTemplate = (item: PickerOptionsItem, index?: number) => string | TemplateResult\n\ninterface PickerOptionsItem {\n  value: string | number\n  label?: string\n  disabled?: boolean\n  [key: string]: any\n}\n\ninterface PickerOptions {\n  /** 挂载容器 */\n  container: HTMLElement\n  /** 选择列表 */\n  list: PickerOptionsItem[]\n  /** 选择项标签模板 */\n  template?: PickerItemTemplate\n  /** 默认值(不填的情况下默认值为null) */\n  value?: string | number | null\n  /** 值更改时触发 */\n  onChange?: (value: string | number | null) => void\n  /** 选择某一项时触发 */\n  onPick?: (value: string | number | null) => void\n  /** 相等条件 */\n  condition?: (item: string, value: string | number | null) => boolean\n}\n\n/** 单选选择器 */\nexport class Picker implements PickerOptions {\n  readonly container: HTMLElement\n\n  readonly template?: PickerItemTemplate\n\n  list: PickerOptionsItem[]\n\n  /** 已选值 */\n  value: string | number | null\n\n  onChange?: (value: string | number | null) => void\n\n  onPick?: (value: string | number | null) => void\n\n  el!: HTMLElement\n\n  /** 相等条件 */\n  condition?: (item: string, value: string | number | null) => boolean\n\n  /** 选择项标签集合 */\n  private $items!: NodeListOf<HTMLElement>\n\n  constructor({ container, value, onChange, onPick, list, template, condition }: PickerOptions) {\n    this.container = container\n    this.list = list\n    this.value = value ?? null\n    this.onChange = onChange // 更新数据时需要执行的函数\n    this.onPick = onPick // 更新数据时需要执行的函数\n    this.template = template\n    this.condition = condition\n    this.reload()\n  }\n\n  /** 重载，一般用于列表项更改 */\n  public reload(value?: string) {\n    render(templateWrap({ list: this.list, template: this.template }), this.container)\n    this.el = this.container.querySelector(`.${classPrefix}-picker`)!\n    this.$items = this.el.querySelectorAll(`.${classPrefix}-picker-item`) // 标签集合\n    this.$items.forEach((item) => {\n      item.addEventListener(\"click\", () => {\n        this.pick(item.getAttribute(\"data-value\"))\n      })\n    })\n    this.setValue(value ?? this.value)\n  }\n\n  /** 设置值 */\n  public setValue(value: string | number | null) {\n    this.$items.forEach((n, i) => {\n      if (\n        this.condition\n          ? this.condition(n.getAttribute(\"data-value\")!, value)\n          : n.getAttribute(\"data-value\") == value\n      ) {\n        n.classList.add(\"state-picked\")\n      } else {\n        n.classList.remove(\"state-picked\")\n      }\n    })\n    this.value = value\n    this.onChange?.(value)\n  }\n\n  /** 点选一个选项 */\n  public pick(value: string | null) {\n    this.setValue(value)\n    this.onPick?.(value)\n  }\n}\n","import { html, render, TemplateResult } from \"lit-html\"\nimport { classPrefix } from \"@/const\"\n\nconst templateWrap = ({\n  list,\n  template,\n}: {\n  list: PickerOptionsItem[]\n  template?: PickerItemTemplate\n}) => html`\n  <ul class=\"${classPrefix}-picker\">\n    ${list.map(\n      (item, index) => html`\n        <li class=\"${classPrefix}-picker-item\" data-value=\"${item.value}\">\n          ${template?.(item, index) || item.label || item.value}\n        </li>\n      `\n    )}\n  </ul>\n`\n\n/** 选择器函数 */\ntype PickerItemTemplate = (item: PickerOptionsItem, index?: number) => string | TemplateResult\n\ninterface PickerOptionsItem {\n  value: string\n  label?: string\n  disabled?: boolean\n  [key: string]: any\n}\n\ninterface MultiPickerOptions {\n  /** 绑定的dom对象 */\n  container: HTMLElement\n  /** 选择列表 */\n  list: PickerOptionsItem[]\n  /** 选择项标签模板 */\n  template?: PickerItemTemplate\n  /** 默认值(不填的情况下默认值为[]) */\n  value?: string[]\n  /** 值更改时触发 */\n  onChange?: (value: string[]) => void\n  /** 选择/取消选择某一项时触发 */\n  onToggle?: (value: string, flag: boolean) => void\n}\n\n/** 多项选择器 */\nexport class MultiPicker implements MultiPickerOptions {\n  readonly container: HTMLElement\n\n  readonly template?: PickerItemTemplate\n\n  list: PickerOptionsItem[]\n\n  valueSet: Set<string>\n\n  /** 已选值 */\n  get value() {\n    return [...this.valueSet]\n  }\n\n  onChange?: (value: string[]) => void\n\n  onToggle?: (value: string, flag: boolean) => void\n\n  el!: HTMLElement\n\n  /** 选择项标签集合 */\n  private $items!: NodeListOf<HTMLElement>\n\n  constructor({ container, value = [], list, onChange, onToggle }: MultiPickerOptions) {\n    this.container = container\n    this.list = list\n    this.valueSet = new Set(value)\n    this.onChange = onChange // 更新数据时需要执行的函数\n    this.onToggle = onToggle // 更新数据时需要执行的函数\n    this.reload()\n  }\n\n  /** 重载，一般用于列表项更改 */\n  public reload(value?: string[]) {\n    render(templateWrap({ list: this.list, template: this.template }), this.container)\n    this.el = this.container.querySelector(`.${classPrefix}-picker`)!\n    this.$items = this.el.querySelectorAll(`.${classPrefix}-picker-item`) // 标签集合\n    this.$items.forEach((item) => {\n      item.addEventListener(\"click\", () => {\n        this.toggle(item.getAttribute(\"data-value\")!)\n      })\n    })\n    this.setValue(value ?? this.value)\n  }\n\n  /** 设置值 */\n  public setValue(value: string[]) {\n    this.valueSet = new Set(value)\n    this.$items.forEach((n, i) => {\n      if (this.valueSet.has(n.getAttribute(\"data-value\")!)) {\n        n.classList.add(\"state-picked\")\n      } else {\n        n.classList.remove(\"state-picked\")\n      }\n    })\n    this.onChange?.(value)\n  }\n\n  /** 切换一个选项的选择状态 */\n  public toggle(value: string, flag?: boolean) {\n    const b = flag == null ? !this.valueSet.has(value) : flag\n    if (b) {\n      this.valueSet.add(value)\n    } else {\n      this.valueSet.delete(value)\n    }\n    this.$items.forEach((n, i) => {\n      if (n.getAttribute(\"data-value\") == value) {\n        n.classList.toggle(\"state-picked\", b)\n      }\n    })\n    this.onChange?.(this.value)\n    this.onToggle?.(value, b)\n  }\n}\n","import { html, render } from \"lit-html\"\nimport { classPrefix } from \"@/const\"\n\nconst templateWrap = ({ label }: { label?: string }) => html`\n  <div class=\"${classPrefix}-checkbox\">\n    <div class=\"${classPrefix}-checkbox-icon\"></div>\n    <div class=\"${classPrefix}-checkbox-label\">${label}</div>\n  </div>\n`\n\ninterface CheckboxOptions {\n  /** 挂载容器 */\n  container: HTMLElement\n  /** 标签 */\n  label?: string\n  /** 不可点选 */\n  disabled?: boolean\n  /** 默认值(不填的情况下默认值为false) */\n  value?: boolean\n  /** 值更改时触发 */\n  onChange?: (value: boolean) => void\n  /** 切换状态时触发 */\n  onToggle?: (value: boolean) => void\n}\n\n/** 开关 */\nexport class Checkbox implements CheckboxOptions {\n  readonly container: HTMLElement\n\n  onChange?: (value: boolean) => void\n\n  onToggle?: (value: boolean) => void\n\n  label?: string\n\n  /** 当前值 */\n  value: boolean\n\n  el: HTMLElement\n\n  constructor({ container, value = false, onChange, onToggle, label }: CheckboxOptions) {\n    this.container = container\n    this.value = value\n    this.onChange = onChange // 更新数据时需要执行的函数\n    this.onToggle = onToggle\n    this.label = label\n    // 注入模板\n    render(templateWrap({ label: this.label }), this.container)\n\n    this.el = this.container.querySelector(`.${classPrefix}-checkbox`)!\n    this.el.addEventListener(\"click\", () => {\n      this.toggle()\n    })\n\n    this.setValue(this.value)\n  }\n\n  /** 设置开关状态 */\n  public setValue(value: boolean) {\n    this.value = value\n    this.el.classList.toggle(\"state-checked\", value)\n    this.onChange?.(value)\n  }\n\n  /** 点按开关 */\n  public toggle(value = !this.value) {\n    this.setValue(value)\n    this.onToggle?.(value)\n  }\n}\n","import { html, render } from \"lit-html\"\nimport { SliderVertical } from \"@/ui/components\"\nimport MfunsPlayer from \"@/player\"\nimport { classPrefix } from \"@/const\"\n\nconst template = () => html`\n  <div class=\"${classPrefix}-controller-button ${classPrefix}-controller-volume\">\n    <div class=\"${classPrefix}-controller-icon-wrap\">\n      <i class=\"${classPrefix}-controller-icon mp-icon-volume\"></i>\n      <i class=\"${classPrefix}-controller-icon mp-icon-volume-off\"></i>\n    </div>\n\n    <div class=\"${classPrefix}-controller-panel-wrap\">\n      <div class=\"${classPrefix}-controller-panel\">\n        <div class=\"${classPrefix}-controller-volume-text\">0</div>\n        <div class=\"${classPrefix}-controller-volume-slider\"></div>\n      </div>\n    </div>\n  </div>\n`\n\nexport default class ButtonVolume {\n  player: MfunsPlayer\n  el: HTMLElement\n  $iconWrap: HTMLElement\n  $slider: HTMLElement\n  $text: HTMLElement\n  slider!: SliderVertical\n\n  constructor(player: MfunsPlayer, container: HTMLElement) {\n    this.player = player\n    const fragment = new DocumentFragment()\n    render(template(), fragment)\n    this.el = fragment.querySelector(`.${classPrefix}-controller-button`)!\n    this.$iconWrap = fragment.querySelector(`.${classPrefix}-controller-icon-wrap`)!\n    this.$slider = fragment.querySelector(`.${classPrefix}-controller-volume-slider`)!\n    this.$text = fragment.querySelector(`.${classPrefix}-controller-volume-text`)!\n    this.init()\n    container.appendChild(fragment)\n  }\n\n  private init() {\n    this.slider = new SliderVertical({\n      container: this.$slider,\n      min: 0,\n      max: 100,\n      step: 1,\n      value: this.player.video.el.volume * 100,\n      onChange: (value) => {\n        this.$text.innerText = value.toString()\n      },\n      onDrag: (value) => {\n        this.player.setVolume(value / 100)\n      },\n      onDragStart: (value) => {\n        if (this.player.video.el.muted && value != 0) {\n          this.player.mute(false)\n        }\n        this.el.classList.add(\"state-control\")\n        this.player.controller.setControl(true)\n      },\n      onDragEnd: () => {\n        this.el.classList.remove(\"state-control\")\n        this.player.controller.setControl(false)\n      },\n    })\n    this.player.on(\"volumechange\", (value: number, muted: boolean) => {\n      if (muted) {\n        this.el.classList.add(\"state-muted\")\n        this.slider.setValue(0)\n      } else {\n        this.el.classList.remove(\"state-muted\")\n        this.slider.setValue(Math.round(value * 100))\n      }\n      if (value == 0) {\n        this.el.classList.add(\"state-muted\")\n      }\n    })\n    this.$iconWrap.addEventListener(\"click\", () => {\n      if (this.player.video.el.muted || this.player.video.el.volume == 0) {\n        if (this.player.video.el.volume == 0) {\n          this.player.video.el.volume = 0.1\n        }\n        this.player.mute(false)\n      } else {\n        this.player.mute(true)\n      }\n    })\n  }\n}\n","import { html, render } from \"lit-html\"\nimport { Picker, Slider, Checkbox } from \"@/ui/components\"\nimport MfunsPlayer from \"@/player\"\nimport { classPrefix } from \"@/const\"\nimport { PlayerOptions } from \"@/types\"\n\nconst template = () => html`\n  <div class=\"${classPrefix}-controller-button ${classPrefix}-controller-settings\">\n    <div class=\"${classPrefix}-controller-icon-wrap\">\n      <i class=\"${classPrefix}-controller-icon mp-icon-settings\"></i>\n    </div>\n    <div class=\"${classPrefix}-controller-panel-wrap\">\n      <div class=\"${classPrefix}-controller-panel ${classPrefix}-controller-panel-settings\">\n        <div class=\"${classPrefix}-panel-row\">\n          <div class=\"${classPrefix}-row-label\">播放倍速</div>\n          <div class=\"${classPrefix}-settings-rate-picker\"></div>\n        </div>\n        <div class=\"${classPrefix}-panel-row\">\n          <div class=\"${classPrefix}-row-label\">视频比例</div>\n          <div class=\"${classPrefix}-settings-scale-picker\"></div>\n        </div>\n        <div class=\"${classPrefix}-panel-row\">\n          <div class=\"${classPrefix}-row-label\">界面设置</div>\n        </div>\n        <div class=\"${classPrefix}-panel-row\">\n          <div class=\"${classPrefix}-settings-solid-checkbox\"></div>\n          <div class=\"${classPrefix}-settings-showPrevButton-checkbox\"></div>\n        </div>\n      </div>\n    </div>\n  </div>\n`\n\nexport default class ButtonSettings {\n  player: MfunsPlayer\n  el: HTMLElement\n  $iconWrap: HTMLElement\n\n  $ratePicker: HTMLElement\n  $scalePicker: HTMLElement\n  $solidCheckbox: HTMLElement\n  $showPrevButtonCheckbox: HTMLElement\n\n  pickerRate!: Picker\n  pickerScale!: Picker\n  checkboxSolid!: Checkbox\n  checkboxShowPrevButton!: Checkbox\n\n  constructor(player: MfunsPlayer, container: HTMLElement, options: PlayerOptions) {\n    this.player = player\n    const fragment = new DocumentFragment()\n    render(template(), fragment)\n    this.el = fragment.querySelector(`.${classPrefix}-controller-button`)!\n    this.$iconWrap = this.el.querySelector(`.${classPrefix}-controller-icon-wrap`)!\n\n    this.$ratePicker = this.el.querySelector(`.${classPrefix}-settings-rate-picker`)!\n    this.$scalePicker = this.el.querySelector(`.${classPrefix}-settings-scale-picker`)!\n    this.$solidCheckbox = this.el.querySelector(`.${classPrefix}-settings-solid-checkbox`)!\n    this.$showPrevButtonCheckbox = this.el.querySelector(\n      `.${classPrefix}-settings-showPrevButton-checkbox`\n    )!\n\n    this.init(options)\n    container.appendChild(fragment)\n  }\n\n  private init(options: PlayerOptions) {\n    this.pickerRate = new Picker({\n      container: this.$ratePicker,\n      list: [\n        { value: 0.5, label: \"0.5\" },\n        { value: 0.75, label: \"0.75\" },\n        { value: 1, label: \"1.0\" },\n        { value: 1.25, label: \"1.25\" },\n        { value: 1.5, label: \"1.5\" },\n        { value: 2, label: \"2.0\" },\n      ],\n      value: 1,\n      onPick: (value) => {\n        this.player.setPlaybackRate(Number(value))\n      },\n    })\n    this.player.on(\"ratechange\", (rate: number) => {\n      this.pickerRate.setValue(rate)\n    })\n\n    this.pickerScale = new Picker({\n      container: this.$scalePicker,\n      list: [{ value: \"\", label: \"自动\" }, { value: \"16:9\" }, { value: \"4:3\" }],\n      value: \"\",\n      onPick: (value) => {\n        this.player.video.setRatio(\n          value ? ((value as string).split(\":\").map((v) => Number(v)) as [number, number]) : null\n        )\n      },\n    })\n    this.player.on(\"change:aspectRatio\", (ratio) => {\n      this.pickerRate.setValue(ratio ? ratio.join(\":\") : \"\")\n    })\n\n    if (options.feature?.solid) {\n      this.checkboxSolid = new Checkbox({\n        container: this.$solidCheckbox,\n        label: \"固定控制栏\",\n        onToggle: (value) => {\n          this.player.mode.solid(value)\n        },\n      })\n    }\n    this.checkboxShowPrevButton = new Checkbox({\n      container: this.$showPrevButtonCheckbox,\n      label: \"显示上一P按钮（多P下生效）\",\n      onToggle: (value) => {\n        this.player.controller.buttonPrev.show(value)\n      },\n    })\n  }\n}\n","import { html, render } from \"lit-html\"\nimport MfunsPlayer from \"@/player\"\nimport { classPrefix } from \"@/const\"\n\nconst template = () => html`\n  <div class=\"${classPrefix}-controller-button ${classPrefix}-controller-part\">\n    <div class=\"${classPrefix}-controller-icon-wrap\">\n      <div class=\"${classPrefix}-controller-texticon\">P0</div>\n    </div>\n    <div class=\"${classPrefix}-tooltip\">分P列表</div>\n  </div>\n`\n\nexport default class ButtonPart {\n  player: MfunsPlayer\n  el: HTMLElement\n  $iconWrap: HTMLElement\n  $tooltip: HTMLElement\n  $texticon: HTMLElement\n\n  constructor(player: MfunsPlayer, container: HTMLElement) {\n    this.player = player\n    const fragment = new DocumentFragment()\n    render(template(), fragment)\n    this.el = fragment.querySelector(`.${classPrefix}-controller-button`)!\n    this.$iconWrap = fragment.querySelector(`.${classPrefix}-controller-icon-wrap`)!\n    this.$tooltip = fragment.querySelector(`.${classPrefix}-tooltip`)!\n    this.$texticon = fragment.querySelector(`.${classPrefix}-controller-texticon`)!\n    this.init()\n    container.appendChild(fragment)\n  }\n\n  private init() {\n    if (this.player.video.list.length < 2) {\n      this.el.classList.add(\"state-singlepart\")\n    }\n    this.$iconWrap.addEventListener(\"click\", () => {\n      this.player.side.toggle(\"partlist\")\n    })\n    this.player.on(\"part\", (p) => {\n      this.$texticon.innerText = `P${p}`\n    })\n  }\n}\n","import { html, render } from \"lit-html\"\nimport MfunsPlayer from \"@/player\"\nimport { classPrefix } from \"@/const\"\n\nconst template = () => html`\n  <div class=\"${classPrefix}-controller-button ${classPrefix}-controller-webfull\">\n    <div class=\"${classPrefix}-controller-icon-wrap\">\n      <i class=\"${classPrefix}-controller-icon mp-icon-webfull\"></i>\n      <i class=\"${classPrefix}-controller-icon mp-icon-webfull-exit\"></i>\n    </div>\n    <div class=\"${classPrefix}-tooltip\">网页全屏</div>\n  </div>\n`\n\nexport default class ButtonWebfull {\n  player: MfunsPlayer\n  el: HTMLElement\n  $iconWrap: HTMLElement\n  $tooltip: HTMLElement\n\n  constructor(player: MfunsPlayer, container: HTMLElement) {\n    this.player = player\n    const fragment = new DocumentFragment()\n    render(template(), fragment)\n    this.el = fragment.querySelector(`.${classPrefix}-controller-button`)!\n    this.$iconWrap = fragment.querySelector(`.${classPrefix}-controller-icon-wrap`)!\n    this.$tooltip = fragment.querySelector(`.${classPrefix}-tooltip`)!\n    this.init()\n    container.appendChild(fragment)\n  }\n\n  private init() {\n    this.player.on(\"webfull\", () => {\n      this.el.classList.add(\"state-webfull\")\n      this.$tooltip.innerText = \"退出网页全屏\"\n    })\n    this.player.on(\"webfull_exit\", () => {\n      this.el.classList.remove(\"state-webfull\")\n      this.$tooltip.innerText = \"网页全屏\"\n    })\n    this.$iconWrap.addEventListener(\"click\", () => {\n      if (this.player.isWebfull) {\n        this.player.exitWebfull()\n      } else {\n        this.player.webfull()\n      }\n    })\n  }\n}\n","import { html, render } from \"lit-html\"\nimport MfunsPlayer from \"@/player\"\nimport { classPrefix } from \"@/const\"\n\nconst template = () => html`\n  <div class=\"${classPrefix}-controller-button ${classPrefix}-controller-prev\">\n    <div class=\"${classPrefix}-controller-icon-wrap\">\n      <i class=\"${classPrefix}-controller-icon mp-icon-prev\"></i>\n    </div>\n    <div class=\"${classPrefix}-tooltip\">上一P</div>\n  </div>\n`\n\nexport default class ButtonPrev {\n  player: MfunsPlayer\n  el: HTMLElement\n  $iconWrap: HTMLElement\n  $tooltip: HTMLElement\n\n  constructor(player: MfunsPlayer, container: HTMLElement) {\n    this.player = player\n    const fragment = new DocumentFragment()\n    render(template(), fragment)\n    this.el = fragment.querySelector(`.${classPrefix}-controller-button`)!\n    this.$iconWrap = fragment.querySelector(`.${classPrefix}-controller-icon-wrap`)!\n    this.$tooltip = fragment.querySelector(`.${classPrefix}-tooltip`)!\n    this.init()\n    container.appendChild(fragment)\n  }\n\n  private init() {\n    this.player.on(\"part\", (p) => {\n      if (p > 1) {\n        this.el.classList.remove(\"state-firstpart\")\n      } else {\n        this.el.classList.add(\"state-firstpart\")\n      }\n    })\n    this.$iconWrap.addEventListener(\"click\", () => {\n      this.player.prev()\n    })\n  }\n  public show(flag: boolean) {\n    this.el.style.display = flag ? \"\" : \"none\"\n  }\n}\n","import { html, render } from \"lit-html\"\nimport MfunsPlayer from \"@/player\"\nimport { classPrefix } from \"@/const\"\n\nconst template = () => html`\n  <div class=\"${classPrefix}-controller-button ${classPrefix}-controller-next\">\n    <div class=\"${classPrefix}-controller-icon-wrap\">\n      <i class=\"${classPrefix}-controller-icon mp-icon-next\"></i>\n    </div>\n    <div class=\"${classPrefix}-tooltip\">下一P</div>\n  </div>\n`\n\nexport default class ButtonNext {\n  player: MfunsPlayer\n  el: HTMLElement\n  $iconWrap: HTMLElement\n  $tooltip: HTMLElement\n\n  constructor(player: MfunsPlayer, container: HTMLElement) {\n    this.player = player\n    const fragment = new DocumentFragment()\n    render(template(), fragment)\n    this.el = fragment.querySelector(`.${classPrefix}-controller-button`)!\n    this.$iconWrap = fragment.querySelector(`.${classPrefix}-controller-icon-wrap`)!\n    this.$tooltip = fragment.querySelector(`.${classPrefix}-tooltip`)!\n    this.init()\n    container.appendChild(fragment)\n  }\n\n  private init() {\n    this.player.on(\"part\", (p) => {\n      if (p < this.player.video.list.length) {\n        this.el.classList.remove(\"state-lastpart\")\n      } else {\n        this.el.classList.add(\"state-lastpart\")\n      }\n    })\n    this.$iconWrap.addEventListener(\"click\", () => {\n      this.player.next()\n    })\n  }\n}\n","export enum keyCode {\n  Backspace = 8,\n  Tab = 9,\n  Enter = 13,\n  Shift = 16,\n  Ctrl = 17,\n  Alt = 18,\n  PauseBreak = 19,\n  CapsLock = 20,\n  Escape = 27,\n  Space = 32,\n  PageUp = 33,\n  PageDown = 34,\n  End = 35,\n  Home = 36,\n\n  LeftArrow = 37,\n  UpArrow = 38,\n  RightArrow = 39,\n  DownArrow = 40,\n\n  Insert = 45,\n  Delete = 46,\n\n  Zero = 48,\n  ClosedParen = Zero,\n  One = 49,\n  ExclamationMark = One,\n  Two = 50,\n  AtSign = Two,\n  Three = 51,\n  PoundSign = Three,\n  Hash = PoundSign,\n  Four = 52,\n  DollarSign = Four,\n  Five = 53,\n  PercentSign = Five,\n  Six = 54,\n  Caret = Six,\n  Hat = Caret,\n  Seven = 55,\n  Ampersand = Seven,\n  Eight = 56,\n  Star = Eight,\n  Asterik = Star,\n  Nine = 57,\n  OpenParen = Nine,\n\n  A = 65,\n  B = 66,\n  C = 67,\n  D = 68,\n  E = 69,\n  F = 70,\n  G = 71,\n  H = 72,\n  I = 73,\n  J = 74,\n  K = 75,\n  L = 76,\n  M = 77,\n  N = 78,\n  O = 79,\n  P = 80,\n  Q = 81,\n  R = 82,\n  S = 83,\n  T = 84,\n  U = 85,\n  V = 86,\n  W = 87,\n  X = 88,\n  Y = 89,\n  Z = 90,\n\n  LeftWindowKey = 91,\n  RightWindowKey = 92,\n  SelectKey = 93,\n\n  Numpad0 = 96,\n  Numpad1 = 97,\n  Numpad2 = 98,\n  Numpad3 = 99,\n  Numpad4 = 100,\n  Numpad5 = 101,\n  Numpad6 = 102,\n  Numpad7 = 103,\n  Numpad8 = 104,\n  Numpad9 = 105,\n\n  Multiply = 106,\n  Add = 107,\n  Subtract = 109,\n  DecimalPoint = 110,\n  Divide = 111,\n\n  F1 = 112,\n  F2 = 113,\n  F3 = 114,\n  F4 = 115,\n  F5 = 116,\n  F6 = 117,\n  F7 = 118,\n  F8 = 119,\n  F9 = 120,\n  F10 = 121,\n  F11 = 122,\n  F12 = 123,\n\n  NumLock = 144,\n  ScrollLock = 145,\n\n  SemiColon = 186,\n  Equals = 187,\n  Comma = 188,\n  Dash = 189,\n  Period = 190,\n  UnderScore = Dash,\n  PlusSign = Equals,\n  ForwardSlash = 191,\n  Tilde = 192,\n  GraveAccent = Tilde,\n\n  OpenBracket = 219,\n  ClosedBracket = 221,\n  Quote = 222,\n}\n","import { html, render } from \"lit-html\"\nimport MfunsPlayer from \"@/player\"\nimport { classPrefix } from \"@/const\"\n\nconst template = () => html`\n  <div class=\"${classPrefix}-controller-button ${classPrefix}-controller-danmaku-switch state-on\">\n    <div class=\"${classPrefix}-controller-icon-wrap\">\n      <i class=\"${classPrefix}-controller-icon mp-icon-danmaku\"></i>\n      <i class=\"${classPrefix}-controller-icon mp-icon-danmaku-off\"></i>\n    </div>\n    <div class=\"${classPrefix}-tooltip\">关闭弹幕</div>\n  </div>\n`\n\nexport default class ButtonDanmakuSwitch {\n  player: MfunsPlayer\n  el: HTMLElement\n  $iconWrap: HTMLElement\n  $tooltip: HTMLElement\n\n  constructor(player: MfunsPlayer, container: HTMLElement) {\n    this.player = player\n    const fragment = new DocumentFragment()\n    render(template(), fragment)\n    this.el = fragment.querySelector(`.${classPrefix}-controller-button`)!\n    this.$iconWrap = fragment.querySelector(`.${classPrefix}-controller-icon-wrap`)!\n    this.$tooltip = fragment.querySelector(`.${classPrefix}-tooltip`)!\n    this.init()\n    container.appendChild(fragment)\n  }\n\n  private init() {\n    this.player.on(\"danmaku:off\", () => {\n      this.el.classList.remove(\"state-on\")\n      this.$tooltip.innerText = \"开启弹幕\"\n    })\n    this.player.on(\"danmaku:on\", () => {\n      this.el.classList.add(\"state-on\")\n      this.$tooltip.innerText = \"关闭弹幕\"\n    })\n    this.$iconWrap.addEventListener(\"click\", () => {\n      this.player.danmaku.toggle()\n    })\n  }\n}\n","import { MultiPicker, Picker, Slider } from \"@/ui/components\"\nimport { html, render } from \"lit-html\"\nimport MfunsPlayer from \"@/player\"\nimport { classPrefix } from \"@/const\"\nimport { PlayerOptions } from \"@/types\"\n\nconst template = () => html`\n  <div class=\"${classPrefix}-controller-button ${classPrefix}-controller-danmaku-settings\">\n    <div class=\"${classPrefix}-controller-icon-wrap\">\n      <i class=\"${classPrefix}-controller-icon mp-icon-danmaku-settings\"></i>\n    </div>\n    <div class=\"${classPrefix}-controller-panel-wrap\">\n      <div class=\"${classPrefix}-controller-panel ${classPrefix}-controller-panel-danmaku-settings\">\n        <div class=\"${classPrefix}-panel-row\">\n          <div class=\"${classPrefix}-row-label\">弹幕类型屏蔽</div>\n          <div class=\"${classPrefix}-danmaku-settings-filter-picker\"></div>\n        </div>\n        <div class=\"${classPrefix}-panel-row\">\n          <div class=\"${classPrefix}-row-label\">不透明度</div>\n          <div\n            class=\"${classPrefix}-danmaku-settings-opacity-slider ${classPrefix}-slider-wrap\"\n          ></div>\n          <div class=\"${classPrefix}-danmaku-settings-opacity-value ${classPrefix}-row-value\"></div>\n        </div>\n        <div class=\"${classPrefix}-panel-row\">\n          <div class=\"${classPrefix}-row-label\">显示区域</div>\n          <div class=\"${classPrefix}-danmaku-settings-area-slider ${classPrefix}-slider-wrap\"></div>\n          <div class=\"${classPrefix}-danmaku-settings-area-value ${classPrefix}-row-value\"></div>\n        </div>\n        <div class=\"${classPrefix}-panel-row\">\n          <div class=\"${classPrefix}-row-label\">文字大小</div>\n          <div class=\"${classPrefix}-danmaku-settings-size-slider ${classPrefix}-slider-wrap\"></div>\n          <div class=\"${classPrefix}-danmaku-settings-size-value ${classPrefix}-row-value\"></div>\n        </div>\n        <div class=\"${classPrefix}-panel-row\">\n          <div class=\"${classPrefix}-row-label\">弹幕速度</div>\n          <div\n            class=\"${classPrefix}-danmaku-settings-speed-slider  ${classPrefix}-slider-wrap\"\n          ></div>\n          <div class=\"${classPrefix}-danmaku-settings-speed-value ${classPrefix}-row-value\"></div>\n        </div>\n      </div>\n    </div>\n  </div>\n`\n\nexport default class ButtonDanmakuSettings {\n  player: MfunsPlayer\n  el: HTMLElement\n  $iconWrap: HTMLElement\n\n  $filterPicker: HTMLElement\n  $opacitySlider: HTMLElement\n  $areaSlider: HTMLElement\n  $sizeSlider: HTMLElement\n  $speedSlider: HTMLElement\n\n  $opacityValue: HTMLElement\n  $areaValue: HTMLElement\n  $sizeValue: HTMLElement\n  $speedValue: HTMLElement\n\n  pickerFilter!: MultiPicker\n  sliderOpacity!: Slider\n  sliderArea!: Slider\n  sliderSize!: Slider\n  sliderSpeed!: Slider\n\n  constructor(player: MfunsPlayer, container: HTMLElement, options?: PlayerOptions) {\n    this.player = player\n    const fragment = new DocumentFragment()\n    render(template(), fragment)\n    this.el = fragment.querySelector(`.${classPrefix}-controller-button`)!\n    this.$iconWrap = this.el.querySelector(`.${classPrefix}-controller-icon-wrap`)!\n\n    this.$filterPicker = this.el.querySelector(`.${classPrefix}-danmaku-settings-filter-picker`)!\n    this.$opacitySlider = this.el.querySelector(`.${classPrefix}-danmaku-settings-opacity-slider`)!\n    this.$areaSlider = this.el.querySelector(`.${classPrefix}-danmaku-settings-area-slider`)!\n    this.$sizeSlider = this.el.querySelector(`.${classPrefix}-danmaku-settings-size-slider`)!\n    this.$speedSlider = this.el.querySelector(`.${classPrefix}-danmaku-settings-speed-slider`)!\n\n    this.$opacityValue = this.el.querySelector(`.${classPrefix}-danmaku-settings-opacity-value`)!\n    this.$areaValue = this.el.querySelector(`.${classPrefix}-danmaku-settings-area-value`)!\n    this.$sizeValue = this.el.querySelector(`.${classPrefix}-danmaku-settings-size-value`)!\n    this.$speedValue = this.el.querySelector(`.${classPrefix}-danmaku-settings-speed-value`)!\n\n    this.init()\n    container.appendChild(fragment)\n  }\n\n  private init() {\n    // 弹幕类型屏蔽\n    this.pickerFilter = new MultiPicker({\n      container: this.$filterPicker,\n      value: [],\n      list: [\n        { value: \"roll\", label: \"滚动\" },\n        { value: \"top\", label: \"顶部\" },\n        { value: \"bottom\", label: \"底部\" },\n        { value: \"color\", label: \"彩色\" },\n        { value: \"special\", label: \"特殊\" },\n      ],\n      onToggle: (value, flag) => {\n        this.player.danmaku.filter(value, flag)\n      },\n    })\n    // 不透明度\n    this.sliderOpacity = new Slider({\n      container: this.$opacitySlider,\n      min: 10,\n      max: 100,\n      step: 1,\n      value: 100,\n      onDrag: (value) => {\n        this.player.danmaku.setOpacity(value / 100)\n      },\n      onChange: (value) => {\n        this.$opacityValue.innerText = `${value}%`\n      },\n    })\n    // 显示区域\n    this.sliderArea = new Slider({\n      container: this.$areaSlider,\n      min: 1,\n      max: 9,\n      step: 1,\n      value: 2,\n      divider: true,\n      onDrag: (value) => {\n        const area = value / 8\n        this.player.danmaku.setArea(area == 9 ? 0 : area)\n      },\n      onChange: (value) => {\n        this.$areaValue.innerText = value < 8 ? `${value / 8}` : value == 8 ? \"不重叠\" : \"无限\"\n      },\n    })\n    // 文字大小\n    this.sliderSize = new Slider({\n      container: this.$sizeSlider,\n      min: 50,\n      max: 200,\n      step: 1,\n      value: 100,\n      onDrag: (value) => {\n        this.player.danmaku.setScale(value / 100)\n      },\n      onChange: (value) => {\n        this.$sizeValue.innerText = `${value}%`\n      },\n    })\n    // 弹幕速度\n    this.sliderSpeed = new Slider({\n      container: this.$speedSlider,\n      min: 20,\n      max: 180,\n      step: 10,\n      value: 100,\n      divider: 5,\n      onDrag: (value) => {\n        this.player.danmaku.setSpeed(value / 100)\n      },\n      onChange: (value) => {\n        this.$speedValue.innerText = `${value}%`\n      },\n    })\n  }\n}\n","import { PlayerOptions } from \"@/types\"\nimport { html, render } from \"lit-html\"\nimport MfunsPlayer from \"@/player\"\nimport { classPrefix } from \"@/const\"\nimport { Picker } from \"@/ui/components\"\nimport { color2Number } from \"@/utils\"\nimport DanmakuBar from \"../DanmakuBar\"\n\ndeclare global {\n  class EyeDropper {\n    open: () => Promise<{ sRGBHex: string }>\n  }\n}\n\nconst template = () => html`\n  <div class=\"${classPrefix}-controller-button ${classPrefix}-controller-danmaku-style\">\n    <div class=\"${classPrefix}-controller-icon-wrap\">\n      <i class=\"${classPrefix}-controller-icon mp-icon-text\"></i>\n    </div>\n    <div class=\"${classPrefix}-controller-panel-wrap\">\n      <div class=\"${classPrefix}-controller-panel ${classPrefix}-controller-panel-danmaku-style\">\n        <div class=\"${classPrefix}-panel-row\">\n          <div class=\"${classPrefix}-row-label\">字号</div>\n          <div class=\"${classPrefix}-danmaku-style-fontsize-picker\"></div>\n        </div>\n        <div class=\"${classPrefix}-panel-row\">\n          <div class=\"${classPrefix}-row-label\">模式</div>\n          <div class=\"${classPrefix}-danmaku-style-mode-picker\"></div>\n        </div>\n        <div class=\"${classPrefix}-panel-row\">\n          <div class=\"${classPrefix}-row-label\">颜色</div>\n          <input class=\"${classPrefix}-danmaku-style-color-input mp-input\" type=\"text\" value=\"#\" />\n          <div class=\"${classPrefix}-danmaku-style-color-preview\"></div>\n          ${EyeDropper\n            ? html`<button class=\"${classPrefix}-danmaku-style-color-dropper mp-button\">\n                拾取\n              </button>`\n            : \"\"}\n        </div>\n        <div class=\"${classPrefix}-danmaku-style-color-picker\"></div>\n      </div>\n    </div>\n  </div>\n`\n\nexport default class ButtonDanmakuStyle {\n  danmakuBar: DanmakuBar\n  player: MfunsPlayer\n  el: HTMLElement\n  $iconWrap: HTMLElement\n  $tooltip: HTMLElement\n\n  $fontsizePicker: HTMLElement\n  $modePicker: HTMLElement\n  $colorPicker: HTMLElement\n  $colorInput: HTMLInputElement\n  $colorPreview: HTMLElement\n  $colorDropper: HTMLElement | null\n\n  pickerFontsize!: Picker\n  pickerMode!: Picker\n  pickerColor!: Picker\n\n  constructor(danmakuBar: DanmakuBar, container: HTMLElement, options: PlayerOptions) {\n    this.danmakuBar = danmakuBar\n    this.player = danmakuBar.player\n    const fragment = new DocumentFragment()\n    render(template(), fragment)\n    this.el = fragment.querySelector(`.${classPrefix}-controller-button`)!\n    this.$iconWrap = this.el.querySelector(`.${classPrefix}-controller-icon-wrap`)!\n    this.$tooltip = this.el.querySelector(`.${classPrefix}-tooltip`)!\n\n    this.$fontsizePicker = this.el.querySelector(`.${classPrefix}-danmaku-style-fontsize-picker`)!\n    this.$modePicker = this.el.querySelector(`.${classPrefix}-danmaku-style-mode-picker`)!\n    this.$colorPicker = this.el.querySelector(`.${classPrefix}-danmaku-style-color-picker`)!\n    this.$colorInput = this.el.querySelector(`.${classPrefix}-danmaku-style-color-input`)!\n    this.$colorPreview = this.el.querySelector(`.${classPrefix}-danmaku-style-color-preview`)!\n    this.$colorDropper = this.el.querySelector(`.${classPrefix}-danmaku-style-color-dropper`)\n\n    this.init(options)\n    container.appendChild(fragment)\n  }\n\n  private init(options: PlayerOptions) {\n    this.pickerFontsize = new Picker({\n      container: this.$fontsizePicker,\n      value: 25,\n      list: (options.danmakuBar?.fontSizeList || defaultFontSizeList).map(([value, label]) => ({\n        value,\n        label,\n      })),\n      onChange: (value) => {\n        this.danmakuBar.danmakuFontSize = Number(value)\n      },\n    })\n    this.pickerMode = new Picker({\n      container: this.$modePicker,\n      value: 1,\n      list: [\n        { value: 1, label: \"滚动\" },\n        { value: 5, label: \"顶部\" },\n        { value: 4, label: \"底部\" },\n        { value: 6, label: \"逆向\" },\n      ].filter(\n        (item) => (options.danmakuBar?.modeList || defaultModeList).indexOf(item.value) > -1\n      ),\n      onChange: (value) => {\n        this.danmakuBar.danmakuMode = Number(value) || 1\n      },\n    })\n    this.pickerColor = new Picker({\n      container: this.$colorPicker,\n      value: \"#FFFFFF\",\n      list: (options.danmakuBar?.colorList || defaultColorList).map((item) => ({ value: item })),\n      onPick: (value) => {\n        this.danmakuBar.danmakuColor = color2Number(value as string)\n      },\n      onChange: (value) => {\n        this.$colorInput.value = value as string\n        this.$colorPreview.style.backgroundColor = value as string\n      },\n      template: (item) => html` <div style=\"background-color: ${item.value}\"></div> `,\n      condition: (item, value) => {\n        return item.toLowerCase() == (value as string).toLowerCase()\n      },\n    })\n    this.$colorInput.addEventListener(\"input\", (e) => {\n      const value = this.$colorInput.value\n      this.$colorInput.value = \"#\" + value.replace(/[^0-9A-Fa-f]/g, \"\").slice(0, 6)\n      if (/^#([0-9A-Fa-f]{6}|[0-9A-Fa-f]{3})$/.test(value)) {\n        this.pickerColor.pick(value)\n      }\n    })\n    if (this.$colorDropper) {\n      this.$colorDropper.onclick = () => {\n        if (EyeDropper) {\n          const dropper = new EyeDropper()\n          dropper.open().then(({ sRGBHex }) => {\n            this.pickerColor.pick(sRGBHex)\n          })\n        }\n      }\n    }\n  }\n}\n\nconst defaultFontSizeList: [number, string][] = [\n  [18, \"小\"],\n  [25, \"中\"],\n  [36, \"大\"],\n]\n\nconst defaultModeList = [1, 5, 4]\n\nconst defaultColorList = [\n  \"#FE0302\",\n  \"#FFFF00\",\n  \"#00CD00\",\n  \"#00FF00\",\n  \"#4E6EF2\",\n  \"#89D5FF\",\n  \"#7B7FF7\",\n  \"#757575\",\n  \"#FFFFFF\",\n  \"#FB7229\",\n]\n","import { DanmakuItem, DanmakuSendItem } from \"@/types\"\nimport { keyCode } from \"./../../utils/KeyCode.enum\"\nimport { PlayerOptions } from \"../../types\"\nimport MfunsPlayer from \"@/player\"\nimport { classPrefix } from \"@/const\"\nimport { html, render } from \"lit-html\"\nimport ButtonDanmakuSwitch from \"./button/ButtonDanmakuSwitch\"\nimport ButtonDanmakuSettings from \"./button/ButtonDanmakuSettings\"\nimport ButtonDanmakuStyle from \"./button/ButtonDanmakuStyle\"\nimport Controller from \".\"\n\nconst template = html`\n  <div class=\"${classPrefix}-danmakubar\">\n    <div class=\"${classPrefix}-danmakubar-slot\"></div>\n    <div class=\"${classPrefix}-danmakubar-input-wrap\">\n      <div class=\"${classPrefix}-danmakubar-input-slot\"></div>\n      <input type=\"text\" autocompleted=\"new-password\" class=\"${classPrefix}-danmakubar-input\" />\n      <!-- \n      <div class=\"${classPrefix}-danmakubar-status-loading\">弹幕功能加载中...</div>\n      <div class=\"${classPrefix}-danmakubar-status-login\">需要登录后才能发送弹幕哦~</div>\n      -->\n      <div class=\"${classPrefix}-danmakubar-send\">发送</div>\n    </div>\n  </div>\n`\n\nexport default class DanmakuBar {\n  buttonDanmakuSwitch: ButtonDanmakuSwitch\n  buttonDanmakuSettings: ButtonDanmakuSettings\n  buttonDanmakuStyle: ButtonDanmakuStyle\n\n  el: HTMLElement\n  $send: HTMLElement\n  $input: HTMLInputElement\n  $slot: HTMLElement\n  $inputSlot: HTMLElement\n\n  controller: Controller\n  player: MfunsPlayer\n\n  danmakuColor = 16777215\n  danmakuMode = 1\n  danmakuFontSize = 25\n\n  /** 冷却计时器 */\n  coolDownTimer = 0\n\n  constructor(controller: Controller, options: PlayerOptions) {\n    this.controller = controller\n    this.player = controller.player\n    // const container = this.controller.$center\n    const container = this.player.template.$footbar\n    render(template, container)\n    this.el = container.querySelector(`.${classPrefix}-danmakubar`)!\n    this.$send = this.el.querySelector(`.${classPrefix}-danmakubar-send`)!\n    this.$input = this.el.querySelector(`.${classPrefix}-danmakubar-input`)!\n    this.$slot = this.el.querySelector(`.${classPrefix}-danmakubar-slot`)!\n    this.$inputSlot = this.el.querySelector(`.${classPrefix}-danmakubar-input-slot`)!\n\n    this.buttonDanmakuSwitch = new ButtonDanmakuSwitch(this.player, this.$slot)\n    this.buttonDanmakuSettings = new ButtonDanmakuSettings(this.player, this.$slot)\n\n    this.buttonDanmakuStyle = new ButtonDanmakuStyle(this, this.$inputSlot, options)\n\n    this.player.on(\"fullscreen\", () => {\n      this.moveToController()\n    })\n    this.player.on(\"webfull\", () => {\n      this.moveToController()\n    })\n    this.player.on(\"fullscreen_exit\", () => {\n      this.moveToFootbar()\n    })\n    this.player.on(\"webfull_exit\", () => {\n      this.moveToFootbar()\n    })\n    this.$input.addEventListener(\"keydown\", (e) => {\n      if (e.keyCode == keyCode.Enter) {\n        this.send()\n      }\n    })\n    this.$send.onclick = () => {\n      this.send()\n    }\n\n    this.setPlaceHolder(options.danmakuBar?.placeholder || defaultPlaceholder)\n  }\n  private moveToFootbar() {\n    this.player.template.$footbar.appendChild(this.el)\n    this.controller.$center.classList.remove(\"state-bar\")\n  }\n  private moveToController() {\n    this.controller.$center.appendChild(this.el)\n    this.controller.$center.classList.add(\"state-bar\")\n  }\n  setPlaceHolder(placeholder: string) {\n    this.$input.placeholder = placeholder\n  }\n  /** 执行弹幕发送操作 */\n  private send() {\n    // 如果内容为空或只有空格，则不进行发送操作\n    if (!this.$input.value.trim() || this.coolDownTimer) return\n    this.player.danmaku.operate.send(this.generateDanmaku())\n    this.$input.value = \"\"\n  }\n  /** 设置弹幕发送冷却 */\n  public setCoolDown(time: number) {\n    if (this.coolDownTimer) {\n      window.clearInterval(this.coolDownTimer)\n    }\n    let t = Math.round(time)\n    this.$send.classList.add(\"state-disabled\")\n    this.$send.innerText = `${t}秒`\n    this.coolDownTimer = window.setInterval(() => {\n      t -= 1\n      if (t) {\n        this.$send.innerText = `${t}秒`\n      } else {\n        this.$send.innerText = \"发送\"\n        this.$send.classList.remove(\"state-disabled\")\n        window.clearInterval(this.coolDownTimer)\n        this.coolDownTimer = 0\n      }\n    }, 1000)\n  }\n  generateDanmaku(): DanmakuSendItem {\n    return {\n      time: this.player.time,\n      content: this.$input.value,\n      mode: this.danmakuMode,\n      color: this.danmakuColor,\n      size: this.danmakuFontSize,\n    }\n  }\n}\n\nconst defaultPlaceholder = \"发条弹幕吧~\"\n","import { html, render } from \"lit-html\"\nimport { classPrefix } from \"@/const\"\nimport MfunsPlayer from \"@/player\"\nimport { PlayerOptions } from \"@/types\"\nimport ProgressBar from \"./ProgressBar\"\nimport { fullScreenEnabled, pictureInPictureEnabled } from \"@/utils\"\nimport ButtonFullscreen from \"./button/ButtonFullscreen\"\nimport ButtonPip from \"./button/ButtonPip\"\nimport ButtonPlay from \"./button/ButtonPlay\"\nimport LabelTime from \"./label/LabelTime\"\nimport ButtonLoop from \"./button/ButtonLoop\"\nimport ButtonVolume from \"./button/ButtonVolume\"\nimport ButtonSettings from \"./button/ButtonSettings\"\nimport ButtonPart from \"./button/ButtonPart\"\nimport ButtonWebfull from \"./button/ButtonWebfull\"\nimport ButtonPrev from \"./button/ButtonPrev\"\nimport ButtonNext from \"./button/ButtonNext\"\nimport ButtonDanmakulist from \"./button/ButtonDanmakulist\"\nimport DanmakuBar from \"./DanmakuBar\"\n\nconst template = () => html`\n  <div class=\"${classPrefix}-controller-mask\"></div>\n  <div class=\"${classPrefix}-controller mp-crystal\">\n    <div class=\"${classPrefix}-controller-progress\"></div>\n    <div class=\"${classPrefix}-controller-content\">\n      <div class=\"${classPrefix}-controller-left\"></div>\n      <div class=\"${classPrefix}-controller-center\"></div>\n      <div class=\"${classPrefix}-controller-right\"></div>\n    </div>\n  </div>\n`\n\n/** 控制栏 */\nexport default class Controller {\n  player: MfunsPlayer\n  container: HTMLElement\n  el: HTMLElement\n\n  $progress: HTMLElement\n  $content: HTMLElement\n  $left: HTMLElement\n  $center: HTMLElement\n  $right: HTMLElement\n\n  progressBar: ProgressBar\n  danmakuBar: DanmakuBar\n\n  buttonPlay: ButtonPlay\n  buttonPrev: ButtonPrev\n  buttonNext: ButtonNext\n  buttonLoop: ButtonLoop\n  buttonVolume: ButtonVolume\n  buttonSettings: ButtonSettings\n  // buttonDanmakulist: ButtonDanmakulist\n  buttonPart: ButtonPart\n  buttonPip?: ButtonPip\n  buttonWebfull?: ButtonWebfull\n  buttonFullScreen?: ButtonFullscreen\n\n  labelTime: LabelTime\n\n  isHover = false\n  isControl = false\n\n  constructor(player: MfunsPlayer, options: PlayerOptions) {\n    this.player = player\n    this.container = player.template.$controllerWrap\n    const fragment = new DocumentFragment()\n    render(template(), fragment)\n    this.el = fragment.querySelector(`.${classPrefix}-controller`)!\n    this.$progress = this.el.querySelector(`.${classPrefix}-controller-progress`)!\n    this.$content = this.el.querySelector(`.${classPrefix}-controller-content`)!\n    this.$left = this.el.querySelector(`.${classPrefix}-controller-left`)!\n    this.$center = this.el.querySelector(`.${classPrefix}-controller-center`)!\n    this.$right = this.el.querySelector(`.${classPrefix}-controller-right`)!\n\n    // 进度条\n    this.progressBar = new ProgressBar(this, options)\n    // 弹幕栏\n    this.danmakuBar = new DanmakuBar(this, options)\n\n    // 控制栏左侧部件\n    this.buttonPrev = new ButtonPrev(this.player, this.$left)\n    this.buttonPlay = new ButtonPlay(this.player, this.$left)\n    this.buttonNext = new ButtonNext(this.player, this.$left)\n    this.labelTime = new LabelTime(this.player, this.$left)\n    this.buttonLoop = new ButtonLoop(this.player, this.$left)\n    // 控制栏右侧部件\n    // this.buttonDanmakulist = new ButtonDanmakulist(this.player, this.$right)\n    this.buttonPart = new ButtonPart(this.player, this.$right)\n    this.buttonVolume = new ButtonVolume(this.player, this.$right)\n    this.buttonSettings = new ButtonSettings(this.player, this.$right, options)\n    if (pictureInPictureEnabled) this.buttonPip = new ButtonPip(this.player, this.$right)\n    if (options.feature?.webfull) this.buttonWebfull = new ButtonWebfull(this.player, this.$right)\n    if (fullScreenEnabled) this.buttonFullScreen = new ButtonFullscreen(this.player, this.$right)\n\n    this.init()\n\n    this.container.appendChild(fragment)\n  }\n  init() {\n    this.buttonPrev.show(false)\n    this.container.addEventListener(\"mouseenter\", () => {\n      this.isHover = true\n    })\n    this.container.addEventListener(\"mouseleave\", () => {\n      this.isHover = false\n    })\n  }\n  /** 设置播放器控制状态 */\n  setControl(flag: boolean) {\n    this.isControl = flag\n    if (!flag) {\n      this.player.state.removeActive()\n    }\n  }\n}\n","import { PlayerEventsMap } from \"./PlayerEventsMap\"\n\nexport default class Events {\n  protected events: Record<string, ((...args: any[]) => void)[]> = {}\n\n  readonly customEventList: string[] = []\n\n  constructor() {}\n\n  /** 添加监听 */\n  on<T extends keyof PlayerEventsMap>(name: T, listener: PlayerEventsMap[T]) {\n    if (!this.events[name]) {\n      this.events[name] = []\n    }\n    this.events[name].push(listener)\n  }\n\n  /** 移除监听 */\n  off<T extends keyof PlayerEventsMap>(name: T, listener: PlayerEventsMap[T]) {\n    if (!this.events[name]) {\n      this.events[name] = []\n    }\n    const index = this.events[name].indexOf(listener)\n    if (index > -1) this.events[name].splice(index, 1)\n  }\n\n  /** 触发事件 */\n  trigger<T extends keyof PlayerEventsMap>(name: T, ...args: Parameters<PlayerEventsMap[T]>) {\n    if (this.events[name] && this.events[name].length) {\n      for (let i = 0; i < this.events[name].length; i++) {\n        this.events[name][i](...args)\n      }\n    }\n  }\n}\n","import { html, render } from \"lit-html\"\nimport MfunsPlayer from \"@/player\"\nimport { colorLuminance } from \"@/utils\"\nimport { classPrefix } from \"@/const\"\nimport { PlayerOptions, ThemeOptions } from \"@/types\"\n\nconst template = () => html`\n  <div class=\"${classPrefix}\">\n    <div class=\"${classPrefix}-main\">\n      <div class=\"${classPrefix}-video-area\">\n        <div class=\"${classPrefix}-video-wrap\">\n          <video class=\"${classPrefix}-video\"></video>\n        </div>\n        <div class=\"${classPrefix}-danmaku-wrap\"></div>\n        <div class=\"${classPrefix}-state-wrap\"></div>\n        <div class=\"${classPrefix}-toast-wrap\"></div>\n      </div>\n      <div class=\"${classPrefix}-side-wrap\"></div>\n      <div class=\"${classPrefix}-modal-wrap\"></div>\n      <div class=\"${classPrefix}-contextmenu-wrap\"></div>\n      <div class=\"${classPrefix}-header-wrap\"></div>\n      <div class=\"${classPrefix}-controller-wrap\"></div>\n    </div>\n    <div class=\"${classPrefix}-footbar mp-solid\"></div>\n    <div class=\"${classPrefix}-miniplayer\">\n      <div class=\"${classPrefix}-miniplayer-content\"></div>\n    </div>\n  </div>\n`\n\nexport default class Template {\n  player: MfunsPlayer\n  /** 播放器容器 */\n  container: HTMLElement\n  /** 播放器主体元素 */\n  el!: HTMLElement\n  // 播放器部件\n  $main!: HTMLElement\n  $video!: HTMLVideoElement\n  $videoArea!: HTMLElement\n  $videoWrap!: HTMLElement\n  $danmakuWrap!: HTMLElement\n  $toastWrap!: HTMLElement\n  $stateWrap!: HTMLElement\n  $headerWrap!: HTMLElement\n  $contextmenuWrap!: HTMLElement\n  $modalWrap!: HTMLElement\n  $controllerWrap!: HTMLElement\n  $sideWrap!: HTMLElement\n  $footbar!: HTMLElement\n  $miniplayer!: HTMLElement\n\n  constructor(player: MfunsPlayer, options: PlayerOptions) {\n    this.player = player\n    this.container = this.player.container\n    this.init()\n  }\n\n  /** 初始化模板绑定 */\n  private init() {\n    render(template(), this.container)\n    const $ = this.container.querySelector.bind(this.container)\n    this.el = $(`.${classPrefix}`)!\n    this.$main = $(`.${classPrefix}-main`)!\n    this.$video = $(`.${classPrefix}-video`)!\n    this.$videoArea = $(`.${classPrefix}-video-area`)!\n    this.$videoWrap = $(`.${classPrefix}-video-wrap`)!\n    this.$danmakuWrap = $(`.${classPrefix}-danmaku-wrap`)!\n    this.$toastWrap = $(`.${classPrefix}-toast-wrap`)!\n    this.$stateWrap = $(`.${classPrefix}-state-wrap`)!\n    this.$headerWrap = $(`.${classPrefix}-header-wrap`)!\n    this.$contextmenuWrap = $(`.${classPrefix}-contextmenu-wrap`)!\n    this.$modalWrap = $(`.${classPrefix}-modal-wrap`)!\n    this.$controllerWrap = $(`.${classPrefix}-controller-wrap`)!\n    this.$sideWrap = $(`.${classPrefix}-side-wrap`)!\n    this.$footbar = $(`.${classPrefix}-footbar`)!\n    this.$miniplayer = $(`.${classPrefix}-miniplayer`)!\n  }\n}\n","import FlvJs from \"@lib/types/flv\"\nimport HlsJs from \"@lib/types/hls\"\nimport DashJs from \"@lib/types/dash\"\nimport MfunsPlayer from \"@/player\"\nimport Video from \"@/Video\"\nimport { VideoSource } from \"@/types\"\n\ndeclare global {\n  let flvjs: typeof FlvJs | undefined\n  let Hls: typeof HlsJs | undefined\n  let dashjs: typeof DashJs | undefined\n}\n\ninterface CurrentSource extends VideoSource {\n  destroy: () => void\n}\n\nexport default class VideoLoader {\n  video: Video\n  current: CurrentSource | null = null\n  list: Map<string, (player: MfunsPlayer, url: string) => void> = new Map()\n  constructor(video: Video) {\n    this.video = video\n  }\n  /** 加载视频源 */\n  public load(src: VideoSource) {\n    this.destroyCurrent()\n    switch (src.type) {\n      case \"flv\":\n        this.loadFlv(src)\n        break\n      case \"dash\":\n        this.loadDash(src)\n        break\n      case \"hls\":\n      case \"m3u8\":\n        this.loadHls(src)\n        break\n      default:\n        this.loadNormal(src)\n    }\n  }\n  /** 一般加载方式 */\n  public loadNormal(src: VideoSource) {\n    this.video.el.src = src.url\n    this.current = {\n      ...src,\n      destroy: () => {\n        this.video.el.src = \"\"\n      },\n    }\n  }\n  /** 加载flv */\n  public loadFlv(src: VideoSource) {\n    if (flvjs?.isSupported()) {\n      const flvPlayer = flvjs.createPlayer({\n        type: src.type,\n        url: src.url,\n        cors: true,\n      })\n      flvPlayer.attachMediaElement(this.video.el)\n      flvPlayer.load()\n      this.current = {\n        ...src,\n        destroy: () => {\n          flvPlayer.destroy()\n        },\n      }\n    } else {\n      console.error(\"不支持flv加载\")\n    }\n  }\n  /** 加载hls */\n  public loadHls(src: VideoSource) {\n    if (Hls?.isSupported()) {\n      const hls = new Hls()\n      hls.attachMedia(this.video.el)\n      hls.loadSource(src.url)\n      this.current = {\n        ...src,\n        destroy: () => {\n          hls.destroy()\n        },\n      }\n    } else {\n      console.error(\"不支持hls加载\")\n    }\n  }\n  /** 加载dash */\n  public loadDash(src: VideoSource) {\n    if (dashjs) {\n      // eslint-disable-next-line new-cap\n      const dashPlayer = dashjs.MediaPlayer().create()\n      dashPlayer.initialize(this.video.el, src.url, true)\n      this.current = {\n        ...src,\n        destroy: () => {\n          dashPlayer.destroy()\n        },\n      }\n    } else {\n      console.error(\"不支持dash加载\")\n    }\n  }\n  /** 销毁当前播放 */\n  private destroyCurrent() {\n    this.current?.destroy()\n    this.current = null\n  }\n}\n","import { PlayerOptions, VideoInfo, VideoPart, VideoSource } from \"@/types\"\nimport MfunsPlayer from \"@/player\"\nimport VideoLoader from \"./Loader\"\n\nexport default class Video {\n  /** 播放器主体 */\n  player: MfunsPlayer\n  /** video对象 */\n  el: HTMLVideoElement\n  /** 视频加载模块 */\n  loader: VideoLoader\n  /** 视频分P列表 */\n  list: VideoPart[]\n  /** 当前视频分P */\n  private currentPart: number\n  /** 当前视频质量 */\n  private quality = \"1080P\"\n\n  ratio: [number, number] | null = null\n\n  constructor(player: MfunsPlayer, options: PlayerOptions) {\n    this.player = player\n    this.el = this.player.template.$video\n    this.loader = new VideoLoader(this)\n    this.list = options.video.list\n    this.currentPart = options.video.part || 1\n    this.setRatio(options.aspectRatio || null)\n\n    this.initEvent()\n    this.initKeepRatio()\n  }\n\n  /** 设置视频 */\n  async setVideo(video: VideoInfo, play = false) {\n    const p = video.part || 1\n    this.list = video.list\n    this.currentPart = p\n    // 选择合适的播放源\n    this.load(this.findSourceByQuality(this.partInfo.src, this.quality), play)\n    this.player.events.trigger(\"video\")\n    this.player.events.trigger(\"part\", p)\n    this.seek(0)\n  }\n\n  /** 设置分P */\n  async setPart(p: number, play = false) {\n    this.currentPart = p\n    // 选择合适的播放源\n    this.load(this.findSourceByQuality(this.partInfo.src, this.quality), play)\n    this.player.events.trigger(\"part\", p)\n    this.seek(0)\n  }\n\n  /** 切换视频质量 */\n  async setQuality(quality: string) {\n    const currentVideoSource = this.partInfo.src\n    let source = currentVideoSource.find((src) => src.quality == quality)\n    if (!source) source = this.findSourceByQuality(currentVideoSource, quality)\n    this.load(source, !this.paused, this.duration)\n  }\n\n  /** 加载视频 */\n  load(src: VideoSource, play?: boolean, time?: number) {\n    this.loader.load(src)\n    const onloadedmetadata = () => {\n      this.player.events.trigger(\"video:load_end\")\n      if (time) {\n        this.seek(time)\n      }\n      if (play) {\n        this.play()\n      } else {\n        this.player.template.el.classList.add(\"state-paused\")\n      }\n      this.el.removeEventListener(\"loadedmetadata\", onloadedmetadata)\n    }\n    this.el.addEventListener(\"loadedmetadata\", onloadedmetadata)\n  }\n\n  /** 根据视频质量选择合适的视频源\n   * 返回小于等于该质量的视频源中最大的一个\n   */\n  private findSourceByQuality(sourceList: VideoSource[], quality: string) {\n    // 视频质量从高到低排序\n    const sortedSources: VideoSource[] = [...sourceList].sort(\n      (a, b) => parseInt(b.quality || \"\") - parseInt(a.quality || \"\")\n    )\n    // 从前向后找，找到小于等于该分辨率的即可\n    let source = sortedSources.find((src) => parseInt(src.quality || \"\") <= parseInt(quality))\n    if (!source) {\n      source = sortedSources[sortedSources.length - 1]\n    }\n    return source\n  }\n\n  /** 视频分P */\n  get part() {\n    return this.currentPart\n  }\n\n  get partInfo() {\n    return this.list[this.currentPart - 1]\n  }\n\n  /** 上一P */\n  public prev() {\n    if (this.currentPart > 1) this.setPart(this.currentPart - 1, true)\n  }\n  /** 下一P */\n  public next() {\n    if (this.currentPart < this.list.length) this.setPart(this.currentPart + 1, true)\n    this.play()\n  }\n\n  // 同步视频方法\n\n  /** 播放 */\n  public play() {\n    this.el.play()\n  }\n\n  /** 暂停 */\n  public pause() {\n    this.el.pause()\n  }\n\n  /** 跳转 */\n  public seek(value: number) {\n    this.el.currentTime = value > 0 ? (value < this.el.duration ? value : this.el.duration) : 0\n  }\n\n  // 同步设置视频属性\n\n  /** 设置音量 */\n  public setVolume(value: number) {\n    this.el.volume = value > 0 ? (value < 1 ? value : 1) : 0\n  }\n\n  /** 设置倍速 */\n  public setPlaybackRate(value: number) {\n    this.el.playbackRate = value\n  }\n\n  // 视频播放属性\n\n  /** 设置循环播放 */\n  public setLoop(flag: boolean) {\n    this.el.loop = flag\n    this.player.events.trigger(\"change:loop\", flag)\n  }\n\n  /** 设置视频比例 */\n  public setRatio(value: [number, number] | null) {\n    this.ratio = value\n    this.el.style.width = \"\"\n    this.el.style.height = \"\"\n    if (value) {\n      const [ratioW, ratioH] = value\n      this.el.style.aspectRatio = `${ratioW}/${ratioH}`\n      this.el.style.objectFit = \"fill\"\n      const { width, height } = this.el.getBoundingClientRect()\n      const { width: cWidth, height: cHeight } =\n        this.player.template.$videoArea.getBoundingClientRect()\n      if (width == cWidth && height == cHeight) {\n        this.rescale(width, height, ratioW, ratioH)\n      }\n    } else {\n      this.el.style.aspectRatio = \"\"\n      this.el.style.objectFit = \"\"\n    }\n    this.player.events.trigger(\"change:aspectRatio\", value)\n  }\n\n  /** 静音 */\n  public mute(flag = true) {\n    this.el.muted = flag\n  }\n\n  get muted(): boolean {\n    return this.el.muted\n  }\n\n  get playbackRate(): number {\n    return this.el.playbackRate\n  }\n\n  get loop(): boolean {\n    return this.el.loop\n  }\n\n  get volume(): number {\n    return this.el.volume\n  }\n\n  get paused(): boolean {\n    return this.el.paused\n  }\n\n  get duration(): number {\n    return this.el.duration\n  }\n\n  get currentTime(): number {\n    return this.el.currentTime\n  }\n\n  /** 监听视频事件 */\n  public on<K extends keyof HTMLVideoElementEventMap>(\n    type: K,\n    listener: (this: HTMLVideoElement, ev: HTMLVideoElementEventMap[K]) => any,\n    options?: boolean | AddEventListenerOptions\n  ): void {\n    this.el.addEventListener(type, listener, options)\n  }\n\n  /** 移除视频事件 */\n  public off<K extends keyof HTMLVideoElementEventMap>(\n    type: K,\n    listener: (this: HTMLVideoElement, ev: HTMLVideoElementEventMap[K]) => any,\n    options?: boolean | EventListenerOptions\n  ): void {\n    this.el.removeEventListener(type, listener, options)\n  }\n\n  private initEvent() {\n    this.on(\"play\", () => {\n      this.player.events.trigger(\"play\")\n      this.player.template.el.classList.remove(\"state-paused\")\n    })\n    this.on(\"pause\", () => {\n      this.player.events.trigger(\"pause\")\n      this.player.template.el.classList.add(\"state-paused\")\n    })\n    this.on(\"ended\", () => {\n      this.player.events.trigger(\"ended\")\n    })\n    this.on(\"waiting\", () => {\n      this.player.events.trigger(\"waiting\")\n      this.player.template.el.classList.add(\"state-loading\")\n    })\n    this.on(\"playing\", () => {\n      this.player.events.trigger(\"playing\")\n      this.player.template.el.classList.remove(\"state-loading\")\n    })\n    this.on(\"seeking\", () => {\n      this.player.events.trigger(\"seeking\", this.currentTime)\n      this.player.template.el.classList.add(\"state-seeking\")\n    })\n    this.on(\"seeked\", () => {\n      this.player.events.trigger(\"seeked\", this.currentTime)\n      this.player.template.el.classList.remove(\"state-seeking\")\n    })\n    this.on(\"timeupdate\", () => {\n      this.player.events.trigger(\"timeupdate\", this.currentTime)\n    })\n    this.on(\"progress\", () => {\n      const buffered = this.el.buffered\n      this.player.events.trigger(\n        \"progress\",\n        buffered.length ? buffered.end(buffered.length - 1) : 0\n      )\n    })\n    this.on(\"durationchange\", () => {\n      this.player.events.trigger(\"durationchange\", this.duration)\n    })\n    this.on(\"volumechange\", () => {\n      this.player.events.trigger(\"volumechange\", this.volume, this.muted)\n    })\n    this.on(\"ratechange\", () => {\n      this.player.events.trigger(\"ratechange\", this.playbackRate)\n    })\n  }\n  /** 保持视频比例 */\n  private initKeepRatio() {\n    this.player.on(\"resize\", ([cWidth, cHeight]) => {\n      if (this.ratio) {\n        this.el.style.width = \"\"\n        this.el.style.height = \"\"\n        const [ratioW, ratioH] = this.ratio\n        const { width, height } = this.el.getBoundingClientRect()\n        console.log(`${width} x ${height} -- ${cWidth} x ${cHeight}`)\n        if (Math.abs(width - cWidth) < 1 && Math.abs(height - cHeight) < 1) {\n          // 该情况表示播放器大小可能已被固定，需要重新计算宽高\n          this.rescale(cWidth, cHeight, ratioW, ratioH)\n        }\n      }\n    })\n  }\n\n  /** 根据当前视频宽高重新维持视频比例 */\n  private rescale(width: number, height: number, ratioW: number, ratioH: number) {\n    const rwxh = ratioW * height\n    const rhxw = ratioH * width\n    if (rwxh < rhxw) {\n      this.el.style.width = `${(rwxh / rhxw) * 100}%`\n      this.el.style.height = \"100%\"\n    } else {\n      this.el.style.width = \"100%\"\n      this.el.style.height = `${(rhxw / rwxh) * 100}%`\n    }\n  }\n}\n","import MfunsPlayer from \"@/player\"\nimport { getFullscreenElement } from \"@/utils\"\n\nexport default class ModeFullscreen {\n  player: MfunsPlayer\n\n  el: HTMLElement\n\n  constructor(player: MfunsPlayer) {\n    this.player = player\n    this.el = this.player.template.$main\n\n    const fullScreenChangeHandler = () => {\n      if (this.value) {\n        this.player.template.el.classList.add(\"mode-fullscreen\")\n        this.player.events.trigger(\"fullscreen\")\n      } else {\n        this.player.template.el.classList.remove(\"mode-fullscreen\")\n        this.player.events.trigger(\"fullscreen_exit\")\n      }\n    }\n    this.el.addEventListener(\"fullscreenchange\", fullScreenChangeHandler)\n    this.el.addEventListener(\"webkitfullscreenchange\", fullScreenChangeHandler)\n    this.el.addEventListener(\"mozfullscreenchange\", fullScreenChangeHandler)\n    this.el.addEventListener(\"msfullscreenchange\", fullScreenChangeHandler)\n  }\n\n  /** 进入全屏模式 */\n  enter() {\n    if (this.value) return\n    const el: any = this.el\n    if (el.requestFullscreen) {\n      el.requestFullscreen()\n    } else if (el.mozRequestFullScreen) {\n      el.mozRequestFullScreen()\n    } else if (el.webkitRequestFullscreen) {\n      el.webkitRequestFullscreen()\n    } else if (el.webkitEnterFullscreen) {\n      // Safari for iOS\n      el.webkitEnterFullscreen()\n    } else if (el.webkitEnterFullScreen) {\n      el.webkitEnterFullScreen()\n    } else if (el.msRequestFullscreen) {\n      el.msRequestFullscreen()\n    }\n  }\n\n  /** 退出全屏模式 */\n  exit() {\n    if (!this.value) return\n    const doc: any = document\n    if (document.exitFullscreen) {\n      document.exitFullscreen()\n    } else if (doc.mozCancelFullScreen) {\n      doc.mozCancelFullScreen()\n    } else if (doc.webkitExitFullscreen) {\n      doc.webkitExitFullscreen()\n    } else if (doc.webkitExitFullScreen) {\n      doc.webkitExitFullScreen()\n    } else if ((this.el as any).msExitFullscreen!) {\n      ;(this.el as any).msExitFullscreen()\n    }\n  }\n\n  /** 是否处于全屏模式 */\n  get value(): boolean {\n    return !!(getFullscreenElement() == this.el)\n  }\n}\n","import MfunsPlayer from \"@/player\"\n\nexport default class ModePip {\n  player: MfunsPlayer\n\n  video: HTMLVideoElement\n\n  constructor(player: MfunsPlayer) {\n    this.player = player\n    this.video = this.player.video.el\n\n    this.video.addEventListener(\"enterpictureinpicture\", () => {\n      this.player.template.el.classList.add(\"mode-pip\")\n      this.player.events.trigger(\"pip\")\n    })\n    this.video.addEventListener(\"leavepictureinpicture\", () => {\n      this.player.template.el.classList.remove(\"mode-pip\")\n      this.player.events.trigger(\"pip_exit\")\n    })\n  }\n\n  /** 进入画中画模式 */\n  enter() {\n    if (this.value) return\n    this.video.requestPictureInPicture()\n  }\n\n  /** 退出画中画模式 */\n  exit() {\n    if (!this.value) return\n    document.exitPictureInPicture()\n  }\n\n  /** 是否已进入画中画模式 */\n  get value(): boolean {\n    return !!(document.pictureInPictureElement == this.video)\n  }\n}\n","import MfunsPlayer from \"@/player\"\n\nexport default class ModeWebfull {\n  player: MfunsPlayer\n\n  el: HTMLElement\n\n  constructor(player: MfunsPlayer) {\n    this.player = player\n    this.el = this.player.template.el\n  }\n\n  /** 进入网页全屏 */\n  enter() {\n    this.el.classList.add(\"mode-webfull\")\n    this.player.events.trigger(\"webfull\")\n  }\n\n  /** 退出网页全屏 */\n  exit() {\n    this.el.classList.remove(\"mode-webfull\")\n    this.player.events.trigger(\"webfull_exit\")\n  }\n\n  /** 是否处于网页全屏模式 */\n  get value(): boolean {\n    return this.el.classList.contains(\"mode-webfull\")\n  }\n}\n","import MfunsPlayer from \"@/player\"\nimport { PlayerOptions } from \"@/types\"\nimport ModeFullscreen from \"./ModeFullscreen\"\nimport ModePip from \"./ModePip\"\nimport ModeWebfull from \"./ModeWebfull\"\n\nexport default class Mode {\n  player: MfunsPlayer\n\n  protected modeFullscreen: ModeFullscreen\n  protected modeWebfull: ModeWebfull\n  protected modePip: ModePip\n\n  constructor(player: MfunsPlayer, options: PlayerOptions) {\n    this.player = player\n    this.modeWebfull = new ModeWebfull(this.player)\n    this.modeFullscreen = new ModeFullscreen(this.player)\n    this.modePip = new ModePip(this.player)\n    this.init()\n  }\n  init() {\n    this.player.on(\"webfull\", () => {\n      this.player.exitFullscreen()\n    })\n    this.player.on(\"fullscreen\", () => {\n      this.player.exitWebfull()\n    })\n\n    const observer = new ResizeObserver(([item]) => {\n      const { width, height } = item.contentRect\n      this.player.events.trigger(\"resize\", [width, height])\n    })\n\n    observer.observe(this.player.template.$videoWrap)\n  }\n  fullscreen() {\n    this.modeFullscreen.enter()\n  }\n\n  exitFullscreen() {\n    this.modeFullscreen.exit()\n  }\n\n  get isFullscreen() {\n    return this.modeFullscreen.value\n  }\n\n  pip() {\n    this.modePip.enter()\n  }\n\n  exitPip() {\n    this.modePip.exit()\n  }\n\n  get isPip() {\n    return this.modePip.value\n  }\n\n  webfull() {\n    this.modeWebfull.enter()\n  }\n\n  exitWebfull() {\n    this.modeWebfull.exit()\n  }\n\n  get isWebfull() {\n    return this.modeWebfull.value\n  }\n\n  wide() {}\n\n  exitWide() {}\n\n  get isWide() {\n    return false\n  }\n\n  /** 设置控制栏固定 */\n  solid(flag: boolean) {\n    this.player.template.el.classList.toggle(\"mode-solid\", flag)\n    this.player.events.trigger(flag ? \"solid\" : \"solid_off\")\n  }\n}\n","import { PlayerOptions } from \"@/types\"\nimport MfunsPlayer from \"@/player\"\nimport { keyCode } from \"@/utils/KeyCode.enum\"\n\nexport default class HotKey {\n  player: MfunsPlayer\n  controlMask: HTMLElement\n\n  constructor(player: MfunsPlayer, options: PlayerOptions) {\n    this.player = player\n    this.controlMask = this.player.template.$videoArea\n    this.initKey()\n    this.initMask()\n  }\n\n  initKey() {\n    document.addEventListener(\"keydown\", (e: KeyboardEvent) => {\n      if (this.player.state.focused) {\n        switch (e.keyCode) {\n          case keyCode.Space:\n            e.preventDefault()\n            this.player.toggle()\n            break\n          case keyCode.LeftArrow:\n            e.preventDefault()\n            this.player.seek(this.player.time - 5)\n            break\n          case keyCode.RightArrow:\n            e.preventDefault()\n            this.player.seek(this.player.time + 5)\n            break\n          case keyCode.UpArrow:\n            e.preventDefault()\n            this.player.setVolume(this.player.volume + 0.1)\n            break\n          case keyCode.DownArrow:\n            e.preventDefault()\n            this.player.setVolume(this.player.volume - 0.1)\n            break\n        }\n      }\n    })\n  }\n\n  initMask() {\n    this.controlMask.addEventListener(\"click\", () => {\n      this.player.toggle()\n    })\n  }\n}\n","import MfunsPlayer from \"@/player\"\nimport { classPrefix, developers, repositoryLink } from \"@/const\"\nimport { html, render } from \"lit-html\"\nimport { VideoPart } from \"@/types\"\n\nconst template = (list: VideoPart[], setPart: (p: number) => void) => html`\n  <div class=\"${classPrefix}-side-panel ${classPrefix}-partlist\">\n    <div class=\"${classPrefix}-partlist-list\">\n      ${list.map(\n        ({ title }, index) => html`\n          <div\n            class=\"${classPrefix}-partlist-list-item\"\n            @click=${() => {\n              setPart(index + 1)\n            }}\n          >\n            <div class=\"${classPrefix}-partlist-list-id\">P${index + 1}</div>\n            <div class=\"${classPrefix}-partlist-list-title\">${title}</div>\n          </div>\n        `\n      )}\n    </div>\n  </div>\n`\n\nexport default class SidePartList {\n  player: MfunsPlayer\n  title = \"分P列表\"\n  /** 是否挂载到播放器外部 */\n  mounted = false\n  el: HTMLElement\n  constructor(player: MfunsPlayer) {\n    this.player = player\n    const fragment = new DocumentFragment()\n    render(\n      template(player.video.list, (p) => {\n        this.player.setPart(p, true)\n        this.player.side.hide()\n      }),\n      fragment\n    )\n    this.el = fragment.querySelector(`.${classPrefix}-side-panel`)!\n  }\n}\n","import { html, render } from \"lit-html\"\nimport { classPrefix } from \"@/const\"\nimport MfunsPlayer from \"@/player\"\nimport { PlayerOptions } from \"@/types\"\nimport SidePartList from \"./SidePartList\"\n\nconst template = () => html`\n  <div class=\"${classPrefix}-side-mask\"></div>\n  <div class=\"${classPrefix}-side\">\n    <div class=\"${classPrefix}-side-head\">\n      <div class=\"${classPrefix}-side-title\"></div>\n      <div class=\"${classPrefix}-side-close\">\n        <i class=\"${classPrefix}-controller-icon mp-icon-close\"></i>\n      </div>\n    </div>\n    <div class=\"${classPrefix}-side-content\"></div>\n  </div>\n`\n\nexport interface SidePanel {\n  title: string\n  el: HTMLElement\n  mounted: boolean\n}\n\nexport default class Side {\n  player: MfunsPlayer\n  container: HTMLElement\n  el: HTMLElement\n  $mask: HTMLElement\n  $content: HTMLElement\n  $title: HTMLElement\n  $close: HTMLElement\n  list: Record<string, SidePanel> = {}\n  current = \"\"\n  get isShow(): boolean {\n    return this.container.classList.contains(\"state-show\")\n  }\n\n  constructor(player: MfunsPlayer, options: PlayerOptions) {\n    this.player = player\n    this.container = player.template.$sideWrap\n    render(template(), this.container)\n    this.el = this.container.querySelector(`.${classPrefix}-side`)!\n    this.$mask = this.container.querySelector(`.${classPrefix}-side-mask`)!\n    this.$content = this.el.querySelector(`.${classPrefix}-side-content`)!\n    this.$title = this.el.querySelector(`.${classPrefix}-side-title`)!\n    this.$close = this.el.querySelector(`.${classPrefix}-side-close`)!\n\n    // --- 事件 --- //\n    this.$mask.addEventListener(\"click\", () => {\n      this.hide()\n    })\n    this.$close.addEventListener(\"click\", () => {\n      this.hide()\n    })\n\n    // --- 预装功能 --- //\n    this.add(\"partlist\", new SidePartList(this.player))\n  }\n\n  /** 显示特定侧边面板 */\n  show(id: string) {\n    const panel = this.list[id]\n    if (panel && !panel.mounted) {\n      if (id != this.current) {\n        this.removeCurrent()\n        this.current = id\n        this.$title.innerText = panel.title\n        panel.el.classList.add(\"state-show\")\n        this.player.events.trigger(\"side:show\", id)\n      }\n      this.container.classList.add(\"state-show\")\n    } else {\n      this.hide()\n    }\n    if (panel.mounted) {\n      this.player.events.trigger(\"side:show_mounted\", id)\n    }\n  }\n\n  /** 切换面板状态 */\n  toggle(id: string) {\n    if (id == this.current && this.isShow) {\n      this.hide()\n    } else {\n      this.show(id)\n    }\n  }\n\n  /** 隐藏侧边面板 */\n  hide() {\n    this.container.classList.remove(\"state-show\")\n  }\n  /** 添加面板 */\n  add(id: string, panel: SidePanel) {\n    this.list[id] = panel\n    this.$content.append(panel.el)\n  }\n\n  mount(container: HTMLElement | null) {\n    ;(container || this.el).append(this.$content)\n  }\n\n  /** 侧边面板挂载到其他元素 */\n  mountPanel(id: string, container?: HTMLElement) {\n    const panel = this.list[id]\n    if (panel) {\n      ;(container || this.$content).append(panel.el)\n      panel.el.classList.remove(\"state-show\")\n      if (container) {\n        panel.mounted = true\n      } else {\n        panel.mounted = false\n      }\n    }\n    if (id == this.current) {\n      this.removeCurrent()\n    }\n  }\n\n  /** 清除当前面板显示 */\n  private removeCurrent() {\n    const panel = this.list[this.current]\n    if (panel) panel.el.classList.remove(\"state-show\")\n    this.player.events.trigger(\"side:hide\", this.current)\n    this.$title.innerText = \"\"\n    this.current = \"\"\n  }\n}\n","import { classPrefix } from \"@/const\"\nimport MfunsPlayer from \"@/player\"\nimport { DanmakuApiOptions, DanmakuItem, PlayerOptions } from \"@/types\"\nimport { html, render } from \"lit-html\"\n\nconst template = (list: MenuItem[]) => html`\n  <div class=\"${classPrefix}-contextmenu\">\n    <ul class=\"${classPrefix}-contextmenu-danmaku mp-black\"></ul>\n    <ul class=\"${classPrefix}-contextmenu-menu mp-black\">\n      ${list.map(\n        ({ name, onClick }) => html`\n          <li class=\"${classPrefix}-contextmenu-item\" @click=${onClick}>${name}</li>\n        `\n      )}\n    </ul>\n  </div>\n`\nconst templateDanmaku = (\n  danmaku: DanmakuItem[],\n  operation: (dm: DanmakuItem) => [string, (dm: DanmakuItem) => void, unknown][]\n) => html`\n  ${danmaku.map(\n    (dm) => html`\n      <li class=\"${classPrefix}-contextmenu-danmaku-item\">\n        <div class=\"${classPrefix}-contextmenu-danmaku-item-content\">${dm.content}</div>\n        <div class=\"${classPrefix}-contextmenu-danmaku-item-operate\">\n          ${operation(dm).map(\n            ([label, onClick]) => html`<div\n              class=\"${classPrefix}-contextmenu-danmaku-item-operate-btn\"\n              @click=${() => {\n                onClick(dm)\n              }}\n            >\n              ${label}\n            </div>`\n          )}\n        </div>\n      </li>\n    `\n  )}\n`\n\nconst copyClip = (content: string) => {\n  navigator.clipboard.writeText(content).then(\n    (res) => {\n      // success\n    },\n    (rej) => {\n      // fail\n    }\n  )\n}\n\ninterface MenuItem {\n  name: string\n  onClick?: () => void\n}\n\nexport default class ContextMenu {\n  player: MfunsPlayer\n  container: HTMLElement\n  el: HTMLElement\n  $danmaku: HTMLElement\n  $menu: HTMLElement\n  private isShow = false\n  constructor(player: MfunsPlayer, options: PlayerOptions) {\n    this.player = player\n\n    const menuList: MenuItem[] = [\n      {\n        name: \"快捷键说明\",\n        onClick: () => {\n          this.player.modal.show(\"hotkey\")\n        },\n      },\n      {\n        name: `Mfuns Player v${MfunsPlayer.version}-${MfunsPlayer.gitHash}`,\n        onClick: () => {\n          this.player.modal.show(\"about\")\n        },\n      },\n    ]\n\n    this.container = this.player.template.$contextmenuWrap\n    render(template(menuList), this.container)\n    this.el = this.container.querySelector(`.${classPrefix}-contextmenu`)!\n    this.$danmaku = this.el.querySelector(`.${classPrefix}-contextmenu-danmaku`)!\n    this.$menu = this.el.querySelector(`.${classPrefix}-contextmenu-menu`)!\n    this.player.template.$videoArea.addEventListener(\"contextmenu\", (e: MouseEvent) => {\n      e.preventDefault()\n      const clientRect = this.player.template.$videoArea.getBoundingClientRect()\n      const x = e.clientX - clientRect.left\n      const y = e.clientY - clientRect.top\n      this.show(x, y)\n      const captured = this.player.danmaku.engine.captureDanmaku(x, y, 4)\n      this.showDanmaku(captured)\n    })\n    this.container.addEventListener(\"contextmenu\", (e: MouseEvent) => {\n      e.preventDefault()\n      const clientRect = this.container.getBoundingClientRect()\n      const x = e.clientX - clientRect.left\n      const y = e.clientY - clientRect.top\n      this.show(x, y)\n      const captured = this.player.danmaku.engine.captureDanmaku(x, y, 4)\n      this.showDanmaku(captured)\n    })\n    document.addEventListener(\"click\", () => {\n      if (this.isShow) {\n        this.hide()\n      }\n    })\n  }\n  show(x: number, y: number) {\n    this.container.classList.add(\"state-show\")\n    const clientRect = this.player.template.$videoArea.getBoundingClientRect()\n    if (x + this.el.offsetWidth >= clientRect.width) {\n      this.el.style.right = clientRect.width - x + \"px\"\n      this.el.style.left = \"initial\"\n    } else {\n      this.el.style.left = x + \"px\"\n      this.el.style.right = \"initial\"\n    }\n    if (y + this.el.offsetHeight >= clientRect.height) {\n      this.el.style.bottom = clientRect.height - y + \"px\"\n      this.el.style.top = \"initial\"\n    } else {\n      this.el.style.top = y + \"px\"\n      this.el.style.bottom = \"initial\"\n    }\n    this.isShow = true\n  }\n  showDanmaku(danmaku: DanmakuItem[]) {\n    const api = this.player.danmaku.api\n    const operate = this.player.danmaku.operate\n    if (danmaku.length) {\n      this.$danmaku.style.display = \"\"\n    } else {\n      this.$danmaku.style.display = \"none\"\n    }\n    render(\n      templateDanmaku(danmaku, (dm) => {\n        const myDanmaku = dm.user == this.player.userId\n        return [\n          [\n            \"举报\",\n            (dm: DanmakuItem) => {\n              operate.report(dm)\n            },\n            !myDanmaku && api?.report,\n          ],\n          [\n            \"屏蔽\",\n            (dm: DanmakuItem) => {\n              operate.blockUser(dm.user, true)\n            },\n            !myDanmaku && api?.blockUser,\n          ],\n          [\n            \"撤回\",\n            (dm: DanmakuItem) => {\n              operate.recall(dm)\n            },\n            myDanmaku && api?.recall,\n          ],\n          [\n            \"复制\",\n            (dm: DanmakuItem) => {\n              copyClip(dm.content)\n            },\n            true,\n          ],\n        ].filter((v) => v[2]) as [string, (dm: DanmakuItem) => void, unknown][]\n      }),\n      this.$danmaku\n    )\n  }\n  hide() {\n    this.container.classList.remove(\"state-show\")\n    this.isShow = false\n  }\n}\n","import MfunsPlayer from \"@/player\"\nimport { classPrefix, developers, repositoryLink } from \"@/const\"\nimport { html, render } from \"lit-html\"\n\nconst template = () => html`\n  <div class=\"${classPrefix}-modal-panel ${classPrefix}-about\">\n    <div class=\"${classPrefix}-about-logo\"></div>\n    <div class=\"${classPrefix}-about-version\">\n      version ${MfunsPlayer.version}-${MfunsPlayer.gitHash}\n    </div>\n    <div>github: <a href=\"${repositoryLink}\" target=\"_blank\">github</a></div>\n    <div>开发者</div>\n    <ul class=\"${classPrefix}-about-developers\">\n      ${developers.map(\n        ({ name, id, link }) => html`\n          <li>\n            <a href=\"${link}\" target=\"_blank\">${name}</a>\n          </li>\n        `\n      )}\n      <li></li>\n    </ul>\n  </div>\n`\n\nexport default class ModalAbout {\n  title = \"关于\"\n  el: HTMLElement\n  constructor() {\n    const fragment = new DocumentFragment()\n    render(template(), fragment)\n    this.el = fragment.querySelector(`.${classPrefix}-modal-panel`)!\n  }\n}\n","import MfunsPlayer from \"@/player\"\nimport { classPrefix, developers, repositoryLink } from \"@/const\"\nimport { html, render } from \"lit-html\"\n\nconst template = (list: HotkeyInfo[]) => html`\n  <div class=\"${classPrefix}-modal-panel ${classPrefix}-hotkey\">\n    <div class=\"${classPrefix}-hotkey-list\">\n      ${list.map(\n        ({ key, description }) => html`\n          <div class=\"${classPrefix}-hotkey-list-item\">\n            <div class=\"${classPrefix}-hotkey-list-key\">${key}</div>\n            <div class=\"${classPrefix}-hotkey-list-description\">${description}</div>\n          </div>\n        `\n      )}\n    </div>\n  </div>\n`\n\ninterface HotkeyInfo {\n  key: string\n  description: string\n}\n\nexport default class ModalHotkey {\n  title = \"快捷键说明\"\n  el: HTMLElement\n  constructor() {\n    const hotkeyInfoList = [\n      { key: \"Space\", description: \"播放/暂停\" },\n      { key: \"→\", description: \"快进5秒\" },\n      { key: \"←\", description: \"快退5秒\" },\n      { key: \"↑\", description: \"音量增加10%\" },\n      { key: \"↓\", description: \"音量降低10%\" },\n    ]\n\n    const fragment = new DocumentFragment()\n    render(template(hotkeyInfoList), fragment)\n    this.el = fragment.querySelector(`.${classPrefix}-modal-panel`)!\n  }\n}\n","import { html, render } from \"lit-html\"\nimport { classPrefix } from \"@/const\"\nimport MfunsPlayer from \"@/player\"\nimport { PlayerOptions } from \"@/types\"\nimport ModalAbout from \"./ModalAbout\"\nimport ModalHotkey from \"./ModalHotkey\"\n\nconst template = () => html`\n  <div class=\"${classPrefix}-modal-mask\"></div>\n  <div class=\"${classPrefix}-modal\">\n    <div class=\"${classPrefix}-modal-head\">\n      <div class=\"${classPrefix}-modal-title\"></div>\n      <div class=\"${classPrefix}-modal-close\">\n        <i class=\"${classPrefix}-controller-icon mp-icon-close\"></i>\n      </div>\n    </div>\n    <div class=\"${classPrefix}-modal-content\"></div>\n  </div>\n`\n\nexport interface ModalPanel {\n  title: string\n  el: HTMLElement\n}\n\nexport default class Modal {\n  player: MfunsPlayer\n  container: HTMLElement\n  el: HTMLElement\n  $mask: HTMLElement\n  $content: HTMLElement\n  $title: HTMLElement\n  $close: HTMLElement\n  list: Record<string, ModalPanel> = {}\n  current = \"\"\n  get isShow(): boolean {\n    return this.container.classList.contains(\"state-show\")\n  }\n\n  constructor(player: MfunsPlayer, options: PlayerOptions) {\n    this.player = player\n    this.container = player.template.$modalWrap\n    render(template(), this.container)\n    this.el = this.container.querySelector(`.${classPrefix}-modal`)!\n    this.$mask = this.container.querySelector(`.${classPrefix}-modal-mask`)!\n    this.$content = this.el.querySelector(`.${classPrefix}-modal-content`)!\n    this.$title = this.el.querySelector(`.${classPrefix}-modal-title`)!\n    this.$close = this.el.querySelector(`.${classPrefix}-modal-close`)!\n\n    this.init(options)\n  }\n\n  private init(options: PlayerOptions) {\n    this.$mask.addEventListener(\"click\", () => {\n      this.hide()\n    })\n    this.$close.addEventListener(\"click\", () => {\n      this.hide()\n    })\n    this.add(\"about\", new ModalAbout())\n    this.add(\"hotkey\", new ModalHotkey())\n  }\n\n  show(id: string) {\n    if (id != this.current) {\n      const panel = this.list[id]\n      if (panel) {\n        this.removeCurrent()\n        this.current = id\n        this.$title.innerText = panel.title\n        panel.el.classList.add(\"state-show\")\n      }\n    }\n    this.container.classList.add(\"state-show\")\n  }\n\n  toggle(id: string) {\n    if (id == this.current && this.isShow) {\n      this.hide()\n    } else {\n      this.show(id)\n    }\n  }\n\n  hide() {\n    this.container.classList.remove(\"state-show\")\n  }\n\n  add(id: string, panel: ModalPanel) {\n    this.list[id] = panel\n    this.$content.append(panel.el)\n  }\n\n  private removeCurrent() {\n    const panel = this.list[this.current]\n    if (panel) panel.el.classList.remove(\"state-show\")\n    this.$title.innerText = \"\"\n    this.current = \"\"\n  }\n}\n","import MfunsPlayer from \"@/player\"\nimport { PlayerOptions, ThemeOptions } from \"@/types\"\nconst themeOptionsVars = {\n  primaryColor: \"--mp-primary-color\",\n  secondaryColor: \"--mp-secondary-color\",\n  borderRadius: \"--mp-border-radius\",\n  bgWhite: \"--mp-bg-white\",\n  bgBlack: \"--mp-bg-black\",\n  panelWhite: \"--mp-panel-white\",\n  panelBlack: \"--mp-panel-black\",\n}\n\nexport default class Theme implements ThemeOptions {\n  player: MfunsPlayer\n  primaryColor?: string\n  secondaryColor?: string\n  borderRadius?: string\n  bgWhite?: string\n  bgBlack?: string\n  panelWhite?: string\n  panelBlack?: string\n  /** 绑定了主题变量的DOM元素 */\n  private themeElement: HTMLElement[]\n  constructor(player: MfunsPlayer, options: PlayerOptions) {\n    this.player = player\n    this.themeElement = [this.player.container]\n    this.setTheme(options.theme || {})\n  }\n  /** 设置主题 */\n  setTheme(theme: ThemeOptions) {\n    Object.assign(this, theme)\n    this.themeElement.forEach((el) => {\n      let name: keyof ThemeOptions\n      for (name in theme) {\n        el.style.setProperty(themeOptionsVars[name], theme[name]!)\n      }\n    })\n  }\n  /** 设置某个主题属性 */\n  setThemeProperty(name: keyof ThemeOptions, value: string) {\n    this[name] = value\n    this.themeElement.forEach((el) => {\n      el.style.setProperty(themeOptionsVars[name], value)\n    })\n  }\n  /** 为元素绑定主题变量 */\n  public addThemeElement(el: HTMLElement) {\n    this.themeElement.push(el)\n    let name: keyof typeof themeOptionsVars\n    for (name in themeOptionsVars) {\n      const value = this[name]\n      value && el.style.setProperty(themeOptionsVars[name], value)\n    }\n  }\n}\n","import { classPrefix } from \"@/const\"\nimport { debounce } from \"@/utils/index\"\nimport MfunsPlayer from \"@/player\"\nimport { PlayerOptions } from \"@/types\"\nimport { html, render } from \"lit-html\"\n\nconst template = () => html`\n  <div class=\"${classPrefix}-state-loading\"></div>\n  <div class=\"${classPrefix}-state-volume\"></div>\n  <div class=\"${classPrefix}-state-paused\"></div>\n`\nexport default class State {\n  player: MfunsPlayer\n  container: HTMLElement\n  $stateLoading: HTMLElement\n  $stateVolume: HTMLElement\n  $statePaused: HTMLElement\n\n  /** 播放器聚焦状态，在点选播放器后聚焦 */\n  focused = false\n  /** 播放器活跃状态 */\n  active = false\n  /** 播放器鼠标活跃状态，鼠标在播放器区域内移动时活跃 */\n  mousemove = false\n\n  constructor(player: MfunsPlayer, options: PlayerOptions) {\n    this.player = player\n    this.container = player.template.$stateWrap\n    this.$stateLoading = this.container.querySelector(`.${classPrefix}-state-loading`)!\n    this.$stateVolume = this.container.querySelector(`.${classPrefix}-state-volume`)!\n    this.$statePaused = this.container.querySelector(`.${classPrefix}-state-paused`)!\n\n    render(template(), this.container)\n    this.init()\n  }\n  init() {\n    // 播放器聚焦\n    document.addEventListener(\n      \"click\",\n      () => {\n        this.focused = false\n      },\n      true\n    )\n    this.player.template.el.addEventListener(\n      \"click\",\n      () => {\n        this.focused = true\n      },\n      true\n    )\n    // 播放器活跃\n    const debounceRemoveActive = debounce(() => {\n      this.mousemove = false\n      this.removeActive()\n    }, 3000)\n    this.player.template.$main.addEventListener(\"mousemove\", () => {\n      this.mousemove = true\n      this.setActive()\n      debounceRemoveActive()\n    })\n    this.player.template.$main.addEventListener(\"mouseleave\", () => {\n      this.mousemove = false\n      this.removeActive()\n    })\n  }\n  /** 设置播放器活跃状态 */\n  public setActive() {\n    if (this.active) return\n    this.player.template.el.classList.add(\"state-active\")\n    this.active = true\n  }\n  /** 试图移除播放器活跃状态 */\n  public removeActive() {\n    if (\n      !this.active ||\n      this.player.controller.isHover ||\n      this.player.controller.isControl ||\n      this.mousemove\n    ) {\n      return\n    }\n    this.player.template.el.classList.remove(\"state-active\")\n    this.active = false\n  }\n}\n\n/**\n * 活跃状态Active判定:\n * - 鼠标位于播放器主体范围内并持续移动，超过一定时间不移动或移出区域会取消Active状态\n * - 鼠标位于控制栏/顶栏区域\n * - 控制栏处于正在控制状态\n */\n","/** 弹幕模式 */\nexport enum DanmakuMode {\n  roll = 1,\n  bottom = 4,\n  top = 5,\n  reverse = 6,\n  special = 7,\n  advanced = 9,\n}\n","import { DanmakuMode } from \"./../enum\"\n/** 播放器弹幕引擎 */\n\nimport { DanmakuItem } from \"@/types\"\nimport { createArray, number2Color } from \"@/utils\"\n\nexport type TrackType = \"roll\" | \"reverse\" | \"top\" | \"bottom\"\n\ninterface DanmakuEngineOptions {\n  fontScale?: number\n  fontFamily?: string\n  fontWeight?: string\n  speed?: number\n  opacity?: number\n  limitArea?: number\n  classPrefix?: string\n  /** 颜色限制 */\n  colorFilter?: boolean\n  /** 获取当前时间函数 */\n  getTime: () => number\n}\n\nexport default class DanmakuEngine {\n  /** 暂停状态 */\n  public paused = false\n\n  /** 隐藏状态 */\n  public hidden = false\n\n  /** 弹幕容器 */\n  public readonly container: HTMLDivElement\n  /** 弹幕字号缩放 */\n  public fontScale: number\n  /** 字体 */\n  public fontFamily: string\n  /** 字重 */\n  public fontWeight: string\n  /** 弹幕移动速度 */\n  public speed: number\n  /** 弹幕不透明度 */\n  public opacity: number\n  /** 基准轨道高度 */\n  public baseTrackHeight: number\n  /** 轨道边距 */\n  public trackPadding: number\n  /** 限制区域 */\n  public limitArea: number\n  /** 颜色屏蔽 */\n  public colorFilter: boolean\n  /** 轨道屏蔽 */\n  public trackFilter: Record<TrackType, boolean> = {\n    roll: false,\n    reverse: false,\n    top: false,\n    bottom: false,\n  }\n  public userFilter: (string | number)[] = []\n  public contentFilter: (string | RegExp)[] = []\n  /** 允许重叠 */\n  public overlap: boolean\n  /** 类名前缀 */\n  public classPrefix: string\n  /** 获取当前时间函数 */\n  public getTime: () => number\n  /** 当前时间 */\n  private time = 0\n\n  /** 弹幕池 */\n  private danmakuPool: DanmakuItem[] = []\n  /** 待添加弹幕索引 */\n  private currentIndex = 0\n  /** 文字测量上下文 */\n  private measureContext: CanvasRenderingContext2D | null = null\n\n  /** 弹幕发射位置与播放器边界的距离 */\n  public startDistance = 2\n  /** 时间偏移 */\n  public timeOffset = 0\n  /** 滚动弹幕基准速度 */\n  public baseSpeed = 100\n  /** 静止弹幕基准持续时间 */\n  public baseDuration = 5\n  /** 弹幕速度增加率k值\n   * 弹幕速度 = baseSpeed * (1 + deltaSpeed * 弹幕宽度)\n   */\n  public deltaSpeed = 0.002\n\n  /** 弹幕轨道高度 */\n  private trackHeights: Record<TrackType, number[]> = {\n    roll: [],\n    reverse: [],\n    top: [],\n    bottom: [],\n  }\n\n  /** 弹幕轨道 */\n  private danmakuTracks: Record<TrackType, HTMLElement[][]> = {\n    roll: [],\n    reverse: [],\n    top: [],\n    bottom: [],\n  }\n\n  constructor(container: HTMLDivElement, options: DanmakuEngineOptions) {\n    this.container = container\n    this.fontScale = options.fontScale ?? 1\n    this.baseTrackHeight = 28\n    this.trackPadding = 6\n    this.speed = options.speed ?? 1\n    this.opacity = options.opacity ?? 1\n    this.limitArea = 1\n    this.overlap = false\n    this.fontFamily = options.fontFamily ?? \"SimHei\"\n    this.fontWeight = options.fontWeight ?? \"bold\"\n    this.classPrefix = options.classPrefix ?? \"mfuns\"\n    this.colorFilter = options.colorFilter || false\n    this.getTime = options.getTime\n\n    this.container.classList.add(`${this.classPrefix}-danmaku`)\n    this.checkDanmaku()\n  }\n\n  play() {\n    this.paused = false\n    this.container.classList.remove(\"state-paused\")\n  }\n\n  pause() {\n    this.paused = true\n    this.container.classList.add(\"state-paused\")\n  }\n\n  /** 发生跳转 */\n  seek() {\n    // 清屏\n    this.clear()\n    // 重新获取当前时间及待添加弹幕索引\n    this.time = this.getTime()\n    const index = this.danmakuPool.findIndex((d) => this.time <= d.time)\n    this.currentIndex = index === -1 ? this.danmakuPool.length : index\n  }\n\n  /** 设置弹幕池 */\n  setPool(dan: DanmakuItem[]) {\n    // 直接设置弹幕池并排序\n    this.danmakuPool = [...dan]\n    this.danmakuPool.sort((a, b) => a.time - b.time)\n    const index = this.danmakuPool.findIndex((d) => this.time <= d.time)\n    this.currentIndex = index === -1 ? this.danmakuPool.length : index\n  }\n\n  /** 重置弹幕池 */\n  reset() {\n    this.clear()\n    this.danmakuPool = []\n    this.currentIndex = 0\n  }\n\n  /** 弹幕池添加弹幕 */\n  add(dan: DanmakuItem[]) {\n    dan.forEach((dm) => {\n      /** 按时间顺序插入弹幕 */\n      const index = this.danmakuPool.findIndex((d) => dm.time <= d.time)\n      this.danmakuPool.splice(index === -1 ? this.danmakuPool.length : index, 0, dm)\n      // 若插入弹幕的时间小于当前时间，则待添加弹幕索引+1\n      if (dm.time < this.time) this.currentIndex += 1\n    })\n  }\n\n  /** 弹幕池移除符合id的弹幕 */\n  remove(ids: (string | number)[]) {\n    const displayed = [\n      ...this.container.querySelectorAll<HTMLElement>(`.${this.classPrefix}-danmaku-item`),\n    ]\n    ids.forEach((id) => {\n      const index = this.danmakuPool.findIndex((dm) => dm.id == id)\n      if (index === -1) return\n      this.danmakuPool.splice(index, 1)\n      // 移除位置若小于当前待添加弹幕位置，则待添加弹幕索引-1\n      if (index < this.currentIndex) this.currentIndex -= 1\n      // 从DOM中移除弹幕\n      const el = displayed.find((d) => d.dataset.id === id.toString())\n      if (el) {\n        // 此处不移除DOM是为了使弹幕顺利完成动画，以便轨道自动清除弹幕DOM\n        el.innerHTML = \"\"\n      }\n    })\n  }\n\n  /** 弹幕清屏 */\n  clear(type?: TrackType) {\n    if (type) {\n      this.danmakuTracks[type] = []\n      return\n    }\n    this.danmakuTracks = {\n      roll: [],\n      reverse: [],\n      top: [],\n      bottom: [],\n    }\n    this.trackHeights = {\n      roll: [],\n      reverse: [],\n      top: [],\n      bottom: [],\n    }\n    this.container.innerHTML = \"\"\n  }\n\n  /** 检查弹幕是否需要进入弹幕池 */\n  checkDanmaku() {\n    if (this.danmakuPool.length && !this.paused && !this.hidden) {\n      let item = this.danmakuPool[this.currentIndex]\n      const dan = []\n      // 刷新当前时间\n      this.time = this.getTime()\n      // 若待添加弹幕时间小于当前时间，则持续添加弹幕直到下一条弹幕的时间不小于当前时间为止\n      while (item && item.time < this.time) {\n        if (\n          this.checkTrackFilter(item) &&\n          this.checkColorFilter(item) &&\n          this.checkUserFilter(item) &&\n          this.checkContentFilter(item)\n        ) {\n          dan.push(item)\n        }\n        this.currentIndex += 1\n        item = this.danmakuPool[this.currentIndex]\n      }\n      // console.log(this.currentIndex)\n      this.draw(dan)\n    }\n    window.requestAnimationFrame(() => {\n      this.checkDanmaku()\n    })\n  }\n\n  /** 设置弹幕类型过滤 */\n  setTrackFilter(type: TrackType, value: boolean) {\n    this.trackFilter[type] = value\n    if (value) {\n      this.container\n        .querySelectorAll<HTMLElement>(`.${this.classPrefix}-danmaku-${type}`)\n        .forEach((el) => {\n          el.innerHTML = \"\"\n        })\n    }\n  }\n\n  /** 检查弹幕类型过滤 */\n  checkTrackFilter(dm: DanmakuItem) {\n    return !this.trackFilter[DanmakuMode[dm.mode] as TrackType]\n  }\n\n  /** 设置弹幕颜色过滤 */\n  setColorFilter(value: boolean) {\n    this.colorFilter = value\n    if (value) {\n      const items = this.container.querySelectorAll<HTMLElement>(\n        `.${this.classPrefix}-danmaku-item`\n      )\n      items.forEach((el) => {\n        if (el.style.color !== \"rgb(255, 255, 255)\") {\n          el.innerHTML = \"\"\n        }\n      })\n    }\n  }\n\n  /** 检查弹幕颜色过滤 */\n  checkColorFilter(dm: DanmakuItem) {\n    return !this.colorFilter || dm.color === 16777215\n  }\n\n  /** 设置内容过滤 */\n  setContentFilter(content: string | RegExp, value: boolean) {\n    const contentIndex = this.contentFilter.indexOf(content)\n    if (value) {\n      if (contentIndex > -1) {\n        return\n      }\n      this.contentFilter.push(content)\n      const items = this.container.querySelectorAll<HTMLElement>(\n        `.${this.classPrefix}-danmaku-item`\n      )\n      if (typeof content == \"string\") {\n        items.forEach((el) => {\n          if (el.innerText.includes(content)) {\n            el.innerHTML = \"\"\n          }\n        })\n      } else {\n        items.forEach((el) => {\n          if (content.test(el.innerText)) {\n            el.innerHTML = \"\"\n          }\n        })\n      }\n    } else {\n      contentIndex > -1 && this.contentFilter.splice(contentIndex, 1)\n    }\n  }\n  /** 检查弹幕内容过滤 */\n  checkContentFilter(dm: DanmakuItem) {\n    for (const keyword of this.contentFilter) {\n      if (typeof keyword == \"string\") {\n        if (dm.content.search(keyword)) return false\n      } else if (keyword.test(dm.content)) {\n        return false\n      }\n    }\n    return true\n  }\n\n  /** 设置用户过滤 */\n  setUserFilter(user: string | number, value: boolean) {\n    const contentIndex = this.userFilter.indexOf(user)\n    if (value) {\n      if (contentIndex > -1) {\n        return\n      }\n      this.userFilter.push(user)\n      const items = this.container.querySelectorAll<HTMLElement>(\n        `.${this.classPrefix}-danmaku-item`\n      )\n      items.forEach((el) => {\n        if (el.dataset.user == user) {\n          el.innerHTML = \"\"\n        }\n      })\n    } else {\n      contentIndex > -1 && this.userFilter.splice(contentIndex, 1)\n    }\n  }\n  /** 检查用户过滤 */\n  checkUserFilter(dm: DanmakuItem) {\n    return this.userFilter.indexOf(dm.user) == -1\n  }\n\n  /** 绘制弹幕 */\n  draw(dan: DanmakuItem[]) {\n    /** 弹幕轨道高度 */\n    const itemHeight = this.baseTrackHeight * this.fontScale\n    /** 弹幕容器宽度 */\n    const containerWidth = this.container.offsetWidth\n    /** 弹幕区域高度 */\n    const containerHeight = this.container.offsetHeight * this.limitArea\n    /** 轨道数量 */\n    const itemY = Math.floor(containerHeight / itemHeight)\n    // console.log(itemY);\n    if (this.trackHeights.roll.length !== itemY) {\n      this.trackHeights.roll = createArray(itemY, itemHeight)\n    }\n    if (this.trackHeights.reverse.length !== itemY) {\n      this.trackHeights.reverse = createArray(itemY, itemHeight)\n    }\n    if (this.trackHeights.top.length !== itemY) {\n      this.trackHeights.top = createArray(itemY, itemHeight)\n    }\n    if (this.trackHeights.bottom.length !== itemY) {\n      this.trackHeights.bottom = createArray(itemY, itemHeight)\n    }\n    /** 弹幕与弹幕容器右侧的距离(滚动弹幕) */\n    const danItemRight = (el: HTMLElement) => {\n      const containerRight = this.container.getBoundingClientRect().right\n      const elRight = el.getBoundingClientRect().right\n      return containerRight - elRight\n    }\n    /** 弹幕与弹幕容器左侧的距离(逆向弹幕) */\n    const danItemLeft = (el: HTMLElement) => {\n      const containerLeft = this.container.getBoundingClientRect().left\n      const elLeft = el.getBoundingClientRect().left\n      return elLeft - containerLeft\n    }\n    /** 获取弹幕速度 */\n    const getSpeed = (width: number) => this.baseSpeed * (1 + this.deltaSpeed * width) * this.speed\n    /** 获取单个轨道内所有弹幕 */\n    const getDOMTrack = (type: string, i: number) => {\n      return [\n        ...this.container.querySelectorAll<HTMLElement>(`.${this.classPrefix}-danmaku-${type}`),\n      ].filter((el: HTMLElement) => el.dataset.track === `${i}`)\n    }\n    /** 获取弹幕可进入的轨道 */\n    const getTrack = (ele: HTMLElement, type: TrackType, width: number) => {\n      // 对可用范围内的轨道进行一次遍历\n      forTrack: for (let i = 0; this.overlap || i < itemY; i++) {\n        const DOMTrack = getDOMTrack(type, i)\n        /** 该轨道内的所有弹幕 */\n        let track = this.danmakuTracks[type][i]\n        this.danmakuTracks[type][i] = DOMTrack\n        if (track && track.length) {\n          // 如果该轨道存在弹幕\n          if (type === \"roll\") {\n            /** 弹幕从发射到触碰另一边边界到所需要的时间 */\n            const enterTime = containerWidth / getSpeed(width)\n            if (track.length !== DOMTrack.length) {\n              //\n              track = DOMTrack\n            }\n            for (const dm of track) {\n              const danRight = danItemRight(dm) - 10\n              this.trackHeights[type][i] = parseInt(dm.style.fontSize) + this.trackPadding\n              // 如果滚动弹幕存在同一轨道碰撞的可能，则该轨道不可装填弹幕\n              if (\n                danRight <=\n                  containerWidth - enterTime * getSpeed(dm.getBoundingClientRect().width) ||\n                danRight <= 0\n              ) {\n                // 轨道高度设置为该条弹幕的高度\n                continue forTrack\n              }\n            }\n          } else if (type === \"reverse\") {\n            /** 弹幕从发射到触碰另一边边界到所需要的时间 */\n            const enterTime = containerWidth / getSpeed(width)\n            if (track.length !== DOMTrack.length) {\n              //\n              track = DOMTrack\n            }\n            for (const dm of track) {\n              const danLeft = danItemLeft(dm) - 10\n              this.trackHeights[type][i] = parseInt(dm.style.fontSize) + this.trackPadding\n              // 如果逆向弹幕存在同一轨道碰撞的可能，则该轨道不可装填弹幕\n              if (\n                danLeft <=\n                  containerWidth - enterTime * getSpeed(dm.getBoundingClientRect().width) ||\n                danLeft <= 0\n              ) {\n                continue forTrack\n              }\n            }\n          } else {\n            // 非滚动弹幕该轨道不可装填\n            continue forTrack\n          }\n          // 轨道弹幕组遍历完毕，组内所有弹幕均完全进入容器，可以向该轨道装填弹幕\n          this.danmakuTracks[type][i].push(ele)\n          // 动画结束后，需从轨道弹幕组中移除该弹幕\n          ele.addEventListener(\"animationend\", () => {\n            const index = this.danmakuTracks[type][i]?.indexOf(ele)\n            index && this.danmakuTracks[type][i]?.splice(index, 1)\n          })\n          return i\n        } else {\n          // 如果该轨道没有弹幕，可以向该轨道装填弹幕\n          if (Array.isArray(this.danmakuTracks[type][i])) {\n            this.danmakuTracks[type][i].push(ele)\n          } else {\n            this.danmakuTracks[type][i] = [ele]\n          }\n\n          ele.addEventListener(\"animationend\", () => {\n            const index = this.danmakuTracks[type][i]?.indexOf(ele)\n            index && this.danmakuTracks[type][i]?.splice(index, 1)\n          })\n          return i\n        }\n      }\n      // 遍历完毕，所有轨道都不可用，返回-1\n      return -1\n    }\n\n    const docFragment = document.createDocumentFragment()\n\n    for (let i = 0; i < dan.length; i++) {\n      const dm = dan[i]\n      /** 忽略非普通弹幕 */\n      if (dm.mode >= 7) {\n        continue\n      }\n      /** 弹幕DOM */\n      const item = document.createElement(\"div\")\n      item.classList.add(`${this.classPrefix}-danmaku-item`)\n      item.classList.add(`${this.classPrefix}-danmaku-${DanmakuMode[dm.mode]}`)\n      item.innerHTML = `<span>${dm.content.replace(/(\\\\n)/g, \"\\n\")}</span>`\n      if (typeof dm.color == \"number\") {\n        item.style.color = number2Color(dm.color)\n      } else {\n        item.style.color = dm.color\n      }\n      item.style.opacity = this.opacity.toString()\n      item.style.fontSize = +dm.size * this.fontScale + \"px\"\n      /** 弹幕运动结束后，从DOM中移除该弹幕 */\n      item.addEventListener(\"animationend\", () => {\n        if ([...this.container.children].indexOf(item) > -1) this.container.removeChild(item)\n      })\n\n      /** 弹幕内容宽度 */\n      const itemWidth = this.measureTextWidth(\n        dm.content,\n        `${this.fontWeight} ${+dm.size * this.fontScale}px ${this.fontFamily}`\n      )\n\n      /** 轨道类型 */\n      let trackType = DanmakuMode[dm.mode] as TrackType\n      /** 轨道位置 */\n      let track: number\n      /** 轨道序号 */\n      let trackIndex\n      // adjust\n      switch (trackType) {\n        case \"roll\":\n        case \"reverse\":\n          // 无限弹幕模式下轨道序号可能大于itemY，可通过取余得到实际轨道位置\n          trackIndex = getTrack(item, trackType, itemWidth)\n          track = trackIndex % itemY\n          // console.log(track);\n          if (track >= 0) {\n            const maxTop = this.trackHeights[trackType]\n              .slice(0, itemY)\n              .reduce((prev, cur) => prev + cur, 0)\n            const top =\n              this.trackHeights[trackType].slice(0, track).reduce((prev, cur) => prev + cur, 0) %\n              maxTop\n            // console.log(top, track);\n            if (top + parseInt(item.style.fontSize) + this.trackPadding > containerHeight) {\n              this.danmakuTracks[trackType][i]?.pop()\n              return\n            }\n            const speed = getSpeed(itemWidth)\n            const distance = itemWidth + containerWidth + this.startDistance * 2\n            item.dataset.track = trackIndex.toString()\n            item.style.width = itemWidth + 1 + \"px\"\n            item.style.top = top + \"px\"\n            item.style.fontFamily = this.fontFamily\n            item.style.fontWeight = this.fontWeight\n            item.style.setProperty(\"--duration\", `${distance / speed}s`) // 持续时间\n            item.style.setProperty(\"--offset\", `${containerWidth + this.startDistance}px`) // 起始位置\n            item.style.setProperty(\"--translateX\", `${-distance}px`) // 位移距离\n          }\n          break\n        case \"top\":\n          track = getTrack(item, trackType, 0) % itemY\n          if (track >= 0) {\n            const topArr: HTMLElement[] = []\n            const topDan = this.danmakuTracks.top\n            for (const t of topDan) {\n              topArr.push(...t)\n            }\n            const top = topArr\n              .map((el) => {\n                return parseInt(el.style.fontSize) + this.trackPadding\n              })\n              .slice(0, track)\n              .reduce((prev, cur) => prev + cur, 0)\n\n            if (top + parseInt(item.style.fontSize) + this.trackPadding > containerHeight) {\n              this.danmakuTracks[trackType][i]?.pop()\n              return\n            }\n            item.dataset.track = track.toString()\n            item.style.width = itemWidth + 1 + \"px\"\n            item.style.marginLeft = `-${(itemWidth + 1) * 0.5}px`\n            item.style.top = top + \"px\"\n            item.style.fontFamily = this.fontFamily\n            item.style.fontWeight = this.fontWeight\n            item.style.setProperty(\"--duration\", `${this.baseDuration / this.speed}s`) // 持续时间\n          }\n          break\n        case \"bottom\":\n          trackType = \"bottom\"\n          track = getTrack(item, trackType, 0) % itemY\n          if (track >= 0) {\n            const bottomArr: HTMLElement[] = []\n            const bottomDan = this.danmakuTracks.bottom\n            for (const t of bottomDan) {\n              bottomArr.push(...t)\n            }\n            const bottom = bottomArr\n              .map((el) => {\n                return parseInt(el.style.fontSize) + this.trackPadding\n              })\n              .slice(0, track)\n              .reduce((prev, cur) => prev + cur, 0)\n\n            if (bottom + parseInt(item.style.fontSize) + this.trackPadding > containerHeight) {\n              this.danmakuTracks[trackType][i]?.pop()\n              return\n            }\n            item.dataset.track = track.toString()\n            item.style.width = itemWidth + 1 + \"px\"\n            item.style.marginLeft = `-${(itemWidth + 1) * 0.5}px`\n            item.style.bottom = bottom + \"px\"\n            item.style.fontFamily = this.fontFamily\n            item.style.fontWeight = this.fontWeight\n            item.style.setProperty(\"--duration\", `${this.baseDuration / this.speed}s`) // 持续时间\n          }\n          break\n        default:\n          track = -1\n          console.error(`无法处理的弹幕模式: ${dm.mode}`)\n      }\n      if (track >= 0) {\n        item.dataset.id = dm.id.toString()\n        item.dataset.user = dm.user.toString()\n        // 添加弹幕到容器\n        this.container.appendChild(item)\n      }\n    }\n    return docFragment\n  }\n  /** 测量字体宽度 */\n  measureTextWidth(text: string, font: string) {\n    if (!this.measureContext) {\n      this.measureContext = document.createElement(\"canvas\").getContext(\"2d\")!\n    }\n    this.measureContext.font = font\n    return this.measureContext.measureText(text).width\n  }\n  /** 根据某一坐标捕获弹幕DOM */\n  captureDanmakuDOM(x: number, y: number, range: number, single = false) {\n    const result: HTMLElement[] = []\n    // 遍历所有在屏上的弹幕\n    const items = this.container.querySelectorAll<HTMLElement>(`.${this.classPrefix}-danmaku-item`)\n    for (const el of items) {\n      if (el.innerHTML) {\n        // 获取检测边界\n        const elRect = el.getBoundingClientRect()\n        const containerRect = this.container.getBoundingClientRect()\n        const edgeLeft = elRect.left - containerRect.left\n        const edgeRight = elRect.right - containerRect.left\n        const edgeTop = elRect.top - containerRect.top\n        const edgeBottom = elRect.bottom - containerRect.top\n        if (\n          x >= edgeLeft - range &&\n          x <= edgeRight + range &&\n          y >= edgeTop - range &&\n          y <= edgeBottom + range\n        ) {\n          result.push(el)\n          // 如果只要求获取一个元素，则停止遍历以优化性能\n          if (single) return result\n        }\n      }\n    }\n    return result\n  }\n  /** 根据某一坐标捕获弹幕 */\n  captureDanmaku(x: number, y: number, range: number, single = false) {\n    const resultDOM = this.captureDanmakuDOM(x, y, range, single)\n    const result: DanmakuItem[] = []\n    for (const el of resultDOM) {\n      const dm = this.getDanmakuById(el.dataset.id!)\n      if (dm) {\n        result.push(dm)\n      }\n    }\n    return result\n  }\n  /** 根据id获取弹幕 */\n  getDanmakuById(id: string | number) {\n    return this.danmakuPool.find((dm) => dm.id.toString() === id.toString())\n  }\n\n  /** 显示弹幕 */\n  show() {\n    this.hidden = false\n  }\n\n  /** 隐藏弹幕 */\n  hide() {\n    this.hidden = true\n    this.clear()\n  }\n}\n","let count = 1000\nconst ar = [\n  \"1\",\n  \"2\",\n  \"3\",\n  \"4\",\n  \"5\",\n  \"6\",\n  \"7\",\n  \"8\",\n  \"9\",\n  \"0\",\n  \"a\",\n  \"b\",\n  \"c\",\n  \"d\",\n  \"e\",\n  \"f\",\n  \"g\",\n  \"h\",\n  \"i\",\n  \"j\",\n  \"k\",\n  \"l\",\n  \"m\",\n  \"n\",\n  \"o\",\n  \"p\",\n  \"q\",\n  \"r\",\n  \"s\",\n  \"t\",\n  \"u\",\n  \"v\",\n  \"w\",\n  \"x\",\n  \"y\",\n  \"z\",\n]\n\nexport function randomId() {\n  const hs = []\n  const al = ar.length\n  for (let i = 0; i < 8; i++) {\n    hs.push(ar[Math.floor(Math.random() * al)])\n  }\n  count++\n  return hs.join(\"\") + `${count}`\n}\n","import { randomId } from \"@/utils/randomId\"\nimport { DanmakuItem } from \"../types\"\n\ninterface DanmakuParseItem {\n  data: any\n  type: string\n  origin?: string\n}\n\ninterface DanmakuParserOptions {\n  defaultParser: string\n  list?: Record<string, DanmakuParserFunction>\n}\n\ntype DanmakuParserFunction = (data: any) => DanmakuItem[]\n\n/** 弹幕格式转换，将获取到的弹幕转换为播放器弹幕格式 */\nexport default class DanmakuParser {\n  defaultParser: string\n\n  list: Record<string, DanmakuParserFunction>\n\n  constructor({ defaultParser }: DanmakuParserOptions) {\n    this.defaultParser = defaultParser || \"bilibili-xml\"\n    this.list = {\n      dplayer: (data: [number, number, number, number | string, string, number, number][]) =>\n        data.map((item, i) => ({\n          time: item[0],\n          mode: [1, 5, 4, 6][item[1]],\n          color: item[2],\n          user: item[3],\n          content: item[4],\n          size: 25,\n          date: 0,\n          id: randomId(),\n        })),\n      mfuns: (data: [number, number, number, string, string, number, number, number][]) =>\n        data.map((item) => ({\n          time: item[0],\n          mode: item[1],\n          color: item[2],\n          user: item[3],\n          content: item[4],\n          size: item[5],\n          date: item[6] > 1 ? item[6] : 0,\n          id: item[7],\n        })),\n      \"bilibili-xml\": (data: string) => {\n        const bilibiliXMLParser = (xmlData: string) => {\n          const dan: [string, any[]][] = []\n          const xmlDoc = new DOMParser().parseFromString(xmlData, \"text/xml\")\n          // 获取xml文档的所有子节点\n          const nodeList = xmlDoc.childNodes\n          const generate = (nodeList: any) => {\n            for (let i = 0; i < nodeList.length; i++) {\n              const currentNode = nodeList[i]\n              if (currentNode?.attributes?.length && i > 0) {\n                const m = currentNode.attributes[0].nodeValue.split(\",\")\n                const c = currentNode.innerHTML\n                dan.push([c, m])\n              } else if (currentNode.childNodes.length > 0) {\n                generate(currentNode.childNodes)\n              }\n            }\n          }\n          generate(nodeList)\n          return dan.map(([c, m]) => ({\n            time: +m[0],\n            mode: +m[1],\n            color: +m[3],\n            user: m[6],\n            content: c,\n            size: +m[2] ?? 25,\n            date: +m[4] ?? 0,\n            id: +m[7],\n          }))\n        }\n        return bilibiliXMLParser(data)\n      },\n    }\n  }\n\n  /** 将获取到的弹幕转换为播放器弹幕格式 */\n  parse({ data, type }: DanmakuParseItem) {\n    const parser = this.list[type]\n    try {\n      return parser(data)\n    } catch (err) {\n      console.error(err)\n    }\n  }\n}\n","import { DanmakuItem, DanmakuSendItem, OperationResult } from \"@/types\"\nimport MfunsPlayer from \"@/player\"\nimport Danmaku from \".\"\n\nexport default class DanmakuOperate {\n  danmaku: Danmaku\n  player: MfunsPlayer\n  constructor(danmaku: Danmaku) {\n    this.danmaku = danmaku\n    this.player = danmaku.player\n  }\n\n  /**\n   * 发送弹幕\n   * @param danmaku 要发送的弹幕\n   * @return 操作结果\n   * */\n  async send(danmaku: DanmakuSendItem): Promise<OperationResult> {\n    let result = await this.danmaku?.api?.send?.({\n      api: this.danmaku.api.url,\n      id: this.player.video.list[this.player.video.part].danmakuId || 0,\n      danmaku,\n    })\n    result ??= {\n      success: false,\n      message: \"发送失败\",\n    }\n    // 操作成功后将弹幕添加到弹幕池\n    if (result.success) {\n      this.danmaku.add([\n        Object.assign(\n          {\n            id: `send:${Date.now()}`,\n            date: Math.floor(Date.now() / 1000),\n            user: this.player.userId,\n          },\n          danmaku\n        ),\n      ])\n    }\n    return result\n  }\n\n  /**\n   * 举报弹幕\n   * @param danmaku 要举报的弹幕\n   * @return 操作结果\n   * */\n  async report(danmaku: DanmakuItem): Promise<OperationResult> {\n    let result = await this.danmaku?.api?.report?.({ api: this.danmaku.api.url, danmaku })\n    result ??= {\n      success: false,\n      message: \"操作失败\",\n    }\n    // 操作成功后从弹幕池移除该弹幕\n    if (result.success) {\n      this.danmaku.remove([danmaku.id])\n    }\n    return result\n  }\n\n  /**\n   * 删除弹幕\n   * @param danmaku 要删除的弹幕\n   * @return 操作结果\n   * */\n  async delete(danmaku: DanmakuItem[]): Promise<OperationResult> {\n    let result = await this.danmaku?.api?.delete?.({ api: this.danmaku.api.url, danmaku })\n    result ??= {\n      success: false,\n      message: \"操作失败\",\n    }\n    // 操作成功后从弹幕池移除该弹幕\n    if (result.success) {\n      this.danmaku.remove(danmaku.map((dm) => dm.id))\n    }\n    return result\n  }\n\n  /**\n   * 删除自己发送的弹幕\n   * @param danmaku 要删除的弹幕\n   * @return 操作结果\n   * */\n  async recall(danmaku: DanmakuItem): Promise<OperationResult> {\n    let result = await this.danmaku?.api?.recall?.({ api: this.danmaku.api.url, danmaku })\n    result ??= {\n      success: false,\n      message: \"操作失败\",\n    }\n    if (result.success) {\n      this.danmaku.remove([danmaku.id])\n    }\n    return result\n  }\n\n  /**\n   * 屏蔽用户\n   * @param user 用户id\n   * @param flag 设置屏蔽状态\n   * @return 操作结果\n   * */\n  async blockUser(user: string | number, flag: boolean): Promise<OperationResult> {\n    let result = await this.danmaku?.api?.blockUser?.({ api: this.danmaku.api.url, user, flag })\n    result ??= {\n      success: false,\n      message: \"操作失败\",\n    }\n    // 操作成功后在弹幕池屏蔽该用户\n    if (result.success) {\n      this.danmaku.engine.setUserFilter(user, flag)\n      this.player.events.trigger(\"danmaku:block_user\", user, flag)\n    }\n    return result\n  }\n\n  /**\n   * 屏蔽关键词\n   * @param content 关键词内容\n   * @param flag 设置屏蔽状态\n   * @return 操作结果\n   * */\n  async blockContent(content: string, flag: boolean): Promise<OperationResult> {\n    let result = await this.danmaku?.api?.blockContent?.({\n      api: this.danmaku.api.url,\n      content,\n      flag,\n    })\n    result ??= {\n      success: false,\n      message: \"操作失败\",\n    }\n    // 操作成功后在弹幕池屏蔽该内容\n    if (result.success) {\n      this.danmaku.engine.setContentFilter(content, flag)\n      this.player.events.trigger(\"danmaku:block_content\", content, flag)\n    }\n    return result\n  }\n}\n","import { DanmakuMode } from \"@/enum\"\nimport { PlayerOptions, DanmakuApiOptions, DanmakuItem, DanmakuSource } from \"@/types\"\nimport MfunsPlayer from \"@/player\"\nimport DanmakuEngine from \"./DanmakuEngine\"\nimport { html, render } from \"lit-html\"\nimport { classPrefix } from \"@/const\"\nimport DanmakuParser from \"./DanmakuParser\"\nimport DanmakuOperate from \"./DanmakuOperate\"\n\nconst template = html` <div class=\"${classPrefix}-row-danmaku-container\"></div> `\n\n/** 弹幕模块 */\nexport default class Danmaku {\n  /** 弹幕引擎，用于弹幕绘制 */\n  engine: DanmakuEngine\n\n  /** 弹幕格式转换 */\n  parser: DanmakuParser\n\n  /** 弹幕api */\n  api?: DanmakuApiOptions\n\n  /** 弹幕操作 */\n  operate: DanmakuOperate\n\n  /** 最新一条弹幕的id */\n  lastDanmakuId: string | number = 0\n\n  /** 允许获取实时新增弹幕 */\n  allowNewDanmaku: boolean\n\n  /** 弹幕池 */\n  list: DanmakuItem[] = []\n\n  player: MfunsPlayer\n\n  el: HTMLElement\n  $rowDanmakuContainer: HTMLDivElement\n\n  constructor(player: MfunsPlayer, options: PlayerOptions) {\n    this.player = player\n    this.parser = new DanmakuParser({ defaultParser: \"mfuns\" })\n    this.operate = new DanmakuOperate(this)\n    this.el = this.player.template.$danmakuWrap\n    this.api = options.danmaku?.api\n    this.allowNewDanmaku = false\n    render(template, this.el)\n    this.$rowDanmakuContainer = this.el.querySelector(`.${classPrefix}-row-danmaku-container`)!\n    this.engine = new DanmakuEngine(this.$rowDanmakuContainer, {\n      fontScale: 1,\n      fontFamily: \"SimHei\",\n      fontWeight: \"bold\",\n      speed: 1,\n      opacity: 1,\n      classPrefix: classPrefix,\n      /** 颜色限制 */\n      colorFilter: false,\n      getTime: () => this.player.time,\n    })\n    this.player.on(\"play\", () => {\n      this.engine.play()\n    })\n    this.player.on(\"pause\", () => {\n      this.engine.pause()\n    })\n    this.player.on(\"seeking\", () => {\n      this.engine.pause()\n      this.engine.seek()\n    })\n    this.player.on(\"seeked\", () => {\n      this.player.paused || this.engine.play()\n    })\n    this.player.on(\"part\", (p) => {\n      const { danmakuId, danmakuAddition } = this.player.video.list[p - 1]\n      console.log(danmakuAddition)\n      this.reload(danmakuId, danmakuAddition)\n    })\n  }\n\n  /** 加载附加弹幕 */\n  loadAddition({ url, type, data }: DanmakuSource) {\n    fetch(url)\n      .then((response) => {\n        if (/-xml$/.test(type)) {\n          return response.text()\n        } else {\n          return response.json()\n        }\n      })\n      .then((res) => {\n        const danmakuData = data ? data(res) : res\n        const dan = this.parser.parse({ data: danmakuData, type })\n        dan && this.add(dan)\n        this.player.events.trigger(\"danmaku:load_addition_end\", url, dan || [])\n      })\n      .catch((err) => {\n        this.player.events.trigger(\"danmaku:load_addition_fail\", url, err)\n        console.error(err)\n      })\n  }\n\n  /** 加载弹幕 */\n  private load(id: string | number) {\n    const api = this.api\n    api\n      ?.get({ api: api.url, id })\n      .then((data) => {\n        const dan = this.parser.parse({ data, type: api.type })\n        if (dan) {\n          this.add(dan)\n          this.lastDanmakuId = dan[dan.length - 1].id\n        }\n        this.player.events.trigger(\"danmaku:load_end\", dan || [])\n      })\n      .catch((err) => {\n        this.player.events.trigger(\"danmaku:load_fail\", err)\n      })\n  }\n\n  /** 加载实时新增弹幕 */\n  loadNew(id: string | number) {\n    const offset = this.lastDanmakuId\n    this.player.events.trigger(\"danmaku:load_new_start\", offset)\n    const api = this.api\n    api\n      ?.get({ api: api.url, id, offset: this.lastDanmakuId })\n      .then((data) => {\n        const dan = this.parser.parse({ data, type: api.type })\n        if (dan) {\n          this.add(dan)\n          this.lastDanmakuId = dan[dan.length - 1].id\n        }\n        this.player.events.trigger(\"danmaku:load_new_end\", offset, dan || [])\n      })\n      .catch((err) => {\n        this.player.events.trigger(\"danmaku:load_new_fail\", offset, err)\n      })\n  }\n\n  /** 重载弹幕 */\n  public async reload(id?: string | number, addition?: DanmakuSource[]) {\n    this.player.events.trigger(\"danmaku:load_start\")\n    // 清空弹幕池\n    this.engine.reset()\n    id && this.load(id)\n    addition?.forEach((ad) => {\n      this.loadAddition(ad)\n    })\n  }\n\n  /**\n   * 添加弹幕到弹幕池\n   * @param dan 要添加的弹幕\n   * */\n  add(dan: DanmakuItem[]) {\n    const basicDanmaku: DanmakuItem[] = []\n    const advancedDanmaku: Record<number, DanmakuItem[]> = {}\n    dan.forEach((dm) => {\n      if (dm.mode < 7) {\n        basicDanmaku.push(dm)\n      } else {\n        if (advancedDanmaku[dm.mode]) {\n          advancedDanmaku[dm.mode].push(dm)\n        } else {\n          advancedDanmaku[dm.mode] = [dm]\n        }\n      }\n    })\n    basicDanmaku.length && this.engine.add(basicDanmaku)\n    for (const mode in advancedDanmaku) {\n      this.player.events.trigger(\"danmaku:advanced\", parseInt(mode), advancedDanmaku[mode])\n    }\n  }\n\n  /**\n   * 根据id从弹幕池中移除弹幕\n   * @param ids 要移除的弹幕id\n   * */\n  remove(ids: (string | number)[]) {\n    this.engine.remove(ids)\n  }\n\n  /** 清空弹幕池 */\n  clear() {\n    this.engine.clear()\n  }\n\n  /** 显示弹幕 */\n  show() {\n    this.engine.show()\n    this.player.events.trigger(\"danmaku:on\")\n  }\n\n  /** 隐藏弹幕 */\n  hide() {\n    this.engine.hide()\n    this.player.events.trigger(\"danmaku:off\")\n  }\n\n  /** 切换弹幕显示 */\n  toggle() {\n    if (this.engine.hidden) {\n      this.show()\n    } else {\n      this.hide()\n    }\n  }\n\n  // 弹幕屏蔽\n\n  /**\n   * 弹幕类型屏蔽\n   * @param type 类型\n   * @param flag 设置是否屏蔽\n   */\n  filter(type: string, flag: boolean) {\n    switch (type) {\n      case \"roll\":\n        this.engine.setTrackFilter(\"roll\", flag)\n        this.engine.setTrackFilter(\"reverse\", flag)\n        break\n      case \"top\":\n      case \"bottom\":\n        this.engine.setTrackFilter(type, flag)\n        break\n      case \"color\":\n        this.engine.setColorFilter(flag)\n        break\n    }\n    this.player.events.trigger(\"danmaku:filter\", type, flag)\n  }\n\n  // 弹幕播放属性设置\n\n  /** 设置弹幕不透明度 */\n  setOpacity(value: number, save?: boolean) {\n    this.engine.opacity = value\n    this.player.events.trigger(\"change:danmaku_opacity\", value)\n  }\n  /** 设置弹幕速度 */\n  setSpeed(value: number, save?: boolean) {\n    this.engine.speed = value\n    this.player.events.trigger(\"change:danmaku_speed\", value)\n  }\n  /** 设置弹幕区域 */\n  setArea(value: number, save?: boolean) {\n    this.engine.limitArea = value || Infinity\n    this.player.events.trigger(\"change:danmaku_area\", value)\n  }\n  /** 设置弹幕大小 */\n  setScale(value: number, save?: boolean) {\n    this.engine.fontScale = value\n    this.player.events.trigger(\"change:danmaku_scale\", value)\n  }\n  /** 设置弹幕字体 */\n  setFont(value: string, save?: boolean) {\n    this.engine.fontFamily = value\n    this.player.events.trigger(\"change:danmaku_font\", value)\n  }\n  /** 设置弹幕加粗 */\n  setBold(value: boolean, save?: boolean) {\n    this.engine.fontWeight = value ? \"bold\" : \"\"\n    this.player.events.trigger(\"change:danmaku_bold\", value)\n  }\n}\n","import { AllPluginExposed, EmptyObject } from \"./types\"\nimport { PluginManager } from \"./plugin/PluginManager\"\nimport Controller from \"@/ui/Controller\"\nimport Events from \"@/Events\"\nimport Template from \"@/ui/Template\"\nimport { PlayerOptions, PlayerPlugin } from \"@/types\"\nimport Video from \"@/Video\"\nimport Mode from \"@/Mode\"\nimport HotKey from \"@/ui/HotKey\"\nimport Side from \"@/ui/Side\"\nimport ContextMenu from \"@/ui/ContextMenu\"\nimport Modal from \"@/ui/Modal\"\nimport Theme from \"@/ui/Theme\"\nimport State from \"@/ui/State\"\nimport Danmaku from \"./Danmaku\"\nimport { PlayerEventsMap } from \"./Events/PlayerEventsMap\"\n\nexport default class MfunsPlayer<T extends PlayerPlugin = PlayerPlugin> {\n  static readonly version = MFUNSPLAYER_VERSION\n  static readonly gitHash = GIT_HASH\n  /** 容器 */\n  readonly container: HTMLElement\n  /** 视频模块 */\n  video: Video\n  /** 播放列表模块 */\n  playlist: any\n  /** 插件 */\n  plugin = {} as AllPluginExposed<T>\n  /** 插件管理 */\n  pluginManager: PluginManager\n  /** 事件模块 */\n  events: Events\n  /** 弹幕模块 */\n  danmaku: Danmaku\n  /** 播放器模式控制 */\n  mode: Mode\n  /** 播放器状态控制 */\n  state: State\n  /** 模板 */\n  template: Template\n  /** 主题样式 */\n  theme: Theme\n  /** 控制栏 */\n  controller: Controller\n  /** 右键菜单 */\n  contextMenu: ContextMenu\n  /** 控制栏 */\n  side: Side\n  /** 模态框 */\n  modal: Modal\n  /** 快捷键 */\n  hotKey: HotKey\n  /** 用户id */\n  userId: string | number = 0\n  /** 视频作者id */\n  authorId: string | number | null = null\n\n  constructor(options: PlayerOptions<T>, plugins?: T[]) {\n    this.events = new Events()\n    this.container = options.container\n    // 注入模板\n    this.template = new Template(this, options)\n\n    // 视频核心功能\n    this.video = new Video(this, options)\n\n    // 插件管理\n    this.pluginManager = new PluginManager(this, plugins)\n\n    // 插件执行created函数(搭建界面、实现基本功能)\n    this.pluginManager.pluginCreate(options)\n\n    // 初始化主题样式模块\n    this.theme = new Theme(this, options)\n\n    // 模式\n    this.mode = new Mode(this, options)\n    this.state = new State(this, options)\n    this.danmaku = new Danmaku(this, options)\n\n    // 注入ui\n    this.controller = new Controller(this, options)\n    this.side = new Side(this, options)\n    this.modal = new Modal(this, options)\n    this.contextMenu = new ContextMenu(this, options)\n\n    this.hotKey = new HotKey(this, options)\n\n    // 插件执行init函数(配置初始化)\n    this.pluginManager.pluginInit(options)\n\n    // 播放器初始化完毕，加载第1P\n    this.setPart(1)\n\n    // --- 测试 --- //\n\n    this.on(\"part\", (p) => {\n      console.log(`当前分P - ${p}`)\n    })\n  }\n  /** 播放相关 */\n\n  /** 播放 */\n  public play() {\n    this.video.play()\n  }\n\n  /** 暂停 */\n  public pause() {\n    this.video.pause()\n  }\n\n  /** 切换播放/暂停状态 */\n  public toggle() {\n    if (this.paused) {\n      this.play()\n    } else {\n      this.pause()\n    }\n  }\n\n  /** 上一P */\n  public prev() {\n    this.video.prev()\n  }\n\n  /** 下一P */\n  public next() {\n    this.video.next()\n  }\n\n  get paused() {\n    return this.video.paused\n  }\n\n  /** 跳转 */\n  public seek(value: number) {\n    this.video.seek(value)\n  }\n\n  /** 设置音量 */\n  public setVolume(value: number) {\n    this.video.setVolume(value)\n  }\n\n  /** 静音 */\n  public mute(flag = true) {\n    this.video.mute(flag)\n  }\n\n  /** 设置倍速 */\n  public setPlaybackRate(value: number) {\n    this.video.setPlaybackRate(value)\n  }\n\n  /** 跳转分P */\n  public setPart(p: number, play = false) {\n    this.video.setPart(p, play)\n  }\n\n  /** 当前播放时间 */\n  public get time() {\n    return this.video.currentTime\n  }\n\n  /** 音量 */\n  public get volume() {\n    return this.video.volume\n  }\n\n  /** 静音 */\n  public get muted() {\n    return this.video.muted\n  }\n\n  /** 当前播放速度 */\n  public get playbackRate() {\n    return this.video.playbackRate\n  }\n\n  /** 尺寸模式相关 */\n\n  /** 全屏 */\n  public fullscreen() {\n    this.mode.fullscreen()\n  }\n\n  /** 退出全屏 */\n  public exitFullscreen() {\n    this.mode.exitFullscreen()\n  }\n\n  /** 是否处于全屏模式 */\n  get isFullscreen() {\n    return this.mode.isFullscreen\n  }\n\n  /** 网页全屏 */\n  public webfull() {\n    this.mode.webfull()\n  }\n\n  /** 退出网页全屏 */\n  public exitWebfull() {\n    this.mode.exitWebfull()\n  }\n\n  /** 是否处于网页全屏 */\n  get isWebfull() {\n    return this.mode.isWebfull\n  }\n\n  /** 画中画模式 */\n  public pip() {\n    this.mode.pip()\n  }\n\n  /** 退出画中画模式 */\n  public exitPip() {\n    this.mode.exitPip()\n  }\n\n  /** 是否处于画中画模式 */\n  get isPip() {\n    return this.mode.isPip\n  }\n\n  /** 宽屏模式 */\n  public wide() {\n    this.mode.wide()\n  }\n\n  /** 退出宽屏模式 */\n  public exitWide() {\n    this.mode.exitWide()\n  }\n\n  /** 是否处于宽屏模式 */\n  get isWide() {\n    return this.mode.isWide\n  }\n\n  /** 监听事件 */\n  public on<T extends keyof PlayerEventsMap>(name: T, listener: PlayerEventsMap[T]) {\n    this.events.on(name, listener)\n  }\n\n  /** 取消监听事件 */\n  public off<T extends keyof PlayerEventsMap>(name: T, listener: PlayerEventsMap[T]) {\n    this.events.off(name, listener)\n  }\n\n  /** 播放器销毁 */\n  public destroy() {\n    // 所有插件执行destroy函数\n  }\n}\n","import MfunsPlayer from \"@/player\"\nimport \"@css/index.scss\"\n\nconsole.log(\n  `${\"\\n\"} %c mfunsPlayer v${MFUNSPLAYER_VERSION} ${GIT_HASH} %c https://github.com/Mfuns-cn ${\"\\n\"}${\"\\n\"}`,\n  \"color: #fff; background: #7b7ff7; padding:5px 0;\",\n  \"background: #f5f5f5; padding:5px 0;\"\n)\n\nexport default MfunsPlayer\n"],"names":["PluginManager","player","list","names","plugin","options","_a","t","i","s","e","o","n","l","h","r","u","d","c","v","a","f","_","m","p","g","$","y","w","x","T","A","E","C","P","V","N","H","L","z","k","S","M","R","Z","I","B","D","classPrefix","repositoryLink","developers","createArray","count","val","getFullscreenElement","fullScreenEnabled","pictureInPictureEnabled","timeToSecond","str","arr","sec","min","hour","debounce","fn","delay","immediate","timer","isInvoke","args","secondToTime","second","showHour","add0","num","color2Number","color","number2Color","number","template","html","ProgressBar","controller","render","clientX","dragMoveEvent","dragEndEvent","time","nLength","per","flag","ButtonFullscreen","container","fragment","ButtonPip","ButtonPlay","LabelTime","inputVal","event","ButtonLoop","divider","Slider","max","step","value","onChange","onDragStart","onDragEnd","onDrag","trackLength","nMax","thumbTrackX","nLeft","mousemoveEvent","removeEvent","_b","SliderVertical","clientY","thumbTrackY","nTop","templateWrap","item","index","Picker","onPick","condition","MultiPicker","onToggle","b","label","Checkbox","ButtonVolume","muted","ButtonSettings","rate","ratio","ButtonPart","ButtonWebfull","ButtonPrev","ButtonNext","keyCode","ButtonDanmakuSwitch","ButtonDanmakuSettings","area","ButtonDanmakuStyle","danmakuBar","defaultFontSizeList","defaultModeList","defaultColorList","sRGBHex","DanmakuBar","defaultPlaceholder","placeholder","Controller","Events","name","listener","Template","VideoLoader","video","src","flvPlayer","hls","dashPlayer","Video","play","quality","currentVideoSource","source","onloadedmetadata","sourceList","sortedSources","ratioW","ratioH","width","height","cWidth","cHeight","type","buffered","rwxh","rhxw","ModeFullscreen","fullScreenChangeHandler","el","doc","ModePip","ModeWebfull","Mode","HotKey","setPart","title","SidePartList","Side","id","panel","onClick","templateDanmaku","danmaku","operation","dm","copyClip","content","res","rej","ContextMenu","menuList","MfunsPlayer","clientRect","captured","api","operate","myDanmaku","link","ModalAbout","key","description","ModalHotkey","hotkeyInfoList","Modal","themeOptionsVars","Theme","theme","State","debounceRemoveActive","DanmakuMode","DanmakuEngine","dan","ids","displayed","contentIndex","items","keyword","user","itemHeight","containerWidth","containerHeight","itemY","danItemRight","containerRight","elRight","danItemLeft","containerLeft","getSpeed","getDOMTrack","getTrack","ele","forTrack","DOMTrack","track","enterTime","danRight","danLeft","docFragment","itemWidth","trackType","trackIndex","maxTop","prev","cur","top","speed","distance","topArr","topDan","bottomArr","bottomDan","bottom","_c","text","font","range","single","result","elRect","containerRect","edgeLeft","edgeRight","edgeTop","edgeBottom","resultDOM","ar","randomId","hs","al","DanmakuParser","defaultParser","data","xmlData","nodeList","generate","currentNode","parser","err","DanmakuOperate","Danmaku","danmakuId","danmakuAddition","url","response","danmakuData","offset","addition","ad","basicDanmaku","advancedDanmaku","mode","save","plugins"],"mappings":"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","x_google_ignoreList":[1]}